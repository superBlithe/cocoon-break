!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FYGE=e():t.FYGE=e()}(window,(function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=98)}([function(t,e,r){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.GC_MODES=e.WRAP_MODES=e.SCALE_MODES=e.DRAW_MODES=e.BLEND_MODES=e.LINE_JOIN=e.LINE_CAP=e.LINE_ALIGNMENT=e.TEXT_lINETYPE=e.VERTICAL_ALIGN=e.TEXT_ALIGN=e.TEXT_GRADIENT=e.PRECISION=e.SHAPES=e.RENDERER_TYPE=e.DEG_TO_RAD=e.RAD_TO_DEG=e.PI_2=e.sin=e.cos=e.osType=e.VERSION=void 0,e.VERSION="2.0.21",e.osType=navigator&&navigator.userAgent&&(i=navigator.userAgent.toLocaleLowerCase(),/android/.test(i)?"android":/iphone|ipod|ipad/.test(i)?"ios":"pc")||my.getSystemInfoSync().platform.toLowerCase();var n=Math.PI,o=n>>1,a=n+o;e.cos=function(t){switch(t){case o:case-a:return 0;case n:case-n:return-1;case a:case-o:return 0;default:return Math.cos(t)}},e.sin=function(t){switch(t){case o:case-a:return 1;case n:case-n:return 0;case a:case-o:return-1;default:return Math.sin(t)}},e.PI_2=2*n,e.RAD_TO_DEG=180/n,e.DEG_TO_RAD=n/180,function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(e.RENDERER_TYPE||(e.RENDERER_TYPE={})),function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(e.SHAPES||(e.SHAPES={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(e.PRECISION||(e.PRECISION={})),function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(e.TEXT_GRADIENT||(e.TEXT_GRADIENT={})),function(t){t.CENTER="center",t.LEFT="left",t.RIGHT="right"}(e.TEXT_ALIGN||(e.TEXT_ALIGN={})),function(t){t.MIDDLE="middle",t.UP="up",t.DOWN="down"}(e.VERTICAL_ALIGN||(e.VERTICAL_ALIGN={})),function(t){t.SINGLE="single",t.MULTI="multi"}(e.TEXT_lINETYPE||(e.TEXT_lINETYPE={})),function(t){t[t.middle=.5]="middle",t[t.outter=1]="outter",t[t.inner=0]="inner"}(e.LINE_ALIGNMENT||(e.LINE_ALIGNMENT={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(e.LINE_CAP||(e.LINE_CAP={})),function(t){t.MITER="miter",t.ROUND="round",t.BEVEL="bevel"}(e.LINE_JOIN||(e.LINE_JOIN={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=21]="SRC_OVER",t[t.SRC_IN=22]="SRC_IN",t[t.SRC_OUT=23]="SRC_OUT",t[t.SRC_ATOP=24]="SRC_ATOP",t[t.DST_OVER=25]="DST_OVER",t[t.DST_IN=26]="DST_IN",t[t.DST_OUT=27]="DST_OUT",t[t.DST_ATOP=28]="DST_ATOP",t[t.ERASE=29]="ERASE",t[t.SUBTRACT=30]="SUBTRACT"}(e.BLEND_MODES||(e.BLEND_MODES={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(e.DRAW_MODES||(e.DRAW_MODES={})),function(t){t[t.LINEAR=0]="LINEAR",t[t.NEAREST=1]="NEAREST"}(e.SCALE_MODES||(e.SCALE_MODES={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(e.WRAP_MODES||(e.WRAP_MODES={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(e.GC_MODES||(e.GC_MODES={}))},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeText=e.ArrayBufferToBase64=e.clamp=e.removeItems=e.isWebGLSupported=e.GlobalPro=e.clearTextureCache=e.destroyTextureCache=e.TextureSheetCache=e.BaseTextureCache=e.TextureCache=e.premultiplyTint=e.sign=e.getUrlFileExtension=e.decomposeDataUri=e.getRGBA=e.rgb2hex=e.string2hex=e.hex2string=e.hex2rgb=e.getCanvasBitmapStyle=e.getGradientColor=e.getBackupCanvasCtx=e.uid=e.premultiplyBlendMode=void 0;var o=r(0),a=r(100),s=r(22);n(r(101),e);var u=r(102);Object.defineProperty(e,"toDisplayDataURL",{enumerable:!0,get:function(){return u.default}}),n(r(107),e),n(r(108),e),n(r(109),e),n(r(22),e),e.premultiplyBlendMode=a.mapPremultipliedBlendModes();var h,l=0;function c(){if(!h){var t=s.createCanvas();t.width=1,t.height=1,h=t.getContext("2d")}return h}function f(t,e){if(0==t.indexOf("0x")&&(t=t.replace("0x","#")),t.length<7&&(t="#000000"),1!=e){var r=parseInt("0x"+t.substr(1,2)),i=parseInt("0x"+t.substr(3,2)),n=parseInt("0x"+t.substr(5,2));t="rgba("+r+","+i+","+n+","+e+")"}return t}e.uid=function(){return++l},e.getBackupCanvasCtx=c,e.getGradientColor=function(t,e){var r,i=c();r=4==t.length?i.createLinearGradient(t[0],t[1],t[2],t[3]):i.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5]);for(var n=0,o=e.length;n<o;n++)r.addColorStop(e[n][0],f(e[n][1],e[n][2]));return r},e.getCanvasBitmapStyle=function(t){return c().createPattern(t,"repeat")},e.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},e.string2hex=function(t){return 0==t.indexOf("#")&&(t=t.replace("#","0x")),parseInt(t)},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},e.getRGBA=f;var p=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;e.decomposeDataUri=function(t){var e=p.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}};var d,v=/\.(\w{3,4})(?:$|\?|#)/i;e.getUrlFileExtension=function(t){var e=v.exec(t);if(e)return e[1].toLowerCase()},e.sign=function(t){return 0===t?0:t<0?-1:1},e.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,i=t>>8&255,n=255&t;return(255*e<<24)+((r=r*e+.5|0)<<16)+((i=i*e+.5|0)<<8)+(n=n*e+.5|0)},e.TextureCache=Object.create(null),e.BaseTextureCache=Object.create(null),e.TextureSheetCache=Object.create(null),e.destroyTextureCache=function(){var t;for(t in e.TextureCache)e.TextureCache[t].destroy();for(t in e.BaseTextureCache)e.BaseTextureCache[t].destroy()},e.clearTextureCache=function(){var t;for(t in e.TextureCache)delete e.TextureCache[t];for(t in e.BaseTextureCache)delete e.BaseTextureCache[t]},e.GlobalPro={stageRenderType:o.RENDERER_TYPE,dpi:1,padding:2},e.isWebGLSupported=function(){if("tb"==s.getEnv())return!0;if(void 0!==d)return d;var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=s.createCanvas(),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!r||!r.getContextAttributes().stencil);if(r){var n=r.getExtension("WEBGL_lose_context");n&&n.loseContext()}return r=null,d=i}catch(t){return d=!1}},e.removeItems=function(t,e,r){var i,n=t.length;if(!(e>=n||0===r)){var o=n-(r=e+r>n?n-e:r);for(i=e;i<o;++i)t[i]=t[i+r];t.length=o}},e.clamp=function(t,e,r){return Math.max(e,Math.min(r,t))},e.ArrayBufferToBase64=function(t){for(var e,r,i,n="",o=new Uint8Array(t),a=8*t.byteLength,s=0;s<a;s+=6)r=s%8,i=(o[e=s/8|0]||0)<<r>>2,r>2&&(i|=(o[e+1]||0)>>10-r),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&i);return n+=4==r?"=":6==r?"==":""},e.decodeText=function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",r=0,i=t.length;r<i;r++)e+=String.fromCharCode(t[r]);return decodeURIComponent(escape(e))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(38);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return i.Matrix}});var n=r(29);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return n.Point}});var o=r(51);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return o.ObservablePoint}});var a=r(52);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return a.Rectangle}});var s=r(99);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return s.default}});var u=r(53);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return u.default}})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector3=void 0;var i=r(10),n=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.x=t,this.y=e,this.z=r}return t.prototype.set=function(t,e,r){return this.x=t,this.y=e,this.z=r,this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},t.prototype.clone=function(){return(new t).copy(this)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},t.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this},t.prototype.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},t.prototype.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},t.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this},t.prototype.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},t.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this},t.prototype.multiplyVectors=function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},t.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},t.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},t.prototype.cross=function(t){return this.crossVectors(this,t)},t.prototype.crossVectors=function(t,e){var r=t.x,i=t.y,n=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-n*a,this.y=n*o-r*s,this.z=r*a-i*o,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.normalize=function(){var t=1/(this.length()||1);return this.x*=t,this.y*=t,this.z*=t,this},t.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},t.prototype.distanceToSquared=function(t){var e=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return e*e+r*r+i*i},t.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},t.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},t.prototype.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},t.prototype.clampScalar=function(e,r){return this.clamp(new t(e,e,e),new t(r,r,r))},t.prototype.clampLength=function(t,e){return this.divideScalar(this.length()||1).multiplyScalar(Math.max(t,Math.min(e,length)))},t.prototype.applyMatrix4=function(t){var e=this.x,r=this.y,i=this.z,n=t.elements,o=1/(n[3]*e+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*e+n[4]*r+n[8]*i+n[12])*o,this.y=(n[1]*e+n[5]*r+n[9]*i+n[13])*o,this.z=(n[2]*e+n[6]*r+n[10]*i+n[14])*o,this},t.prototype.setFromMatrixPosition=function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},t.prototype.setFromMatrixScale=function(t){var e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=i,this},t.prototype.setFromMatrixColumn=function(t,e){return this.fromArray(t.elements,4*e)},t.prototype.transformDirection=function(t){var e=this.x,r=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[4]*r+n[8]*i,this.y=n[1]*e+n[5]*r+n[9]*i,this.z=n[2]*e+n[6]*r+n[10]*i,this.normalize()},t.prototype.project=function(t){return this.applyMatrix4(t.worldMatrixInverse).applyMatrix4(t.projectionMatrix)},t.prototype.unproject=function(t){return this.applyMatrix4((new i.Matrix4).setInverseOf(t.projectionMatrix)).applyMatrix4(t._worldMatrix)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},t.prototype.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},t.prototype.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},t}();e.Vector3=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HashObject=void 0;var i=function(){function t(){this._instanceId=0,this._instanceType="HashObject",this._instanceId=t._object_id++}return Object.defineProperty(t.prototype,"instanceId",{get:function(){return this._instanceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instanceType",{get:function(){return this._instanceType},enumerable:!1,configurable:!0}),t._object_id=0,t}();e.HashObject=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(126),n=r(0),o=r(1),a={},s=function(){function t(e,r,s){for(var u in this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this._blendMode=n.BLEND_MODES.NORMAL,this.uniformData=s||i.default(this.vertexSrc,this.fragmentSrc),this.uniforms={},this.uniformData)this.uniforms[u]=this.uniformData[u].value,this.uniformData[u].type&&(this.uniformData[u].type=this.uniformData[u].type.toLowerCase());this.glShaders={},a[this.vertexSrc+this.fragmentSrc]||(a[this.vertexSrc+this.fragmentSrc]=o.uid()),this.glShaderKey=a[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=1,this.enabled=!0,this.autoFit=!0}return Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this._blendMode=t},enumerable:!1,configurable:!0}),t.prototype.apply=function(t,e,r,i){t.applyFilter(this,e,r,i)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")},enumerable:!1,configurable:!0}),t}();e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(61);Object.defineProperty(e,"GLTexture",{enumerable:!0,get:function(){return i.GLTexture}});var n=r(116);Object.defineProperty(e,"GLBuffer",{enumerable:!0,get:function(){return n.GLBuffer}});var o=r(117);Object.defineProperty(e,"VertexArrayObject",{enumerable:!0,get:function(){return o.VertexArrayObject}});var a=r(119);Object.defineProperty(e,"GLFramebuffer",{enumerable:!0,get:function(){return a.GLFramebuffer}});var s=r(120);Object.defineProperty(e,"GLShader",{enumerable:!0,get:function(){return s.GLShader}});var u=r(59);Object.defineProperty(e,"createContext",{enumerable:!0,get:function(){return u.createContext}});var h=r(58);Object.defineProperty(e,"checkMaxIfStatementsInShader",{enumerable:!0,get:function(){return h.checkMaxIfStatementsInShader}});var l=r(42);Object.defineProperty(e,"defaultValue",{enumerable:!0,get:function(){return l.defaultValue}})},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Geometry=void 0;var o=r(3),a=r(4),s=r(60),u=r(47),h=r(27),l=function(t){function e(e,r,i,n,o){var a=t.call(this)||this;return a._vertByteSize=44,a.boundingBox=null,a.boundingSphere=null,a.doHitFace=!1,a._instanceType="Geometry",a._glVaoBuffer={},a._vertices=e,a._normals=i||new Float32Array(e.length),a._colors=n||new Float32Array(e.length).map((function(){return 1})),a._uvs=o||new Float32Array(e.length/3*2),a._indices=r?new Uint16Array(r):null,a._attrBuffer=new s.BatchBuffer(e.length/3*a._vertByteSize),a}return n(e,t),e.prototype.computeBoundingBox=function(){this.boundingBox||(this.boundingBox=new u.Box3);var t=this._vertices;t?this.boundingBox.setFromArray(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("顶点数据有误")},e.prototype.computeBoundingSphere=function(){var t=new u.Box3,e=new o.Vector3;this.boundingSphere||(this.boundingSphere=new h.Sphere);var r=this._vertices;if(r){var i=this.boundingSphere.center;t.setFromArray(r),t.getCenter(i);for(var n=0,a=0,s=r.length;a<s;a+=3)e.x=r[a],e.y=r[a+1],e.z=r[a+2],n=Math.max(n,i.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error("顶点数据有误")}},e.prototype.destroy=function(){},e}(a.HashObject);e.Geometry=l;new Float32Array([2,2,2,-2,2,2,-2,-2,2,2,-2,2,2,2,2,2,-2,2,2,-2,-2,2,2,-2,2,2,2,2,2,-2,-2,2,-2,-2,2,2,-2,2,2,-2,2,-2,-2,-2,-2,-2,-2,2,-2,-2,-2,2,-2,-2,2,-2,2,-2,-2,2,2,-2,-2,-2,-2,-2,-2,2,-2,2,2,-2]);var c=new Float32Array([1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0]);c=c.map((function(){return 1}));new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1]),new Float32Array([1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0]),new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23])},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0;var o=function(t){function e(e){var r=t.call(this)||this;return r.type="",r.target=null,r.data=null,r._pd=!1,r._instanceType="Event",r.type=e,r}return n(e,t),e.prototype.stopPropagation=function(){this._pd=!0},e.prototype.destroy=function(){this.target=null,this.data=null},e.prototype.reset=function(t,e){var r=this;r.target=e,r._pd=!1,r.type=t,r.data=null},e.RESIZE="onResize",e.SCROLL_TO_HEAD="onScrollToHead",e.SCROLL_STOP="onScrollStop",e.SCROLL_START="onScrollStart",e.SCROLL_TO_END="onScrollToEnd",e.INIT_STAGE="onInitStage",e.ADDED_TO_STAGE="onAddedToStage",e.REMOVED_FROM_STAGE="onRemovedFromStage",e.ENTER_FRAME="onEnterFrame",e.END_FRAME="onEndFrame",e.CALL_FRAME="onCallFrame",e.COMPLETE="onComplete",e.PROGRESS="onProgress",e.ERROR="onError",e.ABORT="onAbort",e.START="onStart",e.TIMER="onTimer",e.TIMER_COMPLETE="onTimerComplete",e}(r(4).HashObject);e.Event=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(31),a=r(111),s=r(13),u=r(2),h=r(1),l=function(t){function e(r,i,n,o,a,s){var h=t.call(this)||this;return h._instanceType="Texture",h.noFrame=!1,i||(h.noFrame=!0,i=new u.Rectangle(0,0,1,1)),r instanceof e&&(r=r.baseTexture),h.baseTexture=r,h._frame=i,h.trim=o||null,h.valid=!1,h._uvs=null,h.orig=n||i,h._rotate=Number(a||0),r.hasLoaded||r.source&&r.source.getContext?(h.noFrame&&(i=new u.Rectangle(0,0,r.width,r.height),r.addEventListener("update",h.onBaseTextureUpdated,h)),h.frame=i):r.once("loaded",h.onBaseTextureLoaded,h),h.defaultAnchor=s?new u.Point(s.x,s.y):new u.Point(0,0),h._updateID=0,h.transform=null,h.textureCacheIds=[],h}return n(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){var e=t.target;this._updateID++,this.noFrame?(this.frame=new u.Rectangle(0,0,e.width,e.height),this.baseTexture.addEventListener("update",this.onBaseTextureUpdated,this)):this.frame=this._frame,this.dispatchEvent("update"),this.dispatchEvent("loaded")},e.prototype.onBaseTextureUpdated=function(t){var e=t.target;this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.orig.width=this._frame.width,this.orig.height=this._frame.height,this.valid=e.hasLoaded,this.dispatchEvent("update")},e.prototype.destroy=function(){this.baseTexture&&(this.baseTexture.removeEventListener("update",this.onBaseTextureUpdated,this),this.baseTexture.removeEventListener("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs||(this._uvs=new a.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,o=e+i>this.baseTexture.width,a=r+n>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",u="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,h="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+h)}this.valid=i&&n&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate!=t&&(this._rotate=t,this.valid&&this.updateUvs())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.fromUrl=function(t){var r=h.TextureCache[t];return r||(r=new e(o.default.fromUrl(t)),e.addToCache(r,t)),r},e.fromCanvas=function(t,r){return void 0===r&&(r="canvas"),new e(o.default.fromCanvas(t,r))},e.fromData=function(t){return new e(o.default.fromData(t))},e.fromImage=function(t){var r=t.src,i=h.TextureCache[r];return i||(i=new e(o.default.fromImage(t)),r&&0!==r.indexOf("data:")&&e.addToCache(i,r)),i},e.from=function(t){return"string"==typeof t?e.fromUrl(t):t.data?e.fromData(t):t.getContext?e.fromCanvas(t):e.fromImage(t)},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),h.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),h.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=h.TextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete h.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)h.TextureCache[t.textureCacheIds[i]]===t&&delete h.TextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},e}(s.EventDispatcher);function c(t){t.destroy=function(){},t.addEventListener=function(){},t.once=function(){},t.dispatchEvent=function(){}}e.default=l,l.EMPTY=new l(new o.default),c(l.EMPTY),c(l.EMPTY.baseTexture);var f={data:function(){for(var t=[],e=0;e<1024;e++)t.push(255);return new Uint8Array(t)}(),width:16,height:16,type:null,path:null};l.WHITE=new l(new o.default(f)),c(l.WHITE),c(l.WHITE.baseTexture)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix4=void 0;var i=r(3),n=function(){function t(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return t.prototype.setIdentity=function(){var t=this.elements;return t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,this},t.prototype.set=function(t,e,r,i,n,o,a,s,u,h,l,c,f,p,d,v){var y=this.elements;return y[0]=t,y[4]=e,y[8]=r,y[12]=i,y[1]=n,y[5]=o,y[9]=a,y[13]=s,y[2]=u,y[6]=h,y[10]=l,y[14]=c,y[3]=f,y[7]=p,y[11]=d,y[15]=v,this},t.prototype.copy=function(t){var e,r,i;for(r=t.elements,i=this.elements,e=0;e<16;++e)i[e]=r[e];return this},t.prototype.clone=function(){return(new t).fromArray(this.elements)},t.prototype.equals=function(t){for(var e=this.elements,r=t.elements,i=0;i<16;i++)if(e[i]!==r[i])return!1;return!0},t.prototype.fromArray=function(t,e){void 0===e&&(e=0);for(var r=0;r<16;r++)this.elements[r]=t[r+e];return this},t.prototype.toArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t},t.prototype.concat=function(t){var e,r,i,n,o,a,s,u;if(r=this.elements,i=this.elements,r===(n=t.elements))for(n=new Float32Array(16),e=0;e<16;++e)n[e]=r[e];for(e=0;e<4;e++)o=i[e],a=i[e+4],s=i[e+8],u=i[e+12],r[e]=o*n[0]+a*n[1]+s*n[2]+u*n[3],r[e+4]=o*n[4]+a*n[5]+s*n[6]+u*n[7],r[e+8]=o*n[8]+a*n[9]+s*n[10]+u*n[11],r[e+12]=o*n[12]+a*n[13]+s*n[14]+u*n[15];return this},t.prototype.multiply=function(t){return this.multiplyMatrices(this,t)},t.prototype.premultiply=function(t){return this.multiplyMatrices(t,this)},t.prototype.multiplyMatrices=function(t,e){var r=t.elements,i=e.elements,n=this.elements,o=r[0],a=r[4],s=r[8],u=r[12],h=r[1],l=r[5],c=r[9],f=r[13],p=r[2],d=r[6],v=r[10],y=r[14],_=r[3],m=r[7],g=r[11],x=r[15],b=i[0],M=i[4],T=i[8],w=i[12],E=i[1],O=i[5],S=i[9],P=i[13],A=i[2],C=i[6],D=i[10],R=i[14],I=i[3],j=i[7],L=i[11],N=i[15];return n[0]=o*b+a*E+s*A+u*I,n[4]=o*M+a*O+s*C+u*j,n[8]=o*T+a*S+s*D+u*L,n[12]=o*w+a*P+s*R+u*N,n[1]=h*b+l*E+c*A+f*I,n[5]=h*M+l*O+c*C+f*j,n[9]=h*T+l*S+c*D+f*L,n[13]=h*w+l*P+c*R+f*N,n[2]=p*b+d*E+v*A+y*I,n[6]=p*M+d*O+v*C+y*j,n[10]=p*T+d*S+v*D+y*L,n[14]=p*w+d*P+v*R+y*N,n[3]=_*b+m*E+g*A+x*I,n[7]=_*M+m*O+g*C+x*j,n[11]=_*T+m*S+g*D+x*L,n[15]=_*w+m*P+g*R+x*N,this},t.prototype.multiplyVector3=function(t){var e=this.elements;return(new i.Vector3).set(t.x*e[0]+t.y*e[4]+t.z*e[8]+e[12],t.x*e[1]+t.y*e[5]+t.z*e[9]+e[13],t.x*e[2]+t.y*e[6]+t.z*e[10]+e[14])},t.prototype.transpose=function(){var t,e;return e=(t=this.elements)[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},t.prototype.setInverseOf=function(t){var e,r,i,n,o;if(r=t.elements,i=this.elements,(n=new Float32Array(16))[0]=r[5]*r[10]*r[15]-r[5]*r[11]*r[14]-r[9]*r[6]*r[15]+r[9]*r[7]*r[14]+r[13]*r[6]*r[11]-r[13]*r[7]*r[10],n[4]=-r[4]*r[10]*r[15]+r[4]*r[11]*r[14]+r[8]*r[6]*r[15]-r[8]*r[7]*r[14]-r[12]*r[6]*r[11]+r[12]*r[7]*r[10],n[8]=r[4]*r[9]*r[15]-r[4]*r[11]*r[13]-r[8]*r[5]*r[15]+r[8]*r[7]*r[13]+r[12]*r[5]*r[11]-r[12]*r[7]*r[9],n[12]=-r[4]*r[9]*r[14]+r[4]*r[10]*r[13]+r[8]*r[5]*r[14]-r[8]*r[6]*r[13]-r[12]*r[5]*r[10]+r[12]*r[6]*r[9],n[1]=-r[1]*r[10]*r[15]+r[1]*r[11]*r[14]+r[9]*r[2]*r[15]-r[9]*r[3]*r[14]-r[13]*r[2]*r[11]+r[13]*r[3]*r[10],n[5]=r[0]*r[10]*r[15]-r[0]*r[11]*r[14]-r[8]*r[2]*r[15]+r[8]*r[3]*r[14]+r[12]*r[2]*r[11]-r[12]*r[3]*r[10],n[9]=-r[0]*r[9]*r[15]+r[0]*r[11]*r[13]+r[8]*r[1]*r[15]-r[8]*r[3]*r[13]-r[12]*r[1]*r[11]+r[12]*r[3]*r[9],n[13]=r[0]*r[9]*r[14]-r[0]*r[10]*r[13]-r[8]*r[1]*r[14]+r[8]*r[2]*r[13]+r[12]*r[1]*r[10]-r[12]*r[2]*r[9],n[2]=r[1]*r[6]*r[15]-r[1]*r[7]*r[14]-r[5]*r[2]*r[15]+r[5]*r[3]*r[14]+r[13]*r[2]*r[7]-r[13]*r[3]*r[6],n[6]=-r[0]*r[6]*r[15]+r[0]*r[7]*r[14]+r[4]*r[2]*r[15]-r[4]*r[3]*r[14]-r[12]*r[2]*r[7]+r[12]*r[3]*r[6],n[10]=r[0]*r[5]*r[15]-r[0]*r[7]*r[13]-r[4]*r[1]*r[15]+r[4]*r[3]*r[13]+r[12]*r[1]*r[7]-r[12]*r[3]*r[5],n[14]=-r[0]*r[5]*r[14]+r[0]*r[6]*r[13]+r[4]*r[1]*r[14]-r[4]*r[2]*r[13]-r[12]*r[1]*r[6]+r[12]*r[2]*r[5],n[3]=-r[1]*r[6]*r[11]+r[1]*r[7]*r[10]+r[5]*r[2]*r[11]-r[5]*r[3]*r[10]-r[9]*r[2]*r[7]+r[9]*r[3]*r[6],n[7]=r[0]*r[6]*r[11]-r[0]*r[7]*r[10]-r[4]*r[2]*r[11]+r[4]*r[3]*r[10]+r[8]*r[2]*r[7]-r[8]*r[3]*r[6],n[11]=-r[0]*r[5]*r[11]+r[0]*r[7]*r[9]+r[4]*r[1]*r[11]-r[4]*r[3]*r[9]-r[8]*r[1]*r[7]+r[8]*r[3]*r[5],n[15]=r[0]*r[5]*r[10]-r[0]*r[6]*r[9]-r[4]*r[1]*r[10]+r[4]*r[2]*r[9]+r[8]*r[1]*r[6]-r[8]*r[2]*r[5],0===(o=r[0]*n[0]+r[1]*n[4]+r[2]*n[8]+r[3]*n[12]))return this;for(o=1/o,e=0;e<16;e++)i[e]=n[e]*o;return this},t.prototype.invert=function(){return this.setInverseOf(this)},t.prototype.setOrtho=function(t,e,r,i,n,o){var a,s,u,h;if(t===e||i===r||n===o)throw"null frustum";return s=1/(e-t),u=1/(r-i),h=1/(o-n),(a=this.elements)[0]=2*s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-2*h,a[11]=0,a[12]=-(e+t)*s,a[13]=-(r+i)*u,a[14]=-(o+n)*h,a[15]=1,this},t.prototype.ortho=function(e,r,i,n,o,a){return this.concat((new t).setOrtho(e,r,i,n,o,a))},t.prototype.setFrustum=function(t,e,r,i,n,o){var a,s,u,h;if(t===e||i===r||n===o)throw"null frustum";if(n<=0)throw"near <= 0";if(o<=0)throw"far <= 0";return s=1/(e-t),u=1/(i-r),h=1/(o-n),(a=this.elements)[0]=2*n*s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*n*u,a[6]=0,a[7]=0,a[8]=(e+t)*s,a[9]=(i+r)*u,a[10]=-(o+n)*h,a[11]=-1,a[12]=0,a[13]=0,a[14]=-2*n*o*h,a[15]=0,this},t.prototype.frustum=function(e,r,i,n,o,a){return this.concat((new t).setFrustum(e,r,i,n,o,a))},t.prototype.setPerspective=function(t,e,r,i){var n,o,a,s;if(r===i||0===e)throw"null frustum";if(r<=0)throw"near <= 0";if(i<=0)throw"far <= 0";if(t=Math.PI*t/180/2,0===(a=Math.sin(t)))throw"null frustum";return o=1/(i-r),s=Math.cos(t)/a,(n=this.elements)[0]=s/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=-(i+r)*o,n[11]=-1,n[12]=0,n[13]=0,n[14]=-2*r*i*o,n[15]=0,this},t.prototype.makePerspective=function(t,e,r,i,n,o){var a=this.elements,s=2*n/(e-t),u=2*n/(r-i),h=(e+t)/(e-t),l=(r+i)/(r-i),c=-(o+n)/(o-n),f=-2*o*n/(o-n);return a[0]=s,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},t.prototype.perspective=function(e,r,i,n){return this.concat((new t).setPerspective(e,r,i,n))},t.prototype.setScale=function(t,e,r){var i=this.elements;return i[0]=t,i[4]=0,i[8]=0,i[12]=0,i[1]=0,i[5]=e,i[9]=0,i[13]=0,i[2]=0,i[6]=0,i[10]=r,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},t.prototype.scale=function(t,e,r){var i=this.elements;return i[0]*=t,i[4]*=e,i[8]*=r,i[1]*=t,i[5]*=e,i[9]*=r,i[2]*=t,i[6]*=e,i[10]*=r,i[3]*=t,i[7]*=e,i[11]*=r,this},t.prototype.getMaxScaleOnAxis=function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,i))},t.prototype.setTranslate=function(t,e,r){var i=this.elements;return i[0]=1,i[4]=0,i[8]=0,i[12]=t,i[1]=0,i[5]=1,i[9]=0,i[13]=e,i[2]=0,i[6]=0,i[10]=1,i[14]=r,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},t.prototype.translate=function(t,e,r){var i=this.elements;return i[12]+=i[0]*t+i[4]*e+i[8]*r,i[13]+=i[1]*t+i[5]*e+i[9]*r,i[14]+=i[2]*t+i[6]*e+i[10]*r,i[15]+=i[3]*t+i[7]*e+i[11]*r,this},t.prototype.setRotate=function(t,e,r,i){var n,o,a,s,u,h,l,c,f,p,d,v;return t=Math.PI*t/180,n=this.elements,o=Math.sin(t),a=Math.cos(t),0!==e&&0===r&&0===i?(e<0&&(o=-o),n[0]=1,n[4]=0,n[8]=0,n[12]=0,n[1]=0,n[5]=a,n[9]=-o,n[13]=0,n[2]=0,n[6]=o,n[10]=a,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):0===e&&0!==r&&0===i?(r<0&&(o=-o),n[0]=a,n[4]=0,n[8]=o,n[12]=0,n[1]=0,n[5]=1,n[9]=0,n[13]=0,n[2]=-o,n[6]=0,n[10]=a,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):0===e&&0===r&&0!==i?(i<0&&(o=-o),n[0]=a,n[4]=-o,n[8]=0,n[12]=0,n[1]=o,n[5]=a,n[9]=0,n[13]=0,n[2]=0,n[6]=0,n[10]=1,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):(1!==(s=Math.sqrt(e*e+r*r+i*i))&&(e*=u=1/s,r*=u,i*=u),h=1-a,l=e*r,c=r*i,f=i*e,p=e*o,d=r*o,v=i*o,n[0]=e*e*h+a,n[1]=l*h+v,n[2]=f*h-d,n[3]=0,n[4]=l*h-v,n[5]=r*r*h+a,n[6]=c*h+p,n[7]=0,n[8]=f*h+d,n[9]=c*h-p,n[10]=i*i*h+a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1),this},t.prototype.rotate=function(e,r,i,n){return this.concat((new t).setRotate(e,r,i,n))},t.prototype.setLookAt=function(t,e,r,i,n,o,a,s,u){var h,l,c,f,p,d,v,y,_,m,g,x;return l=i-t,c=n-e,f=o-r,d=(c*=p=1/Math.sqrt(l*l+c*c+f*f))*u-(f*=p)*s,v=f*a-(l*=p)*u,y=l*s-c*a,m=(v*=_=1/Math.sqrt(d*d+v*v+y*y))*f-(y*=_)*c,g=y*l-(d*=_)*f,x=d*c-v*l,(h=this.elements)[0]=d,h[1]=m,h[2]=-l,h[3]=0,h[4]=v,h[5]=g,h[6]=-c,h[7]=0,h[8]=y,h[9]=x,h[10]=-f,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this.translate(-t,-e,-r)},t.prototype.lookAt=function(t,e,r){var n=new i.Vector3,o=new i.Vector3,a=new i.Vector3,s=this.elements;return a.subVectors(t,e),0===a.lengthSq()&&(a.z=1),a.normalize(),n.crossVectors(r,a),0===n.lengthSq()&&(1===Math.abs(r.z)?a.x+=1e-4:a.z+=1e-4,a.normalize(),n.crossVectors(r,a)),n.normalize(),o.crossVectors(a,n),s[0]=n.x,s[4]=o.x,s[8]=a.x,s[1]=n.y,s[5]=o.y,s[9]=a.y,s[2]=n.z,s[6]=o.z,s[10]=a.z,this},t.prototype.dropShadow=function(e,r){var i=new t,n=i.elements,o=e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3];return n[0]=o-r[0]*e[0],n[1]=-r[1]*e[0],n[2]=-r[2]*e[0],n[3]=-r[3]*e[0],n[4]=-r[0]*e[1],n[5]=o-r[1]*e[1],n[6]=-r[2]*e[1],n[7]=-r[3]*e[1],n[8]=-r[0]*e[2],n[9]=-r[1]*e[2],n[10]=o-r[2]*e[2],n[11]=-r[3]*e[2],n[12]=-r[0]*e[3],n[13]=-r[1]*e[3],n[14]=-r[2]*e[3],n[15]=o-r[3]*e[3],this.concat(i)},t.prototype.dropShadowDirectionally=function(t,e,r,i,n,o,a,s,u){var h=i*t+n*e+o*r;return this.dropShadow([t,e,r,-h],[a,s,u,0])},t.prototype.makeRotationFromQuaternion=function(t){var e=new i.Vector3(0,0,0),r=new i.Vector3(1,1,1);return this.compose(e,t,r)},t.prototype.compose=function(t,e,r){var i=this.elements,n=e.x,o=e.y,a=e.z,s=e.w,u=n+n,h=o+o,l=a+a,c=n*u,f=n*h,p=n*l,d=o*h,v=o*l,y=a*l,_=s*u,m=s*h,g=s*l,x=r.x,b=r.y,M=r.z;return i[0]=(1-(d+y))*x,i[1]=(f+g)*x,i[2]=(p-m)*x,i[3]=0,i[4]=(f-g)*b,i[5]=(1-(c+y))*b,i[6]=(v+_)*b,i[7]=0,i[8]=(p+m)*M,i[9]=(v-_)*M,i[10]=(1-(c+d))*M,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},t.prototype.decompose=function(e,r,n){var o=new i.Vector3,a=new t,s=this.elements,u=o.set(s[0],s[1],s[2]).length(),h=o.set(s[4],s[5],s[6]).length(),l=o.set(s[8],s[9],s[10]).length();this.determinant()<0&&(u=-u),e.x=s[12],e.y=s[13],e.z=s[14],a.copy(this);var c=1/u,f=1/h,p=1/l;return a.elements[0]*=c,a.elements[1]*=c,a.elements[2]*=c,a.elements[4]*=f,a.elements[5]*=f,a.elements[6]*=f,a.elements[8]*=p,a.elements[9]*=p,a.elements[10]*=p,r.setFromRotationMatrix(a),n.x=u,n.y=h,n.z=l,this},t.prototype.determinant=function(){var t=this.elements,e=t[0],r=t[4],i=t[8],n=t[12],o=t[1],a=t[5],s=t[9],u=t[13],h=t[2],l=t[6],c=t[10],f=t[14];return t[3]*(+n*s*l-i*u*l-n*a*c+r*u*c+i*a*f-r*s*f)+t[7]*(+e*s*f-e*u*c+n*o*c-i*o*f+i*u*h-n*s*h)+t[11]*(+e*u*l-e*a*f-n*o*l+r*o*f+n*a*h-r*u*h)+t[15]*(-i*a*h-e*s*l+e*a*c+i*o*l-r*o*c+r*s*h)},t.prototype.extractRotation=function(t){var e=new i.Vector3,r=this.elements,n=t.elements,o=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),s=1/e.setFromMatrixColumn(t,2).length();return r[0]=n[0]*o,r[1]=n[1]*o,r[2]=n[2]*o,r[3]=0,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[7]=0,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},t}();e.Matrix4=n},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(12);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return o.default}}),n(r(19),e),n(r(54),e);var a=r(20);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return a.default}}),n(r(112),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(19),a=r(52),s=r(8),u=function(t){function e(){var e=t.call(this)||this;return e.mouseChildren=!0,e._instanceType="Container",e.children=[],e}return n(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(t){return this.addChildAt(t,this.children.length),t},e.prototype.addChildren=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.forEach((function(e){t.addChild(e)})),e},e.prototype.addChildAt=function(t,e){if(t){var r,i=this,n=i==t.parent;if(t.parent)if(n){r=i.children.length;for(var o=0;o<r;o++)if(i.children[o]==t){i.children.splice(o,1);break}}else t.parent.removeChild(t);return t.parent=i,t.transform._parentID=-1,this._boundsID++,e>=(r=i.children.length)?(i.children[i.children.length]=t,e=r):0==e||e<0?(i.children.unshift(t),e=0):i.children.splice(e,0,t),i.stage&&!n&&t._onDispatchBubbledEvent(s.Event.ADDED_TO_STAGE),this.onChildrenChange(e),t}},e.prototype.swapChildren=function(t,e){if(t!==e){var r=this,i=-1,n=-1,o=r.children.length;if((i="number"==typeof t?t:r.getChildIndex(t))==(n="number"==typeof e?e:r.getChildIndex(e))||i<0||i>=o||n<0||n>=o)return!1;var a=r.children[i];return r.children[i]=r.children[n],r.children[n]=a,this.onChildrenChange(i<n?i:n),!0}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);return-1===e?null:e},e.prototype.setChildIndex=function(t,e){this.addChildAt(t,e)},e.prototype.getChildAt=function(t){return t<0||t>=this.children.length?null:this.children[t]},e.prototype.getChildByName=function(t,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!1),!t)return null;var n;n="string"==typeof t?new RegExp("^"+t+"$"):t;var o=[];e._getElementsByName(n,this,r,i,o);var a=o.length;return 0==a?null:1==a?o[0]:o},e.prototype.removeChild=function(t){var e=this.children.indexOf(t);return-1===e?null:(this.removeChildAt(e),t)},e.prototype.removeChildAt=function(t){var e,r=this,i=r.children.length-1;if(!(i<0))return(e=t==i?r.children.pop():0==t?r.children.shift():r.children.splice(t,1)[0])._onDispatchBubbledEvent(s.Event.REMOVED_FROM_STAGE),e.parent=null,e.transform._parentID=-1,this._boundsID++,this.onChildrenChange(t),e},e.prototype.removeChildren=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?(e.forEach((function(e){t.removeChild(e)})),e):this.spliceChildren(0,this.children.length)},e.prototype.removeAllChildren=function(){return this.removeChildren()},e.prototype.removeChildrenAt=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var r=t,i="number"==typeof e?e:this.children.length,n=i-r;if(n>0&&n<=i)return this.spliceChildren(r,n);if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.spliceChildren=function(t,e){var r=this.children.splice(t,e);if(!r.length)return[];for(var i=0;i<r.length;++i)r[i].parent=null,r[i].transform&&(r[i].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(i=0;i<r.length;++i)r[i]._onDispatchBubbledEvent(s.Event.REMOVED_FROM_STAGE);return r},e.prototype.updateTransform=function(){t.prototype.updateTransform.call(this);for(var e=0,r=this.children.length;e<r;++e){var i=this.children[e];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){if(this._lastBoundsID!=this._boundsID){this._lastBoundsID=this._boundsID,this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e.mask?(e.mask.calculateBounds(),e._bounds.x<e.mask._bounds.x&&(e._bounds.x=e.mask._bounds.x),e._bounds.y<e.mask._bounds.y&&(e._bounds.y=e.mask._bounds.y),e._bounds.width>e.mask._bounds.width&&(e._bounds.width=e.mask._bounds.width),e._bounds.height>e.mask._bounds.height&&(e._bounds.height=e.mask._bounds.height),a.Rectangle.createFromRects(this._bounds,e._bounds)):e.filterArea||a.Rectangle.createFromRects(this._bounds,e._bounds))}}},e.prototype._calculateBounds=function(){},e.prototype.hitTestPoint=function(t,e){if(void 0===e&&(e=!1),!this.visible)return null;if(e&&!this.mouseChildren)return null;for(var r,i,n=this.children,o=n.length-1;o>=0;o--)if(!(r=n[o]).isUsedToMask&&(!r.mask||r.mask.hitTestPoint(t,e))&&(i=r.hitTestPoint(t,e)))return i;return null},e.prototype.renderWebGL=function(t){if(this.visible&&!(this._worldAlpha<=0)&&this.renderable)if(this.mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.batchManager.flush();var e=this.filters;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}var i=this.mask;i&&t.maskManager.pushMask(this,this.mask),this._renderWebGL(t);r=0;for(var n=this.children.length;r<n;r++)this.children[r].renderWebGL(t);t.batchManager.flush(),i&&t.maskManager.popMask(this,this.mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this._worldAlpha<=0)&&this.renderable){this.mask&&t.maskManager.pushMask(this.mask),this._renderCanvas(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderCanvas(t);this.mask&&t.maskManager.popMask(t)}},e.prototype._renderCanvas=function(t){},e.prototype.update=function(){if(this.visible){t.prototype.update.call(this);for(var e=this.children.length-1;e>=0;e--){var r=this.children[e];r.visible&&r.update()}}},e.prototype._onDispatchBubbledEvent=function(e){var r=this,i=r.children.length;if(e!=s.Event.REMOVED_FROM_STAGE||r.stage){t.prototype._onDispatchBubbledEvent.call(this,e);for(var n=0;n<i;n++)r.children[n]._onDispatchBubbledEvent(e)}},e.prototype.destroy=function(){for(var e=this.children.length-1;e>=0;e--)this.children[e].destroy();t.prototype.destroy.call(this),this.mouseChildren=!1},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e._getElementsByName=function(t,r,i,n,o){var a=r.children.length;if(a>0)for(var s,u=void 0,h=0;h<a;h++){if((s=(u=r.children[h]).name)&&""!=s&&t.test(s)&&(o[o.length]=u,i))return;n&&null!=u.children&&e._getElementsByName(t,u,i,n,o)}},e}(o.DisplayObject);e.default=u,u.prototype.containerUpdateTransform=u.prototype.updateTransform},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.EventDispatcher=void 0;var o=r(4),a=r(8),s=function(t){function e(){var e=t.call(this)||this;return e.eventTypes={},e.eventTypes1={},e._instanceType="EventDispatcher",e}return n(e,t),e.getMouseEventCount=function(t){void 0===t&&(t="");var r=0;if(""==t)for(var i in e._MECO)0==i.indexOf("onMouse")&&(r+=e._MECO[i]);else e._MECO[t]&&(r=e._MECO[t]);return r},e.prototype.addEventListener=function(t,e,r,i){if(void 0===i&&(i=!0),!t)throw new Error("添加侦听的type值为undefined");if(!e)throw new Error("侦听回调函数不能为null");var n=this,o=n.eventTypes;i||(o=n.eventTypes1),o[t]||(o[t]=[]);for(var a=0,s=o[t].length;a<s;a++){var h=o[t][a];if(h.fn===e&&h.context===r)return console.log("已添加过该事件"),n}return o[t].unshift(new u(e,r||n)),0==t.indexOf("onMouse")&&n._changeMouseCount(t,!0),n},e.prototype.once=function(t,e,r,i){if(void 0===i&&(i=!0),!t)throw new Error("添加侦听的type值为undefined");if(!e)throw new Error("侦听回调函数不能为null");var n=this,o=n.eventTypes;return i||(o=n.eventTypes1),o[t]||(o[t]=[]),o[t].unshift(new u(e,r||n,!0)),0==t.indexOf("onMouse")&&n._changeMouseCount(t,!0),n},e.prototype._changeMouseCount=function(t,r){var i=r?1:-1;e._MECO[t]||(e._MECO[t]=0),e._MECO[t]+=i,e._MECO[t]<0&&(e._MECO[t]=0),e._totalMEC+=i},e.prototype.dispatchEvent=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=!0);var i=this;"string"==typeof t&&(i._defaultEvent?i._defaultEvent.reset(t,i):i._defaultEvent=new a.Event(t),t=i._defaultEvent);var n=i.eventTypes[t.type];if(r||(n=i.eventTypes1[t.type]),n){var o=n.length;null==t.target&&(t.target=i),null!=e&&(t.data=e);for(var s=o-1;s>=0;s--)if(!t._pd)if(n[s]){var u=n[s],h=t.type;u.fn.call(u.context,t),u.once&&i.removeEventListener(h,u.fn,u.context,r)}else n.splice(s,1);return!0}return!1},e.prototype.hasEventListener=function(t,e){void 0===e&&(e=!0);var r=this;if(e){if(r.eventTypes[t]&&r.eventTypes[t].length>0)return!0}else if(r.eventTypes1[t]&&r.eventTypes1[t].length>0)return!0;return!1},e.prototype.removeAllEventListenerByType=function(t,e){void 0===e&&(e=!0);var r=this;if(e){if(r.eventTypes[t]&&r.eventTypes[t].length>0){if(0==t.indexOf("onMouse"))for(var i=0;i<r.eventTypes[t].length;i++)r._changeMouseCount(t,!1);r.eventTypes[t]=[]}}else if(r.eventTypes1[t]&&r.eventTypes1[t].length>0){if(0==t.indexOf("onMouse"))for(i=0;i<r.eventTypes1[t].length;i++)r._changeMouseCount(t,!1);r.eventTypes1[t]=[]}return r},e.prototype.removeEventListener=function(t,e,r,i){void 0===i&&(i=!0);var n=this,o=n.eventTypes[t];if(i||(o=n.eventTypes1[t]),o)for(var a=r||n,s=o.length-1;s>=0;s--)o[s].fn===e&&o[s].context===a&&(o.splice(s,1),0==t.indexOf("onMouse")&&n._changeMouseCount(t,!1));return n},e.prototype.removeAllEventListener=function(){var t=this;for(var e in t.eventTypes)if(0==e.indexOf("onMouse"))for(var r=0;r<t.eventTypes[e].length;r++)t._changeMouseCount(e,!1);for(var e in t.eventTypes1)if(0==e.indexOf("onMouse"))for(r=0;r<t.eventTypes1[e].length;r++)t._changeMouseCount(e,!1);t.eventTypes1={},t.eventTypes={}},e.prototype.destroy=function(){var t=this;t.removeAllEventListener(),t.eventTypes=null,t.eventTypes1=null},e._MECO={},e._totalMEC=0,e}(o.HashObject);e.EventDispatcher=s;var u=function(t,e,r){void 0===r&&(r=!1),this.fn=t,this.context=e,this.once=r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultFilterMatrix=e.defaultVert=void 0,e.defaultVert="precision highp float;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat3 projectionMatrix;varying vec2 vTextureCoord;void main(void){gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);vTextureCoord = aTextureCoord;}",e.defaultFilterMatrix="precision highp float;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat3 projectionMatrix;uniform mat3 filterMatrix;varying vec2 vTextureCoord;varying vec2 vFilterCoord;void main(void){gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;vTextureCoord = aTextureCoord;}"},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(9);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return o.default}});var a=r(31);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return a.default}}),n(r(165),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Object3D=void 0;var o=r(10),a=r(3),s=r(34),u=r(86),h=r(25),l=r(0),c=new a.Vector3,f=function(t){function e(){var r=t.call(this)||this;r.name=null,r.visible=!0,r.mouseEnable=!0,r.mouseChildren=!0,r.castShadow=!1,r.receiveShadow=!1,r.children=[],r.parent=null,r._worldMatrix=new o.Matrix4,r._localMatrix=new o.Matrix4,r.up=e.DefaultUp.clone(),r.position=new a.Vector3,r.scale=new a.Vector3(1,1,1),r._instanceType="Object3D";var i=new u.Euler,n=new s.Quaternion;return i.onChange((function(){n.setFromEuler(i,!1)})),n.onChange((function(){i.setFromQuaternion(n,void 0,!1)})),r.rotation=i,r.quaternion=n,r}return n(e,t),e.prototype.addChild=function(t){return this.addChildAt(t,this.children.length),t},e.prototype.addChildAt=function(t,e){if(t){var r,i=this,n=i==t.parent;if(t.parent)if(n){r=i.children.length;for(var o=0;o<r;o++)if(i.children[o]==t){i.children.splice(o,1);break}}else t.parent.removeChild(t);return t.parent=i,e>=(r=i.children.length)?(i.children[i.children.length]=t,e=r):0==e||e<0?(i.children.unshift(t),e=0):i.children.splice(e,0,t),i.scene&&!n&&t._onDispatchBubbledEvent("onAddedToScene"),t}},e.prototype.addChildren=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.forEach((function(e){t.addChild(e)})),e},e.prototype.removeChild=function(t){var e=this.children.indexOf(t);return-1!==e&&(t.parent=null,t._onDispatchBubbledEvent("onRemovedFromScene"),this.children.splice(e,1)),t},e.prototype._onDispatchBubbledEvent=function(t){var e=this;if("onRemovedFromScene"!=t||e.scene){"onRemovedFromScene"==t?(e.dispatchEvent(t),e.scene=null):"onAddedToScene"==t&&(e.scene=e.parent.scene,e.dispatchEvent(t));for(var r=e.children.length,i=0;i<r;i++)e.children[i]._onDispatchBubbledEvent(t)}},e.prototype.clone=function(t){return void 0===t&&(t=!0),(new e).copy(this,t)},e.prototype.copy=function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.visible=t.visible,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this._localMatrix.copy(t._localMatrix),this._worldMatrix.copy(t._worldMatrix),this.visible=t.visible,!0===e)for(var r=0;r<t.children.length;r++){var i=t.children[r];this.addChild(i.clone())}return this},e.prototype.lookAt=function(t,e,r){var i=new s.Quaternion,n=new o.Matrix4,u=new a.Vector3,h=new a.Vector3;u.set(t,e,r);var l=this.parent;this.updateWorldMatrix(!0,!1),h.setFromMatrixPosition(this._worldMatrix),"Camera"==this._instanceType||"PerspectiveCamera"==this._instanceType||"OrthographicCamera"==this._instanceType?n.lookAt(h,u,this.up):n.lookAt(u,h,this.up),this.quaternion.setFromRotationMatrix(n),l&&(n.extractRotation(l._worldMatrix),i.setFromRotationMatrix(n),this.quaternion.premultiply(i.inverse()))},e.prototype.applyMatrix=function(t){this._localMatrix.multiplyMatrices(t,this._localMatrix),this._localMatrix.decompose(this.position,this.quaternion,this.scale)},e.prototype.applyQuaternion=function(t){return this.quaternion.premultiply(t),this},e.prototype.localToGlobal=function(t){return t.applyMatrix4(this._worldMatrix)},e.prototype.globalToLocal=function(t){if(t instanceof a.Vector3){var e=new o.Matrix4;return t.applyMatrix4(e.setInverseOf(this._worldMatrix))}return t},Object.defineProperty(e.prototype,"stagePos",{get:function(){if(!this.scene)return null;var t=this.scene;this.localToGlobal(c.set(0,0,0)),c.project(t.camera);var e=t.viewWidth/2,r=t.viewHeight/2;return{x:Math.round(c.x*e+e)+t.viewX,y:Math.round(-c.y*r+r)+t.viewY}},enumerable:!1,configurable:!0}),e.prototype.updateLocalMatrix=function(){this._localMatrix.compose(this.position,this.quaternion,this.scale)},e.prototype.updateWorldMatrix=function(t,r){void 0===t&&(t=!1),void 0===r&&(r=!0);var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix&&i.updateWorldMatrix(!0,!1),this.updateLocalMatrix(),null!==this.parent&&this.parent instanceof e?this._worldMatrix.multiplyMatrices(this.parent._worldMatrix,this._localMatrix):this._worldMatrix.copy(this._localMatrix),!0===r)for(var n=this.children,o=0,a=n.length;o<a;o++)n[o].updateWorldMatrix(!1,!0)},e.prototype.update=function(){if(this.visible){this.hasEventListener(h.Event.ENTER_FRAME)&&this.dispatchEvent(h.Event.ENTER_FRAME);for(var t=this.children.length-1;t>=0;t--){var e=this.children[t];e.visible&&e.update()}}},e.prototype.getChildByName=function(t,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!1),!t)return null;var n;n="string"==typeof t?new RegExp("^"+t+"$"):t;var o=[];e._getElementsByName(n,this,r,i,o);var a=o.length;return 0==a?null:1==a?o[0]:o},e._getElementsByName=function(t,r,i,n,o){var a=r.children.length;if(a>0)for(var s,u=void 0,h=0;h<a;h++){if((s=(u=r.children[h]).name)&&""!=s&&t.test(s)&&(o[o.length]=u,i))return;n&&null!=u.children&&e._getElementsByName(t,u,i,n,o)}},e.prototype.render=function(t){this._render(t);for(var e=0;e<this.children.length;e++){var r=this.children[e];r.visible&&r.render(t)}},e.prototype._render=function(t){},e.prototype.raycast=function(t,e){},e.prototype.destroy=function(){for(var t=this.children.length-1;t>=0;t--)this.children[t].destroy();this.removeAllEventListener(),this.parent&&this.parent.removeChild(this)},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this.position.z},set:function(t){this.position.z=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this.scale.x},set:function(t){this.scale.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this.scale.y},set:function(t){this.scale.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleZ",{get:function(){return this.scale.z},set:function(t){this.scale.z=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this.rotation.x*l.RAD_TO_DEG},set:function(t){this.rotation.x=t*l.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{get:function(){return this.rotation.y*l.RAD_TO_DEG},set:function(t){this.rotation.y=t*l.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this.rotation.z*l.RAD_TO_DEG},set:function(t){this.rotation.z=t*l.DEG_TO_RAD},enumerable:!1,configurable:!0}),e.DefaultUp=new a.Vector3(0,1,0),e}(h.EventDispatcher);e.Object3D=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.newArray=e.setArraySize=e.arrayCopy=e.binarySearch=e.MixDirection=e.MixBlend=e.readCurve=e.Curve=void 0;var i=r(1),n=function(){function t(e){this.curves=new Float32Array((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var r=e*t.BEZIER_SIZE;if(r==this.curves.length)return t.LINEAR;var i=this.curves[r];return i==t.LINEAR?t.LINEAR:i==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,r,i,n,o){var a=.03*(2*-r+n),s=.03*(2*-i+o),u=.006*(3*(r-n)+1),h=.006*(3*(i-o)+1),l=2*a+u,c=2*s+h,f=.3*r+a+.16666667*u,p=.3*i+s+.16666667*h,d=e*t.BEZIER_SIZE,v=this.curves;v[d++]=t.BEZIER;for(var y=f,_=p,m=d+t.BEZIER_SIZE-1;d<m;d+=2)v[d]=y,v[d+1]=_,f+=l,p+=c,l+=u,c+=h,y+=f,_+=p},t.prototype.getCurvePercent=function(e,r){r=i.clamp(r,0,1);var n=this.curves,o=e*t.BEZIER_SIZE,a=n[o];if(a==t.LINEAR)return r;if(a==t.STEPPED)return 0;for(var s=0,u=++o,h=o+t.BEZIER_SIZE-1;o<h;o+=2)if((s=n[o])>=r){var l=void 0,c=void 0;return o==u?(l=0,c=0):(l=n[o-2],c=n[o-1]),c+(n[o+1]-c)*(r-l)/(s-l)}var f=n[o-1];return f+(1-f)*(r-s)/(1-s)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=19,t}();e.Curve=n,e.readCurve=function(t,e,r){if(t.hasOwnProperty("curve"))if("stepped"===t.curve)e.setStepped(r);else if("[object Array]"===Object.prototype.toString.call(t.curve)){var i=t.curve;e.setCurve(r,i[0],i[1],i[2],i[3])}else e.setCurve(r,t.curve,t.c2||0,t.c3||1,t.c4||1)},function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(e.MixBlend||(e.MixBlend={})),function(t){t[t.in=0]="in",t[t.out=1]="out"}(e.MixDirection||(e.MixDirection={})),e.binarySearch=function(t,e,r){void 0===r&&(r=1);var i=0,n=t.length/r-2;if(0==n)return r;for(var o=n>>>1;;){if(t[(o+1)*r]<=e?i=o+1:n=o,i==n)return(i+1)*r;o=i+n>>>1}},e.arrayCopy=function(t,e,r,i,n){for(var o=e,a=i;o<e+n;o++,a++)r[a]=t[o]},e.setArraySize=function(t,e,r){void 0===r&&(r=0);var i=t.length;if(i==e)return t;if(t.length=e,i<e)for(var n=i;n<e;n++)t[n]=r;return t},e.newArray=function(t,e){for(var r=new Array(t),i=0;i<t;i++)r[i]=e;return r}},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Mesh3D=void 0;var o=r(16),a=r(26),s=r(10),u=r(87),h=r(27),l=r(3),c=new h.Sphere,f=new s.Matrix4,p=new u.Ray,d=new l.Vector3,v=function(t){function e(e,r){var i=t.call(this)||this;return i.geometry=e,i.material=r,i._instanceType="Mesh3D",i.updateMorphTargets(),i}return n(e,t),Object.defineProperty(e.prototype,"morphTargetInfluences",{get:function(){return this._morphTargetInfluences},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.visible&&(t.batchManager.setObjectRenderer(t.plugins.d3),t.plugins.d3.render(this))},e.prototype.updateMorphTargets=function(){var t=this.geometry._morphPositions;if(t){this._morphTargetInfluences=[];for(var e=0;e<t.length;e++)this._morphTargetInfluences.push(0)}},e.prototype.raycast=function(t,e){if(this.visible&&this.geometry&&this.material&&!this.material.wireframe){var r=this.geometry,i=this._worldMatrix;if(r.boundingSphere||r.computeBoundingSphere(),c.copy(r.boundingSphere),c.applyMatrix4(i),!1!==t.ray.intersectsSphere(c)&&(f.setInverseOf(i),p.copy(t.ray).applyMatrix4(f),null===r.boundingBox||!1!==p.intersectsBox(r.boundingBox)))if(r.doHitFace){var n,o=new l.Vector3,a=new l.Vector3,s=new l.Vector3,u=r._indices,h=r._vertices;if(u)for(var v=0;v<u.length;v+=3){var y=u[v],m=u[v+1],g=u[v+2];if(o.set(h[3*y],h[3*y+1],h[3*y+2]),a.set(h[3*m],h[3*m+1],h[3*m+2]),s.set(h[3*g],h[3*g+1],h[3*g+2]),n=_(this,t,p,o,a,s,d)){e.push(n);break}}else if(h)for(v=0;v<h.length;v+=9)if(o.set(h[v],h[v+1],h[v+2]),a.set(h[v+3],h[v+4],h[v+5]),s.set(h[v+6],h[v+7],h[v+8]),n=_(this,t,p,o,a,s,d)){e.push(n);break}}else e.push({distance:t.ray.origin.distanceTo(c.center)-c.radius,object:this})}},e.prototype.copy=function(e,r){return void 0===r&&(r=!0),t.prototype.copy.call(this,e,r),e.morphTargetInfluences&&(this._morphTargetInfluences=e.morphTargetInfluences.slice()),this},e.prototype.clone=function(t){return void 0===t&&(t=!0),new e(this.geometry,this.material).copy(this,t)},e}(o.Object3D);e.Mesh3D=v;var y=new l.Vector3;function _(t,e,r,i,n,o,s){var u=t.material;if(null===(u.side===a.RenderSideType.BackSide?r.intersectTriangle(o,n,i,!0,s):r.intersectTriangle(i,n,o,u.side!==a.RenderSideType.DoubleSide,s)))return null;y.copy(s),y.applyMatrix4(t._worldMatrix);var h=e.ray.origin.distanceTo(y);return h<e.near||h>e.far?null:{distance:h,point:y.clone(),object:t}}},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.DisplayObject=void 0;var o=r(13),a=r(2),s=r(8),u=r(0),h=function(t){function e(){var e=t.call(this)||this;return e.mouseEnable=!0,e._instanceType="DisplayObject",e.tempDisplayObjectParent=null,e.transform=new a.Transform,e._alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e._worldAlpha=1,e.filterArea=null,e._filters=null,e._enabledFilters=null,e._localBoundsSelf=new a.Rectangle,e._bounds=new a.Rectangle,e._boundsID=0,e._lastBoundsID=-1,e._mask=null,e.destroyed=!1,e}return n(e,t),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.updateTransform=function(){this.transform.updateWorldMatrix(this.parent.transform),this._worldAlpha=this.alpha*this.parent._worldAlpha},e.prototype.hitTestPoint=function(t,r){void 0===r&&(r=!1);var i=this;if(!i.visible)return null;if(r&&!i.mouseEnable)return null;if(r){if(i._localBoundsSelf.isPointIn(i.globalToLocal(t,e._bp)))return i}else if(i._localBoundsSelf.isPointIn(t))return i;return null},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateWorldMatrix(this.parent.transform)):this.transform.updateWorldMatrix(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,r){return void 0===t&&(t=!1),void 0===r&&(r=e.temBounds),t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this.calculateBounds(),r.copy(this._bounds)},e.prototype.getLocalBounds=function(t){void 0===t&&(t=e.temBounds);var r=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var n=this.getBounds(!1,t);return this.parent=i,this.transform=r,this.parent&&this.updateTransform(),n},e.prototype.calculateBounds=function(){this._lastBoundsID!=this._boundsID&&(this._lastBoundsID=this._boundsID)},e.prototype.globalToLocal=function(t,r){return void 0===r&&(r=null),this.worldMatrix.transformPointInverse(t.x,t.y,r||e._bp)},e.prototype.localToGlobal=function(t,r){void 0===r&&(r=null);var i=this.worldMatrix.transformPoint(t.x,t.y,r||e._bp);return this.stage?this.stage.globalToLocal(i,r||e._bp):i},e.prototype._onDispatchBubbledEvent=function(t){var e=this;(t!=s.Event.REMOVED_FROM_STAGE||e.stage)&&(t==s.Event.REMOVED_FROM_STAGE?(e.dispatchEvent(t),e.stage=null):t==s.Event.ADDED_TO_STAGE&&(e.stage=e.parent.stage,e.dispatchEvent(t)))},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,r,i,n,o,a,s,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.anchor.x=s,this.anchor.y=u,this},e.prototype.destroy=function(){this.removeAllEventListener(),this.parent&&this.parent.removeChild(this),this.transform.destroy(),this.transform=null,this._localBoundsSelf=null,this._bounds=null,this.tempDisplayObjectParent=null,this._mask=null,this.filterArea=null,this._filters=null,this._enabledFilters=null,this.mouseEnable=!1,this.destroyed=!0},Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!=t&&(this._alpha=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldMatrix",{get:function(){return this.transform.worldMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localMatrix",{get:function(){return this.transform.localMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this.transform.scale.x},set:function(t){this.transform.scale.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this.transform.scale.y},set:function(t){this.transform.scale.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this.transform.anchor},set:function(t){this.transform.anchor.copy(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchorX",{get:function(){return this.transform.anchor.x},set:function(t){this.transform.anchor.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchorY",{get:function(){return this.transform.anchor.y},set:function(t){this.transform.anchor.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skewX",{get:function(){return this.transform.skew.x*u.RAD_TO_DEG},set:function(t){this.transform.skew.x=t*u.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skewY",{get:function(){return this.transform.skew.y*u.RAD_TO_DEG},set:function(t){this.transform.skew.y=t*u.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation*u.RAD_TO_DEG},set:function(t){this.transform.rotation=t*u.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask!=t&&(this._mask&&(this._mask.renderable=!0,this._mask.isUsedToMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isUsedToMask=!0,this._boundsID++))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.hasEventListener(s.Event.ENTER_FRAME)&&this.dispatchEvent(s.Event.ENTER_FRAME)},e._bp=new a.Point,e._p1=new a.Point,e._p2=new a.Point,e._p3=new a.Point,e._p4=new a.Point,e.temBounds=new a.Rectangle,e}(o.EventDispatcher);e.DisplayObject=h,h.prototype.displayObjectUpdateTransform=h.prototype.updateTransform,h.prototype.displayObjectHitTestPoint=h.prototype.hitTestPoint},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(2),a=r(1),s=r(0),u=r(9),h=r(12),l=r(19),c=new Uint16Array([0,1,2,0,2,3]),f=function(t){function e(e){var r=t.call(this)||this;return r._blendMode=s.BLEND_MODES.NORMAL,r._instanceType="Sprite",r._anchorTexture=new o.ObservablePoint(r._onAnchorUpdate,r,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r._cachedTint=16777215,r._uvs=null,r.texture=e||u.default.EMPTY,r._vertexData=new Float32Array(8),r._vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r._indices=c,r.pluginName="sprite",r}return n(e,t),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._texture.valid&&(this._uvs=this._texture._uvs.uvsFloat32),this._width&&(this.scale.x=a.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=a.sign(this.scale.y)*this._height/this._texture.orig.height),this.updateLocalBoundsSelf()},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1,this.updateLocalBoundsSelf()},e.prototype.updateLocalBoundsSelf=function(){var t=this._texture.orig.width,e=this._texture.orig.height;this._localBoundsSelf.x=-t*this.anchorTexture.x,this._localBoundsSelf.y=-e*this.anchorTexture.y,this._localBoundsSelf.width=t,this._localBoundsSelf.height=e},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldMatrix,r=e.a,i=e.b,n=e.c,o=e.d,a=e.tx,s=e.ty,u=this._vertexData,h=t.trim,l=t.orig,c=this._anchorTexture,f=0,p=0,d=0,v=0;h?(f=(p=h.x-c._x*l.width)+h.width,d=(v=h.y-c._y*l.height)+h.height):(f=(p=-c._x*l.width)+l.width,d=(v=-c._y*l.height)+l.height),u[0]=r*p+n*v+a,u[1]=o*v+i*p+s,u[2]=r*f+n*v+a,u[3]=o*v+i*f+s,u[4]=r*f+n*d+a,u[5]=o*d+i*f+s,u[6]=r*p+n*d+a,u[7]=o*d+i*p+s}},e.prototype.calculateTrimmedVertices=function(){if(this._vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this._vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this._vertexTrimmedData,r=t.orig,i=this._anchorTexture,n=this.transform.worldMatrix,o=n.a,a=n.b,s=n.c,u=n.d,h=n.tx,l=n.ty,c=-i._x*r.width,f=c+r.width,p=-i._y*r.height,d=p+r.height;e[0]=o*c+s*p+h,e[1]=u*p+a*c+l,e[2]=o*f+s*p+h,e[3]=u*p+a*f+l,e[4]=o*f+s*d+h,e[5]=u*d+a*f+l,e[6]=o*c+s*d+h,e[7]=u*d+a*c+l},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.batchManager.setObjectRenderer(t.plugins.batch),t.plugins.batch.render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),o.Rectangle.createFromVertexData(this._bounds,this._vertexData)):(this.calculateTrimmedVertices(),o.Rectangle.createFromVertexData(this._bounds,this._vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(e||(e=l.DisplayObject.temBounds),e.copy(this._localBoundsSelf),e):t.prototype.getLocalBounds.call(this,e)},e.prototype.hitTestPoint=function(e,r){return void 0===r&&(r=!1),this.visible?(i=t.prototype.hitTestPoint.call(this,e,r))?i:(i=this.displayObjectHitTestPoint(e,r))||null:null;var i},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._texture.removeEventListener("update",this._onTextureUpdate,this),this._anchorTexture=null,this._texture=null,this._indices=null,this._uvs=null,this._vertexData=null,this._vertexTrimmedData=null,this.tintedTexture&&(this.tintedTexture=null)},Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=a.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=a.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchorTexture",{get:function(){return this._anchorTexture},set:function(t){this._anchorTexture.copy(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture===u.default.EMPTY?null:this._texture},set:function(t){this._texture!==t&&(this._texture==u.default.EMPTY||null==this._texture||this._texture.baseTexture.hasLoaded||this._texture.removeEventListener("update",this._onTextureUpdate,this),this._texture=t||u.default.EMPTY,this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,t?t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this):this.updateLocalBoundsSelf())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16))},enumerable:!1,configurable:!0}),e.fromUrl=function(t){return new e(u.default.fromUrl(t))},e.fromFrame=function(t){var r=a.TextureCache[t];return r||console.warn("TextureCache中不存在纹理frameId"),new e(r)},e}(h.default);e.default=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=void 0;var i=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},t.prototype.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},t.prototype.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this},t.prototype.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},t.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},t.prototype.applyMatrix3=function(t){var e=this.x,r=this.y,i=t.elements;return this.x=i[0]*e+i[3]*r+i[6],this.y=i[1]*e+i[4]*r+i[7],this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)},t.prototype.normalize=function(){return this.divideScalar(this.length()||1)},t.prototype.angle=function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},t.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},t.prototype.distanceToSquared=function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},t.prototype.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},t.prototype.setLength=function(t){return this.normalize().multiplyScalar(t)},t.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},t.prototype.lerpVectors=function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},t.prototype.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},t}();e.Vector2=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCancelAnimationFrame=e.getRequestAnimationFrame=e.createImage=e.destroyCanvasContent=e.initedByCanvas=e.createCanvas=e.getEnv=void 0;var i,n="web";window&&(window.my=null),e.getEnv=function(){return n},e.createCanvas=function(){return document&&document.createElement("canvas")||my._createOffscreenCanvas()},e.initedByCanvas=function(t){i={createImage:t.createImage.bind(t),requestAnimationFrame:t.requestAnimationFrame.bind(t),cancelAnimationFrame:t.cancelAnimationFrame.bind(t)},n="tb"},e.destroyCanvasContent=function(){i&&(i.createImage=null,i.requestAnimationFrame=null,i.cancelAnimationFrame=null,i=null)},e.createImage=function(){return i&&i.createImage()||new Image},e.getRequestAnimationFrame=function(){return i&&i.requestAnimationFrame||window.requestAnimationFrame.bind(window)},e.getCancelAnimationFrame=function(){return i&&i.cancelAnimationFrame||window.cancelAnimationFrame.bind(window)}},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(110),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MouseEvent=void 0;var o=function(t){function e(e){var r=t.call(this,e)||this;return r.clientX=0,r.clientY=0,r.stageX=0,r.stageY=0,r.localX=0,r.localY=0,r.currentTarget=null,r.identifier=0,r._instanceType="MouseEvent",r}return n(e,t),e.prototype.updateAfterEvent=function(){this.target.stage._cp=!0},e.prototype.destroy=function(){this.currentTarget=null,t.prototype.destroy.call(this)},e.MOUSE_DOWN="onMouseDown",e.MOUSE_UP="onMouseUp",e.CLICK="onMouseClick",e.MOUSE_MOVE="onMouseMove",e.MOUSE_OVER="onMouseOver",e.MOUSE_OUT="onMouseOut",e}(r(8).Event);e.MouseEvent=o},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(8),e),n(r(13),e),n(r(143),e),n(r(24),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.BaseMaterial=e.RenderSideType=e.EnvBlendType=void 0;var o,a,s=r(4),u=r(1);!function(t){t.ENVMAP_BLENDING_MULTIPLY="ENVMAP_BLENDING_MULTIPLY",t.ENVMAP_BLENDING_MIX="ENVMAP_BLENDING_MIX",t.ENVMAP_BLENDING_ADD="ENVMAP_BLENDING_ADD"}(o=e.EnvBlendType||(e.EnvBlendType={})),function(t){t[t.FrontSide=0]="FrontSide",t[t.BackSide=1]="BackSide",t[t.DoubleSide=2]="DoubleSide"}(a=e.RenderSideType||(e.RenderSideType={}));var h=function(t){function e(e){var r=t.call(this)||this;if(r._color=16777215,r._colorArr=new Float32Array([1,1,1]),r.alpha=1,r.combine=o.ENVMAP_BLENDING_MULTIPLY,r.reflectivity=1,r.morphTargets=!1,r.morphNormals=!1,r.skinning=!1,r.useVertexColor=!1,r.wireframe=!1,r.side=a.FrontSide,r.useFog=!0,r._lightAffect=!1,r._instanceType="BaseMaterial",e)for(var i in e)r[i]=e[i];return r}return n(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){if(this._color!==t){this._color=t;var e=u.hex2rgb(t);this._colorArr[0]=e[0],this._colorArr[1]=e[1],this._colorArr[2]=e[2]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorArr",{get:function(){return this._colorArr},enumerable:!1,configurable:!0}),e.prototype.copy=function(t){return this.color=t.color,this.map=t.map,this.alpha=t.alpha,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.skinning=t.skinning,this.wireframe=t.wireframe,this.side=t.side,this._lightAffect=t._lightAffect,this},e.prototype.clone=function(){return(new e).copy(this)},e.prototype.destroy=function(){this._color=null},e}(s.HashObject);e.BaseMaterial=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sphere=void 0;var i=r(47),n=r(3),o=function(){function t(t,e){void 0===t&&(t=new n.Vector3),void 0===e&&(e=0),this.center=t,this.radius=e}return t.prototype.set=function(t,e){return this.center.copy(t),this.radius=e,this},t.prototype.setFromPoints=function(t,e){var r=new i.Box3,n=this.center;void 0!==e?n.copy(e):r.setFromPoints(t).getCenter(n);for(var o=0,a=0,s=t.length;a<s;a++)o=Math.max(o,n.distanceToSquared(t[a]));return this.radius=Math.sqrt(o),this},t.prototype.clone=function(){return(new t).copy(this)},t.prototype.copy=function(t){return this.center.copy(t.center),this.radius=t.radius,this},t.prototype.empty=function(){return this.radius<=0},t.prototype.containsPoint=function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},t.prototype.distanceToPoint=function(t){return t.distanceTo(this.center)-this.radius},t.prototype.intersectsSphere=function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},t.prototype.intersectsBox=function(t){return t.intersectsSphere(this)},t.prototype.clampPoint=function(t,e){void 0===e&&(e=new n.Vector3);var r=this.center.distanceToSquared(t);return e.copy(t),r>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},t.prototype.getBoundingBox=function(t){return void 0===t&&(t=new i.Box3),t.set(this.center,this.center),t.expandByScalar(this.radius),t},t.prototype.applyMatrix4=function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},t.prototype.translate=function(t){return this.center.add(t),this},t.prototype.equals=function(t){return t.center.equals(this.center)&&t.radius===this.radius},t}();e.Sphere=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.BaseTrack=void 0;var o=r(4),a=r(17),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.setValue=function(t,e,r,i){void 0===e&&(e=1),void 0===r&&(r=a.MixBlend.replace),void 0===i&&(i=a.MixDirection.in)},e.prototype.resetValue=function(){},e.prototype.destroy=function(){},e}(o.HashObject);e.BaseTrack=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var o=function(t){function e(e,r){void 0===e&&(e=0),void 0===r&&(r=0);var i=t.call(this)||this;i.x=0,i.y=0;var n=i;return n._instanceType="Point",n.x=e,n.y=r,i}return n(e,t),e.prototype.destroy=function(){},e.distance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;return 4==r?Math.sqrt((t[0]-t[2])*(t[0]-t[2])+(t[1]-t[3])*(t[1]-t[3])):2==r?Math.sqrt((t[0].x-t[1].x)*(t[0].x-t[1].x)+(t[0].y-t[1].y)*(t[0].y-t[1].y)):void 0},e.prototype.set=function(t,e){this.x=t,this.y=e},e}(r(4).HashObject);e.Point=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasRenderer=void 0;var o=r(55),a=r(103),s=r(104),u=r(0),h=r(56),l=r(105),c=r(1),f=r(106),p=function(t){function e(e,r,i){var n=t.call(this)||this;return n.type=u.RENDERER_TYPE.CANVAS,n._instanceType="CanvasRenderer",n.rootContext=e,n.maskManager=new a.default(n),n.plugins={sprite:null,graphics:null},n.plugins.sprite=new s.default(n),n.plugins.graphics=new o.CanvasGraphicsRenderer(n),n.plugins.mesh=new f.CanvasMeshRenderer(n),n.blendModes=c.mapCanvasBlendModes(),n._activeBlendMode=null,n._outerBlend=!1,n.resize(r,i),n}return n(e,t),e.prototype.render=function(t,e,r){this.dispatchEvent("onPreRender");var i=!e;e?((e=e.baseTexture||e)._canvasRenderTarget?(e._canvasRenderTarget.clear(),e._canvasRenderTarget.resize(e.width,e.height)):(e._canvasRenderTarget=new l.default(e.width,e.height),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context):this.context=this.rootContext;var n=this.context;e||(this._lastObjectRendered=t),t.update();var o=t.parent,a=this._tempDisplayObjectParent.transform.worldMatrix;r?(a.copy(r),this._tempDisplayObjectParent.transform._worldID++):a.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o,n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=1,this._activeBlendMode=u.BLEND_MODES.NORMAL,this._outerBlend=!1,n.globalCompositeOperation=this.blendModes[u.BLEND_MODES.NORMAL],i&&(this.transparent?n.clearRect(0,0,this.width,this.height):(n.fillStyle=this._backgroundColorString,n.fillRect(0,0,this.width,this.height))),t.renderCanvas(this),n.restore(),this.dispatchEvent("onPostRender")},e.prototype.setBlendMode=function(t,e){void 0===e&&(e=!1);var r=t===u.BLEND_MODES.SRC_IN||t===u.BLEND_MODES.SRC_OUT||t===u.BLEND_MODES.DST_IN||t===u.BLEND_MODES.DST_ATOP;!e&&r&&(t=u.BLEND_MODES.NORMAL),this._activeBlendMode!==t&&(this._activeBlendMode=t,this._outerBlend=r,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(){this.destroyPlugins(),t.prototype.destroy.call(this),this.context=null,this.maskManager.destroy(),this.maskManager=null},e.prototype.destroyPlugins=function(){this.plugins.sprite.destroy(),this.plugins.graphics.destroy()},e}(h.SystemRenderer);e.CanvasRenderer=p},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(13),a=r(1),s=r(0),u=r(23),h=function(t){function e(e,r){void 0===e&&(e=null),void 0===r&&(r=s.SCALE_MODES.LINEAR);var i=t.call(this)||this;if(i._touchedId=0,i.width=100,i.height=100,i.scaleMode=r,i.hasLoaded=!1,i._isLoading=!1,i.source=null,i.imageType=null,i.premultipliedAlpha=!0,i.imageUrl=null,i.isPowerOfTwo=!1,i.mipmap=!0,i.wrapMode=s.WRAP_MODES.CLAMP,i._glTextures={},i._enabledId=0,i.textureCacheIds=[],e)if(e.data)i._sourceChange(e);else if(e.getContext)i._sourceChange(e);else if(e.complete)i._sourceChange(e),i.dispatchEvent("loaded");else{var n=i;e.onload=function(){n._sourceChange(e),n.dispatchEvent("loaded")}}return i}return n(e,t),e.prototype.update=function(){this.width=this.source.width,this.height=this.source.height,this.hasLoaded=!(!this.width||!this.height),this.isPowerOfTwo=a.isPow2(this.width)&&a.isPow2(this.height),this.dispatchEvent("update")},e.prototype._sourceChange=function(t){this.source=t,this.imageUrl=t.src||t.path||null,this.imageType=this.source.type||null,this.hasLoaded=!0,this.update(),this.dispatchEvent("loaded")},e.prototype.destroy=function(){this.imageUrl&&(delete a.TextureCache[this.imageUrl],this.imageUrl=null),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null},e.prototype.dispose=function(){this.dispatchEvent("dispose")},e.fromUrl=function(t){if(a.BaseTextureCache[t])return a.BaseTextureCache[t];var r=new e;return u.GlobalLoader.loadImage((function(i,n){i&&(r._sourceChange(n),0!==t.indexOf("data:")&&e.addToCache(r,t))}),t),r},e.fromData=function(t){return new e(t)},e.fromCanvas=function(t,r){void 0===r&&(r="canvas"),t._canvasId||(t._canvasId=r+"_"+a.uid());var i=a.BaseTextureCache[t._canvasId];return i||(i=new e(t),e.addToCache(i,t._canvasId)),i},e.fromImage=function(t){var r=t.src,i=a.BaseTextureCache[r];return i||(i=new e(t),r&&0!==r.indexOf("data:")&&e.addToCache(i,r)),i},e.from=function(t){return"string"==typeof t?e.fromUrl(t):t.data?e.fromData(t):t.getContext?e.fromCanvas(t):e.fromImage(t)},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),a.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),a.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=a.BaseTextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete a.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete a.BaseTextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},e}(o.EventDispatcher);e.default=h},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Mesh=void 0;var o=r(2),a=r(78),s=r(12),u=r(9),h=r(0),l=r(74),c=r(11),f=new o.Point,p=new a.Polygon,d=function(t){function e(e,r,i,n){var o=t.call(this)||this;return o._blendMode=h.BLEND_MODES.NORMAL,o._texture=e||u.default.EMPTY,o._uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),o._vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),o._indices=n||new Uint16Array([0,1,3,2]),o._vertexDirty=0,o._vertexId=-1,o._localBoundsSelfId=-1,o.blendMode=h.BLEND_MODES.NORMAL,o.canvasPadding=0,o._tint=null,o._tintRGB=null,o.tint=16777215,o._uvTransform=new l.default(o._texture),o._needRefresh=!0,o}return n(e,t),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){},enumerable:!1,configurable:!0}),e.prototype._renderWebGL=function(t){this.refresh(),this.calculateVertices(),t.batchManager.setObjectRenderer(t.plugins.batch),t.plugins.batch.render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins.mesh.render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this._needRefresh=!0},e.prototype.multiplyUvs=function(){this._uvTransform.multiplyUvs(this._uvs)},e.prototype.refresh=function(t){void 0===t&&(t=!1),this._texture&&this._texture.valid&&(this._uvTransform.update(t)||this._needRefresh||t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype.calculateVertices=function(){if(!(this._vertexId===this._vertexDirty&&this._transformID===this.transform._worldID||(this._vertexId=this._vertexDirty,this._transformID=this.transform._worldID,this._vertices.length<=2))){this._vertexData||(this._vertexData=new Float32Array(this._vertices.length));for(var t=this.transform.worldMatrix,e=t.a,r=t.b,i=t.c,n=t.d,o=t.tx,a=t.ty,s=this._vertexData,u=0;u<s.length/2;u++){var h=this._vertices[2*u],l=this._vertices[2*u+1];s[2*u]=e*h+i*l+o,s[2*u+1]=r*h+n*l+a}}},e.prototype._calculateBounds=function(){this.updateLocalBoundsSelf();var t=this._localBoundsSelf,e=this.transform.worldMatrix;e.transformPoint(t.x,t.y,c.DisplayObject._p1),e.transformPoint(t.x+t.width,t.y,c.DisplayObject._p2),e.transformPoint(t.x+t.width,t.y+t.height,c.DisplayObject._p3),e.transformPoint(t.x,t.y+t.height,c.DisplayObject._p4),o.Rectangle.createFromPoints(this._bounds,c.DisplayObject._p1,c.DisplayObject._p2,c.DisplayObject._p3,c.DisplayObject._p4)},e.prototype.updateLocalBoundsSelf=function(){this._localBoundsSelfId!=this._vertexDirty&&(this._localBoundsSelfId=this._vertexDirty,this._vertices.length<=2&&this._localBoundsSelf.clear(),o.Rectangle.createFromVertexData(this._localBoundsSelf,this._vertices))},e.prototype.hitTestPoint=function(e,r){return void 0===r&&(r=!1),this.visible?(i=t.prototype.hitTestPoint.call(this,e,r))?i:r&&!this.mouseEnable?null:(this.updateLocalBoundsSelf(),(i=this.displayObjectHitTestPoint(e,r))?this.hitTestPointAccuratly(e,r):null):null;var i},e.prototype.hitTestPointAccuratly=function(t,e){e?this.globalToLocal(t,f):f.set(t.x,t.y);for(var r=this._vertices,i=p.points,n=this._indices,o=this._indices.length,a=0;a+2<o;a+=3){var s=2*n[a],u=2*n[a+1],h=2*n[a+2];if(i[0]=r[s],i[1]=r[s+1],i[2]=r[u],i[3]=r[u+1],i[4]=r[h],i[5]=r[h+1],p.isPointIn(f))return this}return null},Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16))},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._texture.removeEventListener("update",this._onTextureUpdate,this),this._uvs=null,this._vertices=null,this._indices=null,this._vertexData=null},e}(s.default);e.Mesh=d},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.TextField=void 0;var o=r(0),a=r(9),s=r(1),u=r(20),h=function(t){function e(){var e=t.call(this)||this;e._textAlpha=1,e._textAlign=o.TEXT_ALIGN.LEFT,e._verticalAlign=o.VERTICAL_ALIGN.UP,e._textWidth=0,e._textHeight=0,e._lineSpacing=14,e._lineType=o.TEXT_lINETYPE.SINGLE,e._text="",e._font="Arial",e._size=12,e._fillColor="#ffffff",e._strokeColor="#ffffff",e._stroke=0,e._italic=!1,e._bold=!1,e._border=!1,e.realLines=[],e._instanceType="TextField";var r=s.createCanvas();return r.width=r.height=3,e.texture=a.default.fromCanvas(r,"textCanvas"),e.canvas=r,e.context=r.getContext("2d"),a.default.addToCache(e.texture,e.texture.baseTexture.textureCacheIds[0]),e.dirty=!0,e}return n(e,t),Object.defineProperty(e.prototype,"textAlpha",{get:function(){return this._textAlpha},set:function(t){this._textAlpha!=t&&(this._textAlpha=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this._textAlign},set:function(t){this._textAlign!=t&&(this._textAlign=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this._textWidth?this._textWidth:(this.updateText(),this.width-20)},set:function(t){this._textWidth!=t&&(this._textWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this._textHeight?this._textHeight:(this.updateText(),this.height-20)},set:function(t){this._textHeight!=t&&(this._textHeight=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){this._lineSpacing!=t&&(this._lineSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineType",{get:function(){return this._lineType},set:function(t){this._lineType!=t&&(this._lineType=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text!=t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(t){this._font!=t&&(this._font=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size!=t&&(this._size=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this._fillColor},set:function(t){this._fillColor!=t&&(this._fillColor=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeColor",{get:function(){return this._strokeColor},set:function(t){this._strokeColor!=t&&(this._strokeColor=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._stroke!=t&&(this._stroke=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"italic",{get:function(){return this._italic},set:function(t){this._italic!=t&&(this._italic=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bold",{get:function(){return this._bold},set:function(t){this._bold!=t&&(this._bold=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"border",{get:function(){return this._border},set:function(t){this._border!=t&&(this._border=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype._prepContext=function(t){var e=this,r=e.size||12;r+="px ",r+=e.font,e._bold&&(r="bold "+r),e._italic&&(r="italic "+r),t.font=r,t.textAlign=e._textAlign||o.TEXT_ALIGN.LEFT,t.textBaseline="top",t.fillStyle=s.getRGBA(e._fillColor,e._textAlpha)},e.prototype.getTextWidth=function(t){void 0===t&&(t=0);var e=this;return e.updateText(),e.context.measureText(e.realLines[t]).width},Object.defineProperty(e.prototype,"lines",{get:function(){return this.realLines.length},enumerable:!1,configurable:!0}),e.prototype._getMeasuredWidth=function(t){if("web"==s.getEnv())return this.context.measureText(t).width;for(var e=new RegExp("[一-龥]+"),r=/[\u3002|\uff1f|\uff01|\uff0c|\u3001|\uff1b|\uff1a|\u201c|\u201d|\u2018|\u2019|\uff08|\uff09|\u300a|\u300b|\u3008|\u3009|\u3010|\u3011|\u300e|\u300f|\u300c|\u300d|\ufe43|\ufe44|\u3014|\u3015|\u2026|\u2014|\uff5e|\ufe4f|\uffe5]/,i=(new RegExp("[A-Za-z]+"),this.size),n=0,o=0;o<t.length;o++){var a=t[o];e.test(a)||r.test(a)?n+=i:n+=4*i/7}return n},e.prototype.updateText=function(){var t=this;if(t.dirty){if(t.dirty=!1,t._boundsID++,!t._text)return t.canvas.width=0,t.canvas.height=0,t._localBoundsSelf.clear(),t.anchorTexture={x:0,y:0},void t.texture.update();t._text+="";var e=t.canvas,r=t.context,i=t._text.toString().split(/(?:\r\n|\r|\n)/),n=[];t.realLines=n,t._prepContext(r);var a=t._textWidth;if(t._text.indexOf("\n")<0&&t._text.indexOf("\r")<0&&t._text.indexOf("\r\n")<0&&t.lineType==o.TEXT_lINETYPE.SINGLE){n[n.length]=i[0];var u=i[0],h=t._getMeasuredWidth(u);if(h>(a=a||h))for(var l=t._getMeasuredWidth(u[0]),c=u[0],f=0,p=u.length,d=1;d<p;d++){if((l+=f=t._getMeasuredWidth(u[d]))>a){n[0]=c;break}c+=u[d]}}else{if(!a)for(var v=0,y=i.length;v<y;v++){(u=i[v])&&(a=Math.max(t._getMeasuredWidth(u),a))}for(v=0,y=i.length;v<y;v++){if(u=i[v]){for(l=t._getMeasuredWidth(u[0]),c=u[0],f=0,p=u.length,d=1;d<p;d++)(l+=f=t._getMeasuredWidth(u[d]))>a?(n[n.length]=c,c=u[d],l=f):c+=u[d];n[n.length]=c}}}var _=t.size*n.length+t._lineSpacing*(n.length-1),m=t._textHeight||_,g=a,x=0;t._textAlign==o.TEXT_ALIGN.CENTER?x=.5*g:t._textAlign==o.TEXT_ALIGN.RIGHT&&(x=g);var b=g+20,M=m+20;e.width=b,e.height=M,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,e.width,e.height),t.border&&(r.beginPath(),r.strokeStyle="#000",r.lineWidth=1,r.strokeRect(10.5,10.5,g,m),r.closePath()),r.setTransform(1,0,0,1,x+10,10),t._prepContext(r);var T=t._lineSpacing+t.size,w=0;t._textHeight&&(t._verticalAlign==o.VERTICAL_ALIGN.MIDDLE?w=.5*(t._textHeight-_):t._verticalAlign==o.VERTICAL_ALIGN.DOWN&&(w=t._textHeight-_)),"tb"==s.getEnv()&&(w-=4);for(v=0;v<n.length;v++){t.stroke&&(r.strokeStyle=t.strokeColor,r.lineWidth=2*t.stroke,r.strokeText(n[v],0,w+v*T)),r.fillText(n[v],0,w+v*T)}t.offsetX=-10,t.offsetY=-10,this.anchorTexture={x:10.5/b,y:10/M},t.texture.update(),t._onTextureUpdate()}},e.prototype.calculateBounds=function(){this.updateText(),t.prototype.calculateBounds.call(this)},e.prototype._renderCanvas=function(e){this.updateText(),t.prototype._renderCanvas.call(this,e)},e.prototype._renderWebGL=function(e){this.updateText(),t.prototype._renderWebGL.call(this,e)},e.prototype.destroy=function(){this.canvas=null,this.context=null,t.prototype.destroy.call(this)},e}(u.default);e.TextField=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Quaternion=void 0;var i=r(3),n=r(1),o=function(){function t(t,e,r,n){var o,a;this.setFromUnitVectors=(a=new i.Vector3,function(t,e){return void 0===a&&(a=new i.Vector3),(o=t.dot(e)+1)<1e-6?(o=0,Math.abs(t.x)>Math.abs(t.z)?a.set(-t.y,t.x,0):a.set(0,-t.z,t.y)):a.crossVectors(t,e),this._x=a.x,this._y=a.y,this._z=a.z,this._w=o,this.normalize()}),this._x=t||0,this._y=e||0,this._z=r||0,this._w=void 0!==n?n:1}return t.slerp=function(t,e,r,i){return r.copy(t).slerp(e,i)},t.slerpFlat=function(t,e,r,i,n,o,a){var s=r[i+0],u=r[i+1],h=r[i+2],l=r[i+3],c=n[o+0],f=n[o+1],p=n[o+2],d=n[o+3];if(l!==d||s!==c||u!==f||h!==p){var v=1-a,y=s*c+u*f+h*p+l*d,_=y>=0?1:-1,m=1-y*y;if(m>1e-19){var g=Math.sqrt(m),x=Math.atan2(g,y*_);v=Math.sin(v*x)/g,a=Math.sin(a*x)/g}var b=a*_;if(s=s*v+c*b,u=u*v+f*b,h=h*v+p*b,l=l*v+d*b,v===1-a){var M=1/Math.sqrt(s*s+u*u+h*h+l*l);s*=M,u*=M,h*=M,l*=M}}t[e]=s,t[e+1]=u,t[e+2]=h,t[e+3]=l},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e,r,i){return this._x=t,this._y=e,this._z=r,this._w=i,this.onChangeCallback(),this},t.prototype.clone=function(){return new t(this._x,this._y,this._z,this._w)},t.prototype.copy=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},t.prototype.setFromEuler=function(t,e){var r=t._x,i=t._y,n=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(r/2),h=a(i/2),l=a(n/2),c=s(r/2),f=s(i/2),p=s(n/2);return"XYZ"===o?(this._x=c*h*l+u*f*p,this._y=u*f*l-c*h*p,this._z=u*h*p+c*f*l,this._w=u*h*l-c*f*p):"YXZ"===o?(this._x=c*h*l+u*f*p,this._y=u*f*l-c*h*p,this._z=u*h*p-c*f*l,this._w=u*h*l+c*f*p):"ZXY"===o?(this._x=c*h*l-u*f*p,this._y=u*f*l+c*h*p,this._z=u*h*p+c*f*l,this._w=u*h*l-c*f*p):"ZYX"===o?(this._x=c*h*l-u*f*p,this._y=u*f*l+c*h*p,this._z=u*h*p-c*f*l,this._w=u*h*l+c*f*p):"YZX"===o?(this._x=c*h*l+u*f*p,this._y=u*f*l+c*h*p,this._z=u*h*p-c*f*l,this._w=u*h*l-c*f*p):"XZY"===o&&(this._x=c*h*l-u*f*p,this._y=u*f*l-c*h*p,this._z=u*h*p+c*f*l,this._w=u*h*l+c*f*p),!1!==e&&this.onChangeCallback(),this},t.prototype.setFromAxisAngle=function(t,e){var r=e/2,i=Math.sin(r);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(r),this.onChangeCallback(),this},t.prototype.setFromRotationMatrix=function(t){var e,r=t.elements,i=r[0],n=r[4],o=r[8],a=r[1],s=r[5],u=r[9],h=r[2],l=r[6],c=r[10],f=i+s+c;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(l-u)*e,this._y=(o-h)*e,this._z=(a-n)*e):i>s&&i>c?(e=2*Math.sqrt(1+i-s-c),this._w=(l-u)/e,this._x=.25*e,this._y=(n+a)/e,this._z=(o+h)/e):s>c?(e=2*Math.sqrt(1+s-i-c),this._w=(o-h)/e,this._x=(n+a)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+c-i-s),this._w=(a-n)/e,this._x=(o+h)/e,this._y=(u+l)/e,this._z=.25*e),this.onChangeCallback(),this},t.prototype.angleTo=function(t){return 2*Math.acos(Math.abs(n.clamp(this.dot(t),-1,1)))},t.prototype.rotateTowards=function(t,e){var r=this.angleTo(t);if(0===r)return this;var i=Math.min(1,e/r);return this.slerp(t,i),this},t.prototype.inverse=function(){return this.conjugate()},t.prototype.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},t.prototype.dot=function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},t.prototype.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},t.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},t.prototype.normalize=function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},t.prototype.multiply=function(t,e){return void 0!==e?(console.warn(""),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},t.prototype.premultiply=function(t){return this.multiplyQuaternions(t,this)},t.prototype.multiplyQuaternions=function(t,e){var r=t._x,i=t._y,n=t._z,o=t._w,a=e._x,s=e._y,u=e._z,h=e._w;return this._x=r*h+o*a+i*u-n*s,this._y=i*h+o*s+n*a-r*u,this._z=n*h+o*u+r*s-i*a,this._w=o*h-r*a-i*s-n*u,this.onChangeCallback(),this},t.prototype.slerp=function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var r=this._x,i=this._y,n=this._z,o=this._w,a=o*t._w+r*t._x+i*t._y+n*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=r,this._y=i,this._z=n,this;var s=1-a*a;if(s<=1e-13){var u=1-e;return this._w=u*o+e*this._w,this._x=u*r+e*this._x,this._y=u*i+e*this._y,this._z=u*n+e*this._z,this.normalize()}var h=Math.sqrt(s),l=Math.atan2(h,a),c=Math.sin((1-e)*l)/h,f=Math.sin(e*l)/h;return this._w=o*c+this._w*f,this._x=r*c+this._x*f,this._y=i*c+this._y*f,this._z=n*c+this._z*f,this.onChangeCallback(),this},t.prototype.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},t.prototype.fromArray=function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},t.prototype.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},t.prototype.onChange=function(t){return this.onChangeCallback=t,this},t.prototype.onChangeCallback=function(){},t}();e.Quaternion=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Light=void 0;var o=r(16),a=r(3),s=r(1),u=function(t){function e(e,r){void 0===r&&(r=1);var i=t.call(this)||this;return i.intensity=r,i._color=16777215,i._colorArr=new Float32Array([1,1,1]),i._colorVec3=new a.Vector3(1,1,1),i.color=e,i._instanceType="Light",i}return n(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){if(this._color!==t){this._color=t;var e=s.hex2rgb(t);this._colorArr[0]=this._colorVec3.x=e[0],this._colorArr[1]=this._colorVec3.y=e[1],this._colorArr[2]=this._colorVec3.z=e[2]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorArr",{get:function(){return this._colorArr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorVec3",{get:function(){return this._colorVec3},enumerable:!1,configurable:!0}),e.prototype.copy=function(e){return t.prototype.copy.call(this,e),this.color=e.color,this.intensity=e.intensity,this},e}(o.Object3D);e.Light=u},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(26),e),n(r(89),e),n(r(49),e),n(r(186),e)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpineColor=void 0;var i=function(){function t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.r=t,this.g=e,this.b=r,this.a=i}return t.prototype.set=function(t,e,r,i){return this.r=t,this.g=e,this.b=r,this.a=i,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,r,i){return this.r+=t,this.g+=e,this.b+=r,this.a+=i,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.fromString=function(e){return(new t).setFromString(e)},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();e.SpineColor=i},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var o=r(29),a=r(4),s=r(0),u=function(t){function e(e,r,i,n,o,a){void 0===e&&(e=1),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=0),void 0===a&&(a=0);var s=t.call(this)||this;s.a=1,s.b=0,s.c=0,s.d=1,s.tx=0,s.ty=0,s.array=null,s.prepend=function(t){var e=this,r=t.a,i=t.b,n=t.c,o=t.d,a=t.tx,s=t.ty,u=e.a,h=e.c,l=e.tx;return e.a=r*u+n*e.b,e.b=i*u+o*e.b,e.c=r*h+n*e.d,e.d=i*h+o*e.d,e.tx=r*l+n*e.ty+a,e.ty=i*l+o*e.ty+s,this};var u=s;return u._instanceType="Matrix",u.a=e,u.b=r,u.c=i,u.d=n,u.tx=o,u.ty=a,s}return n(e,t),e.prototype.clone=function(){var t=this;return new e(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prototype.copy=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},e.prototype.transformPoint=function(t,e,r){void 0===r&&(r=null);var i=this;return r||(r=new o.Point),r.x=t*i.a+e*i.c+i.tx,r.y=t*i.b+e*i.d+i.ty,r},e.prototype.transformPointInverse=function(t,e,r){void 0===r&&(r=null);r||(r=new o.Point);var i=1/(this.a*this.d+this.c*-this.b);return r.x=this.d*i*t+-this.c*i*e+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*e+-this.b*i*t+(-this.ty*this.a+this.tx*this.b)*i,r},e.prototype.setFrom=function(t){var e=this;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},e.prototype.identity=function(){var t=this;t.a=t.d=1,t.b=t.c=t.tx=t.ty=0},e.prototype.invert=function(){var t=this,e=t.a,r=t.b,i=t.c,n=t.d,o=t.tx,a=t.ty;if(0==r&&0==i)return 0==e||0==n?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,n=t.d=1/n,t.tx=-e*o,t.ty=-n*a),t;var s=e*n-r*i;if(0==s)return t.identity(),t;s=1/s;var u=t.a=n*s;return r=t.b=-r*s,i=t.c=-i*s,n=t.d=e*s,t.tx=-(u*o+i*a),t.ty=-(r*o+n*a),t},e.prototype.createBox=function(t,e,r,i,n,o,a,u,h){var l=this;if(0!=n?o=a=n%360:(o%=360,a%=360),0==o&&0==a)l.a=r,l.b=l.c=0,l.d=i;else{o*=s.DEG_TO_RAD,a*=s.DEG_TO_RAD;var c=s.cos(o),f=s.sin(o);o==a?(l.a=c*r,l.b=f*r):(l.a=s.cos(a)*r,l.b=s.sin(a)*r),l.c=-f*i,l.d=c*i}l.tx=t+u-(u*l.a+h*l.c),l.ty=e+h-(u*l.b+h*l.d)},e.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty},e.isEqual=function(t,e){return t.tx==e.tx&&t.ty==e.ty&&t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d},e.prototype.concat=function(t){var e=this,r=e.a,i=e.b,n=e.c,o=e.d,a=e.tx,s=e.ty,u=t.a,h=t.b,l=t.c,c=t.d,f=t.tx,p=t.ty;e.a=r*u+i*l,e.b=r*h+i*c,e.c=n*u+o*l,e.d=n*h+o*c,e.tx=a*u+s*l+f,e.ty=a*h+s*c+p},e.prototype.rotate=function(t){var e=this,r=Math.sin(t),i=Math.cos(t),n=e.a,o=e.b,a=e.c,s=e.d,u=e.tx,h=e.ty;e.a=n*i-o*r,e.b=n*r+o*i,e.c=a*i-s*r,e.d=a*r+s*i,e.tx=u*i-h*r,e.ty=u*r+h*i},e.prototype.scale=function(t,e){var r=this;r.a*=t,r.d*=e,r.c*=t,r.b*=e,r.tx*=t,r.ty*=e},e.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},e.prototype.set=function(t,e,r,i,n,o){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o,this},e.prototype.getRotation=function(){return Math.round(Math.atan2(this.b,this.a)*s.RAD_TO_DEG)},e.prototype.toArray=function(t,e){void 0===t&&(t=!1),this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},e.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,o=-Math.atan2(-i,n),a=Math.atan2(r,e),u=Math.abs(o+a);return u<1e-5||Math.abs(s.PI_2-u)<1e-5?(t.rotation=a,e<0&&n>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx,t.position.y=this.ty,t},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){},e}(a.HashObject);e.Matrix=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebglRenderer=void 0;var o=r(113),a=r(56),s=r(0),u=r(6),h=r(43),l=r(121),c=r(122),f=r(0),p=r(123),d=r(124),v=r(125),y=r(138),_=r(139),m=0,g=function(t){function e(r,i,n){var o=t.call(this)||this;o.plugins={},o._instanceType="WebglRenderer",o.type=s.RENDERER_TYPE.WEBGL;return o._backgroundColorRgba[3]=o.transparent?0:1,o.gl=r,o.CONTEXT_UID=m++,o.maskManager=new v.default(o),o.stencilManager=new y.default(o),o.batchManager=new d.default(o),o.textureManager=null,o.initPlugins(e.__plugins),o.state=new p.default(o.gl),o.renderingToScreen=!0,o._activeShader=null,o._activeVao=null,o._activeRenderTarget=null,o._initContext(),o.resize(i,n),o}return n(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext(),this._activeShader=null,this._activeVao=null,this.textureManager=new l.default(this),this.filterManager=new _.default(this),this.textureGC=new c.default(this),this.state.resetToDefault(),this.rootRenderTarget=new h.default(t,1,1,f.SCALE_MODES.LINEAR,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget),this.dispatchEvent("onContextChange")},e.prototype.render=function(t,e,r){if(this.dispatchEvent("onPreRender"),this.renderingToScreen=!e,this.gl&&!this.gl.isContextLost()){e||(this._lastObjectRendered=t),t.update();var i=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=i,this.bindRenderTexture(e,r),this.batchManager.currentRenderer.start(),this._activeRenderTarget.clear(),t.renderWebGL(this),this.batchManager.currentRenderer.flush(),this.dispatchEvent("onPostRender")}},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var r=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(e),this},e.prototype.bindShader=function(t,e){return void 0===e&&(e=!0),this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.createVao=function(){return new u.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t,e){return void 0===e&&(e=!1),this._activeVao===t?(e&&t.bind(),this):(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.batchManager.reset(),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var t=0;t<this.textureManager.boundTextures.length;t++)this.textureManager.boundTextures[t]=this.textureManager.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.bindRenderTexture=function(t,e){var r;if(t){var i=t.baseTexture;i._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(i,0),this.textureManager.unbindTexture(i),(r=i._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else r=this.rootRenderTarget;return r.transform=e,this.bindRenderTarget(r),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&this._activeShader.uniforms.projectionMatrix&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.rootRenderTarget.resize(e,r),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.destroy=function(){this.destroyPlugins(),this.textureManager.destroy(),t.prototype.destroy.call(this),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.handleContextLost=null,this.handleContextRestored=null},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext(),this.resize(this.width,this.height)},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},e.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null},e.registerPlugin=function(t,r){e.__plugins=e.__plugins||{},e.__plugins[t]=r},e}(a.SystemRenderer);e.WebglRenderer=g,g.registerPlugin("batch",o.default)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.renderer=t,this.renderer.addEventListener("onContextChange",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(t){},t.prototype.destroy=function(){this.renderer.removeEventListener("onContextChange",this.onContextChange,this),this.renderer=null},t}();e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapType=void 0,e.mapType=function(t,e){if(!i){var r=Object.keys(n);i={};for(var o=0;o<r.length;++o){var a=r[o];i[t[a]]=n[a]}}return i[e]};var i=null,n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultValue=void 0,e.defaultValue=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return i(2*e);case"bvec3":return i(3*e);case"bvec4":return i(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}};var i=function(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=r(0),o=r(6),a=function(){function t(t,e,r,a,s){void 0===e&&(e=0),void 0===r&&(r=0),void 0===a&&(a=n.SCALE_MODES.LINEAR),void 0===s&&(s=!1),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new i.Rectangle(0,0,1,1),this.projectionMatrix=new i.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new i.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=a,this.root=s,this.root?(this.frameBuffer=new o.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=o.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===n.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(e,r)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width,0|this.destinationFrame.height)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width,0|this.destinationFrame.height)},t.prototype.calculateProjection=function(t,e){var r=this.projectionMatrix;e=e||t,r.identity(),this.root?(r.a=1/t.width*2,r.d=-1/t.height*2,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2,r.d=1/t.height*2,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t,e);var r=this.frame||this.size;this.calculateProjection(r)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=a},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(75);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return o.default}}),n(r(158),e)},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(169),e);var o=r(83);Object.defineProperty(e,"Tween",{enumerable:!0,get:function(){return o.default}})},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(18),e),n(r(7),e),n(r(88),e),n(r(16),e),n(r(86),e),n(r(10),e),n(r(34),e),n(r(21),e),n(r(3),e),n(r(178),e),n(r(36),e),n(r(187),e),n(r(191),e),n(r(48),e),n(r(195),e),n(r(199),e),n(r(202),e),n(r(203),e)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box3=void 0;var i=r(3),n=r(27),o=function(){function t(t,e){void 0===t&&(t=new i.Vector3(1/0,1/0,1/0)),void 0===e&&(e=new i.Vector3(-1/0,-1/0,-1/0)),this.min=t,this.max=e}return t.prototype.set=function(t,e){return this.min.copy(t),this.max.copy(e),this},t.prototype.clone=function(){return(new t).copy(this)},t.prototype.copy=function(t){return this.min.copy(t.min),this.max.copy(t.max),this},t.prototype.makeEmpty=function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},t.prototype.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},t.prototype.getCenter=function(t){return void 0===t&&(t=new i.Vector3),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},t.prototype.getSize=function(t){return void 0===t&&(t=new i.Vector3),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},t.prototype.setFromArray=function(t){for(var e=1/0,r=1/0,i=1/0,n=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var h=t[s],l=t[s+1],c=t[s+2];h<e&&(e=h),l<r&&(r=l),c<i&&(i=c),h>n&&(n=h),l>o&&(o=l),c>a&&(a=c)}return this.min.set(e,r,i),this.max.set(n,o,a),this},t.prototype.setFromCenterAndSize=function(t,e){var r=(new i.Vector3).copy(e).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this},t.prototype.setFromPoints=function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},t.prototype.setFromObject=function(t){return this.makeEmpty(),this.expandByObject(t)},t.prototype.expandByPoint=function(t){return this.min.min(t),this.max.max(t),this},t.prototype.expandByVector=function(t){return this.min.sub(t),this.max.add(t),this},t.prototype.expandByScalar=function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},t.prototype.expandByObject=function(t){var e=this,r=new i.Vector3;return t.updateWorldMatrix(),function t(i){var n=i.geometry;if(void 0!==n&&n._vertices)for(var o=n._vertices,a=0;a<o.length;a+=3)r.set(o[a],o[a+1],o[a+2]).applyMatrix4(i._worldMatrix),e.expandByPoint(r);for(var s=0;s<i.children.length;s++)t(i.children[s])}(t),e},t.prototype.containsPoint=function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},t.prototype.containsBox=function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},t.prototype.intersectsBox=function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},t.prototype.intersectsSphere=function(t){var e=new i.Vector3;return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius},t.prototype.clampPoint=function(t,e){return void 0===e&&(e=new i.Vector3),e.copy(t).clamp(this.min,this.max)},t.prototype.distanceToPoint=function(t){return(new i.Vector3).copy(t).clamp(this.min,this.max).sub(t).length()},t.prototype.getBoundingSphere=function(t){void 0===t&&(t=new n.Sphere);var e=new i.Vector3;return this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t},t.prototype.intersect=function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},t.prototype.union=function(t){return this.min.min(t.min),this.max.max(t.max),this},t.prototype.applyMatrix4=function(t){var e=[new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3];return this.isEmpty()||(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e)),this},t.prototype.translate=function(t){return this.min.add(t),this.max.add(t),this},t.prototype.equals=function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},t}();e.Box3=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.PerspectiveCamera=void 0;var o=function(t){function e(e,r,i,n){void 0===e&&(e=50),void 0===r&&(r=1),void 0===i&&(i=.1),void 0===n&&(n=2e3);var o=t.call(this)||this;return o.fov=e,o.aspect=r,o.near=i,o.far=n,o._instanceType="PerspectiveCamera",o.zoom=1,o.focus=10,o.updateProjectionMatrix(),o}return n(e,t),e.prototype.set=function(t,e,r,i){void 0===t&&(t=50),void 0===e&&(e=1),void 0===r&&(r=.1),void 0===i&&(i=2e3),this.fov=t,this.aspect=e,this.near=r,this.far=i,this.zoom=1,this.focus=10,this.updateProjectionMatrix()},e.prototype.copy=function(e,r){return void 0===r&&(r=!0),t.prototype.copy.call(this,e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.updateProjectionMatrix(),this},e.prototype.updateProjectionMatrix=function(){this.projectionMatrix.setPerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.setInverseOf(this.projectionMatrix)},e}(r(176).Camera);e.PerspectiveCamera=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.UniformType=e.ShaderMaterial=e.defaultFragmentShader3d=e.defaultVertexShader3d=void 0;var o=r(4),a=r(6);e.defaultVertexShader3d="attribute vec3 aPosition;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uModelMatrix;\nvoid main() {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4( aPosition, 1.0 );\n}",e.defaultFragmentShader3d="void main() {\n    gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";var s=function(t){function r(r,i,n){void 0===r&&(r=e.defaultVertexShader3d),void 0===i&&(i=e.defaultFragmentShader3d),void 0===n&&(n={});var o=t.call(this)||this;return o.vertexShader=r,o.fragmentShader=i,o.uniforms=n,o.shaders={},o.isShaderMaterial=!0,o.vertexShader=r||e.defaultVertexShader3d,o.fragmentShader=i||e.defaultFragmentShader3d,o._instanceType="ShaderMaterial",o}return n(r,t),r.prototype.getShader=function(t){var e=t.CONTEXT_UID;return this.shaders[e]||(this.shaders[e]=new a.GLShader(t.gl,this.vertexShader,this.fragmentShader),this.shaders[e]._glShaderKey="customShaderid"+e+"instanceId"+this.instanceId),this.shaders[e]},r.prototype.destroy=function(){for(var t in this.shaders)this.shaders[t].destroy(),delete this.shaders[t];this.shaders=null,this.vertexShader=null,this.fragmentShader=null},r}(o.HashObject);e.ShaderMaterial=s,function(t){t.float="f",t.texture="t",t.color="c",t.vector2="v2",t.vector3="v3",t.vector4="v4",t.matrix4="m4"}(e.UniformType||(e.UniformType={}))},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.VertexAttachment=e.Attachment=void 0;var o=function(t){this.name=t};e.Attachment=o;var a=function(t){function e(r){var i=t.call(this,r)||this;return i.id=(65535&e.nextID++)<<11,i.worldVerticesLength=0,i.deformAttachment=i,i}return n(e,t),e.prototype.applyDeform=function(t){return this==t},e.prototype.computeWorldVerticesOld=function(t,e,r){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2,r)},e.prototype.computeWorldVertices=function(t,e,r,i,n,o,a){r=n+(r>>1)*o;var s=t.deform,u=this.vertices,h=this.bones;if(null!=h){for(var l=0,c=0,f=0;f<e;f+=2){l+=(v=h[l])+1,c+=v}if(0==s.length)for(S=n,T=3*c;S<r;S+=o){var p=0,d=0,v=h[l++];for(v+=l;l<v;l++,T+=3){g=a[h[l]].matrix,P=u[T],A=u[T+1];var y=u[T+2];p+=(P*g.a+A*g.c+g.tx)*y,d+=(P*g.b+A*g.d+g.ty)*y}i[S]=p,i[S+1]=d}else for(var _=s,m=(S=n,T=3*c,c<<1);S<r;S+=o){p=0,d=0,v=h[l++];for(v+=l;l<v;l++,T+=3,m+=2){g=a[h[l]].matrix,P=u[T]+_[m],A=u[T+1]+_[m+1],y=u[T+2];p+=(P*g.a+A*g.c+g.tx)*y,d+=(P*g.b+A*g.d+g.ty)*y}i[S]=p,i[S+1]=d}}else{s.length>0&&(u=s);for(var g,x=(g=t.bone.matrix).tx,b=g.ty,M=g.a,T=g.c,w=g.b,E=g.d,O=e,S=n;S<r;O+=2,S+=o){var P=u[O],A=u[O+1];i[S]=P*M+A*T+x,i[S+1]=P*w+A*E+b}}},e.nextID=0,e}(o);e.VertexAttachment=a},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ObservablePoint=void 0;var o=function(t){function e(e,r,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var o=t.call(this)||this;return o._instanceType="ObservablePoint",o._x=i,o._y=n,o.cb=e,o.scope=r,o}return n(e,t),e.prototype.set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t);var r=t||0,i=e||0;this._x===r&&this._y===i||(this._x=r,this._y=i,this.cb.call(this.scope))},e.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){},e}(r(4).HashObject);e.ObservablePoint=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var o=r(4),a=r(29),s=r(0),u=function(t){function e(e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=t.call(this)||this;o.x=0,o.y=0,o.width=0,o.height=0;var a=o;return a._instanceType="Rectangle",a.x=e,a.y=r,a.height=n,a.width=i,o.type=s.SHAPES.RECT,o}return n(e,t),e.prototype.clear=function(){this.x=0,this.y=0,this.width=0,this.height=0},e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),e.prototype.isPointIn=function(t){var e=this;return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height},e.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(n-i,0)},e.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},e.createFromRects=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0==t.length)return null;if(1==t.length)return t[0];for(var r=t[0],i=r.x,n=r.y,o=r.width,a=r.height,s=void 0,u=void 0,h=void 0,l=void 0,c=1;c<t.length;c++)(t[c].width||t[c].height)&&(s=i+o,h=n+a,u=t[c].x+t[c].width,l=t[c].y+t[c].height,(i>t[c].x||0==i&&0==o)&&(i=t[c].x),(n>t[c].y||0==n&&0==a)&&(n=t[c].y),s<u&&(s=u),h<l&&(h=l),r.x=i,r.y=n,r.width=s-i,r.height=h-n);return r},e.createFromPoints=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var i=e[0].x,n=e[0].y,o=e[0].x,a=e[0].y,s=1;s<e.length;s++)null!=e[s]&&(i>e[s].x&&(i=e[s].x),n>e[s].y&&(n=e[s].y),o<e[s].x&&(o=e[s].x),a<e[s].y&&(a=e[s].y));return t.x=i,t.y=n,t.width=o-i,t.height=a-n,t},e.createFromVertexData=function(t,e,r){var i=new a.Point,n=e[0],o=e[1],s=e[0],u=e[1];r&&(r.transformPoint(n,o,i),n=s=i.x,o=u=i.y);for(var h=2;h<e.length;h+=2)null!=e[h]&&(i.set(e[h],e[h+1]),r&&r.transformPoint(i.x,i.y,i),n>i.x&&(n=i.x),o>i.y&&(o=i.y),s<i.x&&(s=i.x),u<i.y&&(u=i.y));return t.x=n,t.y=o,t.width=s-n,t.height=u-o,t},e.createRectfrom2Point=function(t,e,r){var i=e.x,n=e.y,o=e.x,a=e.y;return i>r.x&&(i=r.x),n>r.y&&(n=r.y),o<r.x&&(o=r.x),a<r.y&&(a=r.y),t.x=i,t.y=n,t.width=o-i,t.height=a-n,t},e.testRectCross=function(t,e){var r,i,n,o;return r=t.x+t.width/2,i=t.y+t.height/2,n=e.x+e.width/2,o=e.y+e.height/2,Math.abs(r-n)<=t.width/2+e.width/2&&Math.abs(i-o)<=t.height/2+e.height/2},e.prototype.destroy=function(){},e}(o.HashObject);e.Rectangle=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(38),n=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],s=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],h=[];function l(t){return t<0?-1:t>0?1:0}!function(){for(var t=0;t<16;t++){var e=[];h.push(e);for(var r=0;r<16;r++)for(var c=l(n[t]*n[r]+a[t]*o[r]),f=l(o[t]*n[r]+s[t]*o[r]),p=l(n[t]*a[r]+a[t]*s[r]),d=l(o[t]*a[r]+s[t]*s[r]),v=0;v<16;v++)if(n[v]===c&&o[v]===f&&a[v]===p&&s[v]===d){e.push(v);break}}for(t=0;t<16;t++){var y=new i.Matrix;y.set(n[t],o[t],a[t],s[t],0,0),u.push(y)}}();var c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return n[t]},uY:function(t){return o[t]},vX:function(t){return a[t]},vY:function(t){return s[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return h[t][e]},sub:function(t,e){return h[t][c.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?c.S:c.N:2*Math.abs(e)<=Math.abs(t)?t>0?c.E:c.W:e>0?t>0?c.SE:c.SW:t>0?c.NE:c.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=u[c.inv(e)];n.tx=r,n.ty=i,t.append(n)}};e.default=c},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.FloatDisplay=void 0;var o=r(8),a=function(t){function e(){var e=t.call(this)||this;e.htmlElement=null,e._isAdded=!1;var r=e;return r._instanceType="FloatDisplay",r.addEventListener(o.Event.REMOVED_FROM_STAGE,(function(t){r.htmlElement&&(r.htmlElement.style.display="none")})),r.addEventListener(o.Event.ADDED_TO_STAGE,(function(t){if(r.htmlElement){var e=r.htmlElement.style;r._isAdded?r.htmlElement&&r.visible&&(e.display="block"):(r._isAdded=!0,r.stage.rootDiv?r.stage.rootDiv.insertBefore(r.htmlElement,r.stage.rootDiv.childNodes[0]):document.body.appendChild(r.htmlElement))}})),e._transformID=-1,e}return n(e,t),e.prototype.init=function(t){var e,r=this;e="string"==typeof t?document.getElementById(t):"Video"==t._instanceType?t.media:t,r.htmlElement&&r.removeHtmlElement();var i=e.style;i.position="absolute",i.display="none",i.transformOrigin=i.WebkitTransformOrigin="0 0 0";var n=r.getStyle(e,"width"),o=r.getStyle(e,"height"),a=0,s=0;n.indexOf("px")&&(a=parseInt(n)),o.indexOf("px")&&(s=parseInt(o)),r._localBoundsSelf.width=a,r._localBoundsSelf.height=s,r.htmlElement=e,r.stage&&(r._isAdded=!0,r.stage.rootDiv?r.stage.rootDiv.insertBefore(r.htmlElement,r.stage.rootDiv.childNodes[0]):document.body.appendChild(r.htmlElement))},e.prototype.getStyle=function(t,e){if(t.style[e])return t.style[e];if(document.defaultView&&document.defaultView.getComputedStyle){e=(e=e.replace(/([A-Z])/g,"-$1")).toLowerCase();var r=document.defaultView.getComputedStyle(t,"");return r&&r.getPropertyValue(e)}return null},e.prototype.updateStyle=function(){var t=this,e=t.htmlElement;if(e){var r=e.style,i=t.visible;if(t.stage||(i=!1),i)for(var n=t.parent;n;){if(!n.visible){i=!1;break}n=n.parent}var o=i?"block":"none";if(o!=r.display&&(r.display=o),i){if(this._transformID!=this.transform._worldID){this._transformID=this.transform._worldID;var a=t.transform.worldMatrix,s=t.stage._dpi||t.stage.dpi;r.transform=r.webkitTransform="matrix("+(a.a/s).toFixed(4)+","+(a.b/s).toFixed(4)+","+(a.c/s).toFixed(4)+","+(a.d/s).toFixed(4)+","+(a.tx/s).toFixed(4)+","+(a.ty/s).toFixed(4)+")"}r.opacity=t._worldAlpha}}},e.prototype.removeHtmlElement=function(){var t=this,e=t.htmlElement;e&&(e.style.display="none",e.parentNode&&e.parentNode.removeChild(e),t._isAdded=!1,t.htmlElement=null)},e.prototype.renderCanvas=function(){this.updateStyle()},e.prototype.renderWebGL=function(){this.updateStyle()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeHtmlElement()},e}(r(19).DisplayObject);e.FloatDisplay=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.judgeCcw=e.holePath=e.CanvasGraphicsRenderer=void 0;var i=r(0),n=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t._worldAlpha,s=t.transform.worldMatrix;r.setTransform(s.a,s.b,s.c,s.d,s.tx,s.ty),e.setBlendMode(t.blendMode);for(var u=0;u<t.graphicsData.length;u++){var h=t.graphicsData[u],l=h.shape,c=h.fillStyle,f=h.lineStyle,p=c.color,d=f.color;r.lineWidth=f.width;var v=!0;if(h.type===i.SHAPES.POLY){r.beginPath();var y=l.points;r.moveTo(y[0],y[1]);for(var _=1;_<y.length/2;++_)r.lineTo(y[2*_],y[2*_+1]);v=!a(y)}else if(h.type===i.SHAPES.RECT){if(!h.holes.length){c.visible&&(r.globalAlpha=c.alpha*n,r.fillStyle="#"+("00000"+(0|p).toString(16)).substr(-6),r.fillRect(l.x,l.y,l.width,l.height)),f.visible&&(r.globalAlpha=f.alpha*n,r.strokeStyle="#"+("00000"+(0|d).toString(16)).substr(-6),r.strokeRect(l.x,l.y,l.width,l.height));continue}r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(l.x+l.width,l.y),r.lineTo(l.x+l.width,l.y+l.height),r.lineTo(l.x,l.y+l.height),r.lineTo(l.x,l.y)}else if(h.type===i.SHAPES.CIRC)r.beginPath(),r.arc(l.x,l.y,l.radius,0,2*Math.PI,!1);else if(h.type===i.SHAPES.ELIP){var m=2*l.width,g=2*l.height,x=l.x-m/2,b=l.y-g/2;r.beginPath();var M=m/2*.5522848,T=g/2*.5522848,w=x+m,E=b+g,O=x+m/2,S=b+g/2;r.moveTo(x,S),r.bezierCurveTo(x,S-T,O-M,b,O,b),r.bezierCurveTo(O+M,b,w,S-T,w,S),r.bezierCurveTo(w,S+T,O+M,E,O,E),r.bezierCurveTo(O-M,E,x,S+T,x,S)}else if(h.type===i.SHAPES.RREC){var P=l.x,A=l.y,C=l.width,D=l.height,R=l.radius,I=Math.min(C,D)/2|0;R=R>I?I:R,r.beginPath(),r.moveTo(P,A+R),r.quadraticCurveTo(P,A,P+R,A),r.lineTo(P+C-R,A),r.quadraticCurveTo(P+C,A,P+C,A+R),r.lineTo(P+C,A+D-R),r.quadraticCurveTo(P+C,A+D,P+C-R,A+D),r.lineTo(P+R,A+D),r.quadraticCurveTo(P,A+D,P,A+D-R),r.lineTo(P,A+R)}for(var j=0;j<h.holes.length;j++)o(h.holes[j],r,v);c.visible&&(r.globalAlpha=c.alpha*n,r.fillStyle="#"+("00000"+(0|p).toString(16)).substr(-6),r.fill()),f.visible&&(l.closed&&r.closePath(),r.globalAlpha=f.alpha*n,r.strokeStyle="#"+("00000"+(0|d).toString(16)).substr(-6),r.stroke())}},t.prototype.destroy=function(){this.renderer=null},t}();function o(t,e,r){void 0===r&&(r=!0);var n=t.type,o=t.shape;switch(n){case i.SHAPES.POLY:var s=o.points;if(r==a(s)){e.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;++u)e.lineTo(s[2*u],s[2*u+1])}else{e.moveTo(s[s.length-2],s[s.length-1]);for(u=s.length/2-2;u>=0;--u)e.lineTo(s[2*u],s[2*u+1])}s[0]===s[s.length-2]&&s[1]===s[s.length-1]||e.closePath();break;case i.SHAPES.RECT:e.moveTo(o.x,o.y),r?(e.lineTo(o.x,o.y+o.height),e.lineTo(o.x+o.width,o.y+o.height),e.lineTo(o.x+o.width,o.y),e.lineTo(o.x,o.y)):(e.lineTo(o.x+o.width,o.y),e.lineTo(o.x+o.width,o.y+o.height),e.lineTo(o.x,o.y+o.height),e.lineTo(o.x,o.y));break;case i.SHAPES.CIRC:e.moveTo(o.x+o.radius,o.y),e.arc(o.x,o.y,o.radius,0,2*Math.PI,r);break;case i.SHAPES.ELIP:var h=2*o.width,l=2*o.height,c=o.x-h/2,f=o.y-l/2,p=h/2*.5522848,d=l/2*.5522848,v=c+h,y=f+l,_=c+h/2,m=f+l/2;e.moveTo(c,m),r?(e.bezierCurveTo(_-p,y,c,m+d,_,y),e.bezierCurveTo(v,m+d,_+p,y,v,m),e.bezierCurveTo(_+p,f,v,m-d,_,f),e.bezierCurveTo(c,m-d,_-p,f,c,m)):(e.bezierCurveTo(c,m-d,_-p,f,_,f),e.bezierCurveTo(_+p,f,v,m-d,v,m),e.bezierCurveTo(v,m+d,_+p,y,_,y),e.bezierCurveTo(_-p,y,c,m+d,c,m));break;case i.SHAPES.RREC:var g=o.x,x=o.y,b=o.width,M=o.height,T=o.radius,w=Math.min(b,M)/2|0;T=T>w?w:T,e.moveTo(g,x+T),r?(e.lineTo(g,x+M-T),e.quadraticCurveTo(g,x+M,g+T,x+M),e.lineTo(g+b-T,x+M),e.quadraticCurveTo(g+b,x+M,g+b,x+M-T),e.lineTo(g+b,x+T),e.quadraticCurveTo(g+b,x,g+b-T,x),e.lineTo(g+T,x),e.quadraticCurveTo(g,x,g,x+T)):(e.quadraticCurveTo(g,x,g+T,x),e.lineTo(g+b-T,x),e.quadraticCurveTo(g+b,x,g+b,x+T),e.lineTo(g+b,x+M-T),e.quadraticCurveTo(g+b,x+M,g+b-T,x+M),e.lineTo(g+T,x+M),e.quadraticCurveTo(g,x+M,g,x+M-T),e.lineTo(g,x+T))}}function a(t){var e=[];t[0]===t[t.length-2]&&(t[1],t[t.length-1]);for(var r=0;r<t.length-2;r+=2)e.push(t[r+2]-t[r],t[r+3]-t[r+1]);t[0]===t[t.length-2]&&t[1]===t[t.length-1]||e.push(t[0]-t[t.length-2],t[1]-t[t.length-1]);var i=0;for(r=0;r<e.length-2;r+=2)i=i+e[r]*e[r+3]-e[r+1]*e[r+2];return!((i=i+e[e.length-2]*e[1]-e[e.length-1]*e[0])>0)}e.CanvasGraphicsRenderer=n,e.holePath=o,e.judgeCcw=a},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SystemRenderer=void 0;var o=r(1),a=r(0),s=r(12),u=function(t){function e(){var e=t.call(this)||this;return e.transparent=!0,e._backgroundColor=0,e._backgroundColorRgba=[0,0,0,0],e._backgroundColorString="#000000",e.backgroundColor=e._backgroundColor,e._tempDisplayObjectParent=new s.default,e._lastObjectRendered=e._tempDisplayObjectParent,e}return n(e,t),e.prototype.resize=function(t,e){this.width=t,this.height=e},e.prototype.render=function(t,e,r){},e.prototype.destroy=function(){this.type=a.RENDERER_TYPE.UNKNOWN,this.transparent=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor!==t&&(this._backgroundColor=t,this._backgroundColorString=o.hex2string(t),o.hex2rgb(t,this._backgroundColorRgba))},enumerable:!1,configurable:!0}),e}(r(13).EventDispatcher);e.SystemRenderer=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canUseNewCanvasBlendModes=void 0;var i=r(22),n=null;function o(t){var e=i.createCanvas();e.width=6,e.height=1;var r=e.getContext("2d");return r.fillStyle=t,r.fillRect(0,0,6,1),e}e.canUseNewCanvasBlendModes=function(){if(null!=n)return n;if("undefined"==typeof document)return n=!1;var t=o("#ff00ff"),e=o("#ffff00"),r=i.createCanvas();r.width=6,r.height=1;var a=r.getContext("2d");a.globalCompositeOperation="multiply",a.drawImage(t,0,0),a.drawImage(e,2,0);var s=a.getImageData(2,0,1,1);if(!s)return n=!1;var u=s.data;return n=255===u[0]&&0===u[1]&&0===u[2]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkMaxIfStatementsInShader=void 0;var i=r(59),n=r(1),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function a(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}e.checkMaxIfStatementsInShader=function(t,e){var r=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var s=n.createCanvas();s.width=1,s.height=1,e=i.createContext(s)}for(var u=e.createShader(e.FRAGMENT_SHADER);;){var h=o.replace(/%forloop%/gi,a(t));if(e.shaderSource(u,h),e.compileShader(u),e.getShaderParameter(u,e.COMPILE_STATUS))break;t=t/2|0}return r&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createContext=void 0,e.createContext=function(t,e){var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchBuffer=void 0;var i=function(){function t(t){this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.BatchBuffer=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GLTexture=void 0;var i=function(){function t(t,e,r,i,o){this.uploadData=function(t,e,r){this.bind();var i=this.gl;if(t instanceof Float32Array){if(!n){if(!i.getExtension("OES_texture_float"))throw new Error("floating point textures not available");n=!0}this.type=i.FLOAT}else this.type=this.type||i.UNSIGNED_BYTE;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||r!==this.height?i.texImage2D(i.TEXTURE_2D,0,this.format,e,r,0,this.format,this.type,t||null):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e,r,this.format,this.type,t||null),this.width=e,this.height=r},this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=r||-1,this.format=i||t.RGBA,this.type=o||t.UNSIGNED_BYTE}return t.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=t.videoWidth||t.width,i=t.videoHeight||t.height;i!==this.height||r!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=r,this.height=i},t.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},t.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},t.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},t.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},t.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},t.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},t.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},t.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},t.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},t.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},t.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},t.fromSource=function(e,r,i){var n=new t(e);return n.premultiplyAlpha=i||!1,n.upload(r),n},t.fromData=function(e,r,i,n){var o=new t(e);return o.uploadData(r,i,n),o},t}();e.GLTexture=i;var n=!1},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compileProgram=void 0,e.compileProgram=function(t,e,r,n){var o=i(t,t.VERTEX_SHADER,e),a=i(t,t.FRAGMENT_SHADER,r),s=t.createProgram();if(t.attachShader(s,o),t.attachShader(s,a),n)for(var u in n)t.bindAttribLocation(s,n[u],u);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error("Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(o),t.deleteShader(a),s};var i=function(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.log(t.getShaderInfoLog(i)),null)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractAttributes=void 0;var i=r(41),n=r(64);e.extractAttributes=function(t,e){for(var r={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var s=t.getActiveAttrib(e,a),u=i.mapType(t,s.type);r[s.name]={type:u,size:n.mapSize(u),location:t.getAttribLocation(e,s.name),pointer:function(e,r,i,n){void 0===e&&(e=t.FLOAT),void 0===r&&(r=!1),void 0===i&&(i=0),void 0===n&&(n=0),t.vertexAttribPointer(this.location,this.size,e,r,i,n)}}}return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapSize=void 0,e.mapSize=function(t){return i[t]};var i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractUniforms=void 0;var i=r(41),n=r(42);e.extractUniforms=function(t,e){for(var r={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),a=0;a<o;a++){var s=t.getActiveUniform(e,a),u=s.name.replace(/\[.*?\]/,""),h=i.mapType(t,s.type);r[u]={type:h,size:s.size,location:t.getUniformLocation(e,u),value:n.defaultValue(h,s.size)}}return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setPrecision=void 0,e.setPrecision=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateUniformAccessObject=void 0,e.generateUniformAccessObject=function(t,e){var r={data:{}};r.gl=t;for(var n=Object.keys(e),o=0;o<n.length;o++){var u=n[o],h=u.split("."),l=h[h.length-1],c=s(h,r),f=e[u];c.data[l]=f,c.gl=t,Object.defineProperty(c,l,{get:i(l),set:a(l,f)})}return r};var i=function(t){return function(){return this.data[t].value}},n={float:function(t,e,r){t.uniform1f(e,r)},vec2:function(t,e,r){t.uniform2f(e,r[0],r[1])},vec3:function(t,e,r){t.uniform3f(e,r[0],r[1],r[2])},vec4:function(t,e,r){t.uniform4f(e,r[0],r[1],r[2],r[3])},int:function(t,e,r){t.uniform1i(e,r)},ivec2:function(t,e,r){t.uniform2i(e,r[0],r[1])},ivec3:function(t,e,r){t.uniform3i(e,r[0],r[1],r[2])},ivec4:function(t,e,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},bool:function(t,e,r){t.uniform1i(e,r)},bvec2:function(t,e,r){t.uniform2i(e,r[0],r[1])},bvec3:function(t,e,r){t.uniform3i(e,r[0],r[1],r[2])},bvec4:function(t,e,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},mat2:function(t,e,r){t.uniformMatrix2fv(e,!1,r)},mat3:function(t,e,r){t.uniformMatrix3fv(e,!1,r)},mat4:function(t,e,r){t.uniformMatrix4fv(e,!1,r)},sampler2D:function(t,e,r){t.uniform1i(e,r)}},o={float:function(t,e,r){t.uniform1fv(e,r)},vec2:function(t,e,r){t.uniform2fv(e,r)},vec3:function(t,e,r){t.uniform3fv(e,r)},vec4:function(t,e,r){t.uniform4fv(e,r)},int:function(t,e,r){t.uniform1iv(e,r)},ivec2:function(t,e,r){t.uniform2iv(e,r)},ivec3:function(t,e,r){t.uniform3iv(e,r)},ivec4:function(t,e,r){t.uniform4iv(e,r)},bool:function(t,e,r){t.uniform1iv(e,r)},bvec2:function(t,e,r){t.uniform2iv(e,r)},bvec3:function(t,e,r){t.uniform3iv(e,r)},bvec4:function(t,e,r){t.uniform4iv(e,r)},sampler2D:function(t,e,r){t.uniform1iv(e,r)},mat4:function(t,e,r){t.uniformMatrix4fv(e,!1,r)}};function a(t,e){return function(r){this.data[t].value=r;var i=this.data[t].location;1===e.size?n[e.type](this.gl,i,r):o[e.type](this.gl,i,r)}}function s(t,e){for(var r=e,i=0;i<t.length-1;i++){var n=r[t[i]]||{data:{}};r[t[i]]=n,r=n}return r}},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(5);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return o.default}});var a=r(127);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return a.default}});var s=r(128);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return s.default}});var u=r(129);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return u.default}});var h=r(130);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return h.default}});var l=r(69);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return l.default}});var c=r(73);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return c.default}});var f=r(131);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return f.default}});var p=r(132);Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return p.default}});var d=r(133);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return d.default}});var v=r(134);Object.defineProperty(e,"BlurFilterNew",{enumerable:!0,get:function(){return v.default}}),n(r(135),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(70),a=r(71),s=r(72),u=function(t){function e(e,r,i,n){var s=this;n=n||5;var u=o.default(n,!0),h=a.default(n);return(s=t.call(this,u,h)||this).resolution=i||1,s._quality=0,s.quality=r||4,s.strength=e||8,s.firstRun=!0,s}return n(e,t),Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,r,i){if(this.firstRun){var n=t.renderer.gl,u=s.default(n);this.vertexSrc=o.default(u,!0),this.fragmentSrc=a.default(u),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,i);else{for(var h=t.getRenderTarget(!0),l=e,c=h,f=0;f<this.passes-1;f++){t.applyFilter(this,l,c,!0);var p=c;c=l,l=p}t.applyFilter(this,l,r,i),t.returnRenderTarget(h)}},e}(r(5).default);e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n");e.default=function(t,e){var r,n=Math.ceil(t/2),o=i,a="";r=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var u=r.replace("%index%",s);a+=u=u.replace("%sampleIndex%",s-(n-1)+".0"),a+="\n"}return o=(o=o.replace("%blur%",a)).replace("%size%",t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},n=["precision mediump float;","varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");e.default=function(t){for(var e,r=i[t],o=r.length,a=n,s="",u=0;u<t;u++){var h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",u+"");e=u,u>=o&&(e=t-u-1),s+=h=h.replace("%value%",r[e]),s+="\n"}return a=(a=a.replace("%blur%",s)).replace("%size%",t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),r=15;r>e;)r-=2;return r}},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(70),a=r(71),s=r(72),u=function(t){function e(e,r,i,n){var s=this;n=n||5;var u=o.default(n,!1),h=a.default(n);return(s=t.call(this,u,h)||this).resolution=i||1,s._quality=0,s.quality=r||4,s.strength=e||8,s.firstRun=!0,s}return n(e,t),Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,r,i){if(this.firstRun){var n=t.renderer.gl,u=s.default(n);this.vertexSrc=o.default(u,!1),this.fragmentSrc=a.default(u),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,i);else{for(var h=t.getRenderTarget(!0),l=e,c=h,f=0;f<this.passes-1;f++){t.applyFilter(this,l,c,!0);var p=c;c=l,l=p}t.applyFilter(this,l,r,i),t.returnRenderTarget(h)}},e}(r(5).default);e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=new i.Matrix,o=function(){function t(t,e){void 0===e&&(e=.5),this._texture=t,this.mapCoord=new i.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=e}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],o=t[i+1];e[i]=n*r.a+o*r.c+r.tx,e[i+1]=n*r.b+o*r.d+r.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,o=e.trim;o&&(n.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(n));var a=e.baseTexture,s=this.uClampFrame,u=this.clampMargin,h=this.clampOffset;return s[0]=(e._frame.x+u+h)/a.width,s[1]=(e._frame.y+u+h)/a.height,s[2]=(e._frame.x+e._frame.width-u+h)/a.width,s[3]=(e._frame.y+e._frame.height-u+h)/a.height,this.uClampOffset[0]=h/a.width,this.uClampOffset[1]=h/a.height,!0},t}();e.default=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=r(144),s=r(76),u=r(2),h=r(78),l=r(1),c=r(0),f=r(19),p=r(9),d=r(30),v=r(149),y=r(150),_=r(151),m=r(152),g=r(153),x=r(80),b=r(154),M=r(155),T=r(12),w=new u.Matrix,E=new u.Point,O=(new Float32Array(4),new Float32Array(4),new Float32Array(3)),S=[],P={};P[c.SHAPES.POLY]=v.default,P[c.SHAPES.CIRC]=y.default,P[c.SHAPES.ELIP]=y.default,P[c.SHAPES.RECT]=_.default,P[c.SHAPES.RREC]=m.default;var A=function(t){function e(){var e=t.call(this)||this;return e._blendMode=c.BLEND_MODES.NORMAL,e.batchTint=-1,e.hitTestByPixel=!0,e.cacheAsBitmap=!0,e._instanceType="Graphics",e._fillStyle=new x.default,e._lineStyle=new b.default,e.tint=16777215,e.batchTint=-1,e._matrix=null,e._holeMode=!1,e._currentPath=null,e.graphicsData=[],e.isUsedToMask=!1,e.boundsPadding=0,e.dirty=0,e.boundsDirty=-1,e.cacheDirty=-1,e.verts=[],e.indices=[],e.batches=[],e.geoBatches=[],e.uvs=[],e.batchDirty=-1,e.shapeIndex=0,e.vertexData=null,e._transformID=-1,e}return n(e,t),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return this._matrix},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t._fillStyle=this._fillStyle,t._lineStyle=this._lineStyle,t.isUsedToMask=this.isUsedToMask,t.boundsPadding=this.boundsPadding,t.dirty=0;for(var r=0;r<this.graphicsData.length;++r)t.graphicsData.push(this.graphicsData[r].clone());return t._currentPath=null,t.updateLocalBoundsSelf(),t},e.prototype.lineStyle=function(t,e,r,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=.5),void 0===n&&(n=!1),this.lineTextureStyle(t,p.default.WHITE,e,r,null,i,n),this},e.prototype.lineTextureStyle=function(t,e,r,i,n,o,a){void 0===t&&(t=0),void 0===e&&(e=p.default.WHITE),void 0===r&&(r=16777215),void 0===i&&(i=1),void 0===n&&(n=null),void 0===o&&(o=.5),void 0===a&&(a=!1),this._currentPath&&this.startPoly();var s=t>0&&i>0;return s?(n&&(n=n.clone()).invert(),this._lineStyle.color=r,this._lineStyle.width=t,this._lineStyle.alpha=i,this._lineStyle.matrix=n,this._lineStyle.texture=e,this._lineStyle.alignment=o,this._lineStyle.native=a,this._lineStyle.visible=s):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this._currentPath){var t=this._currentPath.points,e=this._currentPath.points.length;e>2&&(this.drawShape(this._currentPath),this._currentPath=new h.Polygon,this._currentPath.closed=!1,this._currentPath.points.push(t[e-2],t[e-1]))}else this._currentPath=new h.Polygon,this._currentPath.closed=!1},e.prototype.finishPoly=function(){this._currentPath&&(this._currentPath.points.length>2?(this.drawShape(this._currentPath),this._currentPath=null):this._currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this._currentPath.points[0]=t,this._currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this._currentPath||this.moveTo(0,0);var r=this._currentPath.points,i=r[r.length-2],n=r[r.length-1];return i===t&&n===e||r.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._currentPath?0===this._currentPath.points.length&&(this._currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,r,i){this._initCurve();var n=this._currentPath.points;0===n.length&&this.moveTo(0,0);for(var o=0,a=0,s=n[n.length-2],u=n[n.length-1],h=M.GRAPHICS_CURVES.segmentsCount(M.quadraticCurveLength(s,u,t,e,r,i)),l=1;l<=h;++l){var c=l/h;o=s+(t-s)*c,a=u+(e-u)*c,n.push(o+(t+(r-t)*c-o)*c,a+(e+(i-e)*c-a)*c)}return this},e.prototype.bezierCurveTo=function(t,e,r,i,n,o){this._initCurve();var a=this._currentPath.points,s=a[a.length-2],u=a[a.length-1];a.length-=2;var h=M.GRAPHICS_CURVES.segmentsCount(M.bezierCurveLength(s,u,t,e,r,i,n,o));return M.bezierCurveTo(s,u,t,e,r,i,n,o,h,a),this},e.prototype.arcTo=function(t,e,r,i,n){this._initCurve(t,e);var o=this._currentPath.points,a=o[o.length-2],s=o[o.length-1]-e,u=a-t,h=i-e,l=r-t,c=Math.abs(s*l-u*h);if(c<1e-8||0===n)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var f=s*s+u*u,p=h*h+l*l,d=s*h+u*l,v=n*Math.sqrt(f)/c,y=n*Math.sqrt(p)/c,_=v*d/f,m=y*d/p,g=v*l+y*u,x=v*h+y*s,b=u*(y+_),M=s*(y+_),T=l*(v+m),w=h*(v+m),E=Math.atan2(M-x,b-g),O=Math.atan2(w-x,T-g);this.arc(g+t,x+e,n,E,O,u*h>l*s)}return this},e.prototype.arc=function(t,e,r,i,n,o){if(void 0===o&&(o=!1),i===n)return this;!o&&n<=i?n+=c.PI_2:o&&i<=n&&(i+=c.PI_2);var a=n-i;if(0===a)return this;var s=t+Math.cos(i)*r,u=e+Math.sin(i)*r,h=this._currentPath?this._currentPath.points:null;if(h){var l=Math.abs(h[h.length-2]-s),f=Math.abs(h[h.length-1]-u);l<.001&&f<.001||h.push(s,u)}else this.moveTo(s,u),h=this._currentPath.points;for(var p=M.GRAPHICS_CURVES.segmentsCount(Math.abs(a)*r,40*Math.ceil(Math.abs(a)/c.PI_2)),d=a/(2*p),v=2*d,y=Math.cos(d),_=Math.sin(d),m=p-1,g=m%1/m,x=0;x<=m;++x){var b=d+i+v*(x+g*x),T=Math.cos(b),w=-Math.sin(b);h.push((y*T+_*w)*r+t,(y*-w+_*T)*r+e)}return this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),"string"==typeof t&&(t=l.string2hex(t)),this.beginTextureFill(p.default.WHITE,t,e)},e.prototype.beginTextureFill=function(t,e,r,i){void 0===t&&(t=p.default.WHITE),void 0===e&&(e=16777215),void 0===r&&(r=1),void 0===i&&(i=null),this._currentPath&&this.startPoly();var n=r>0;return n?(this._fillStyle.color=e,this._fillStyle.alpha=r,this._fillStyle.texture=t,this._fillStyle.matrix=i,this._fillStyle.visible=n):(this._fillStyle.reset(),this._fillStyle.alphaBlock=!0),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.endStroke=function(){return this.finishPoly(),this._lineStyle.reset(),this},e.prototype.closePath=function(){var t=this._currentPath;return this._currentPath&&t.close(),this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.drawRect=function(t,e,r,i){return this.drawShape(new u.Rectangle(t,e,r,i))},e.prototype.drawRoundedRect=function(t,e,r,i,n){return this.drawShape(new h.RoundedRectangle(t,e,r,i,n))},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new h.Circle(t,e,r))},e.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new h.Ellipse(t,e,r,i))},e.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof h.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}var n=new h.Polygon(e);return n.closed=r,this.drawShape(n),this},e.prototype.drawStar=function(t,e,r,i,n,o){void 0===o&&(o=0),n=n||i/2;for(var a=-1*Math.PI/2+o,s=2*r,u=c.PI_2/s,h=[],l=0;l<s;l++){var f=l%2?n:i,p=l*u+a;h.push(t+f*Math.cos(p),e+f*Math.sin(p))}return this.drawPolygon(h)},e.prototype.drawShape=function(t){if(this._holeMode){if(!this.graphicsData.length)return this;e=new a.default(t,null,null,this._matrix);this.graphicsData[this.graphicsData.length-1].holes.push(e),this.dirty++}else{var e=new a.default(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix);this.graphicsData.push(e),this.dirty++}return this},e.prototype.clear=function(){if(this.graphicsData.length>0){this.boundsDirty=-1,this.dirty++,this.graphicsData.length=0,this.verts.length=0,this.uvs.length=0,this.indices.length=0,this.shapeIndex=0;for(var t=0;t<this.geoBatches.length;t++){var e=this.geoBatches[t];e.start=0,e.attribStart=0,e.style=null,S.push(e)}this.geoBatches.length=0,this.batches.length=0}return this._currentPath=null,this._matrix=null,this._holeMode=!1,this._currentPath=null,this},e.prototype.isFastRect=function(){return!1},e.prototype._renderWebGL=function(t){if(this.finishPoly(),this.updateBatch(),t.batchManager.setObjectRenderer(t.plugins.batch),this.batches.length){this.calculateVertices(),this.calculateTints();for(var e=0;e<this.batches.length;e++){var r=this.batches[e];r._worldAlpha=this._worldAlpha*r.graAlpha,t.plugins.batch.render(r)}}},e.prototype.updateBatch=function(){if(this.batchDirty!==this.dirty&&0!==this.graphicsData.length){this.batchDirty=this.dirty;var t,e=this.uvs;(t=this.geoBatches.pop())||((t=S.pop()||new C).style=t.style||this.graphicsData[0].fillStyle||this.graphicsData[0].lineStyle);var r=t.style.texture.baseTexture,i=t.style.color+t.style.alpha;this.geoBatches.push(t);for(var n=this.shapeIndex;n<this.graphicsData.length;n++){this.shapeIndex++;var o=this.graphicsData[n],a=P[o.type],s=o.fillStyle,u=o.lineStyle;a.build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var h=0;h<2;h++){var f=0===h?s:u;if(f.visible){var p=f.texture.baseTexture;if(r!==p||f.color+f.alpha!==i){p.wrapMode=c.WRAP_MODES.REPEAT,r=p,i=f.color+f.alpha;var d=this.indices.length,y=this.verts.length/2;t.size=d-t.start,t.attribSize=y-t.attribStart,t.size>0&&(t=S.pop()||new C,this.geoBatches.push(t)),t.style=f,t.start=d,t.attribStart=y}var _=this.verts.length/2;0===h?o.holes.length?(this.proccessHoles(o.holes),v.default.triangulate(o,this)):a.triangulate(o,this):g.default(o,this);var m=this.verts.length/2-_;this.addUvs(this.verts,e,f.texture,_,m,f.matrix)}}}var x=this.indices.length,b=this.verts.length/2;t.size=x-t.start,t.attribSize=b-t.attribStart;for(var M=new Uint16Array(this.indices),T=new Float32Array(this.uvs),w=0;w<this.geoBatches.length;w++){var E=this.geoBatches[w];for(h=0;h<E.size;h++){var O=E.start+h;M[O]=M[O]-E.attribStart}}this._transformID=-1,this.batchTint=-1,this.batches=[],this.vertexData=new Float32Array(this.verts);for(var A=this.blendMode,D=0;D<this.geoBatches.length;D++){var R=this.geoBatches[D],I=R.style.color,j=new Float32Array(this.vertexData.buffer,4*R.attribStart*2,2*R.attribSize),L=new Float32Array(T.buffer,4*R.attribStart*2,2*R.attribSize);E={_vertexData:j,_indices:new Uint16Array(M.buffer,2*R.start,R.size),_uvs:L,_tintRGB:I,_texture:R.style.texture,_worldAlpha:1,_blendMode:A,graAlpha:R.style.alpha,_batchRGB:l.hex2rgb(I)};this.batches[D]=E}}},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=l.hex2rgb(this.tint,O),e=0;e<this.batches.length;e++){var r=this.batches[e],i=r._batchRGB,n=(t[0]*i[0]*255<<16)+(t[1]*i[1]*255<<8)+(0|t[2]*i[2]*255);r._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID;for(var t=this.transform.worldMatrix,e=t.a,r=t.b,i=t.c,n=t.d,o=t.tx,a=t.ty,s=this.verts,u=this.vertexData,h=0,l=0;l<s.length;l+=2){var c=s[l],f=s[l+1];u[h++]=e*c+i*f+o,u[h++]=n*f+r*c+a}}},e.prototype.transformPoints=function(t,e){for(var r=0;r<t.length/2;r++){var i=t[2*r],n=t[2*r+1];t[2*r]=e.a*i+e.c*n+e.tx,t[2*r+1]=e.b*i+e.d*n+e.ty}},e.prototype._renderCanvas=function(t){if(this.finishPoly(),this.cacheAsBitmap){if(this.cacheDirty!=this.dirty){this.cacheDirty=this.dirty;var e=this.mask;this.mask=null,this.cacheAsBitmap=!1;var r=this.alpha;this.alpha=1;var i=this.children;this.children=[],this.generateCanvasTexture(),this.mask=e,this.alpha=r,this.cacheAsBitmap=!0,this.children=i,this.transform._parentID=-1}t.plugins.sprite.render(this)}else t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.updateLocalBoundsSelf();var t=this._localBoundsSelf,e=this.transform.worldMatrix;e.transformPoint(t.x,t.y,f.DisplayObject._p1),e.transformPoint(t.x+t.width,t.y,f.DisplayObject._p2),e.transformPoint(t.x+t.width,t.y+t.height,f.DisplayObject._p3),e.transformPoint(t.x,t.y+t.height,f.DisplayObject._p4),u.Rectangle.createFromPoints(this._bounds,f.DisplayObject._p1,f.DisplayObject._p2,f.DisplayObject._p3,f.DisplayObject._p4)},e.prototype.hitTestPoint=function(e,r){return void 0===r&&(r=!1),this.visible?(i=t.prototype.hitTestPoint.call(this,e,r))?i:r&&!this.mouseEnable?null:(this.updateLocalBoundsSelf(),(i=this.displayObjectHitTestPoint(e,r))?this.hitTestByPixel?this.hitTestPointAccuratly(e,r):i:null):null;var i},e.prototype.hitTestPointAccuratly=function(t,e){e?this.worldMatrix.transformPointInverse(t.x,t.y,E):E.set(t.x,t.y);for(var r=this.graphicsData,i=0;i<r.length;++i){var n=r[i];if((n.fillStyle.visible||n.fillStyle.alphaBlock)&&(n.shape&&n.shape.isPointIn(E))){if(n.holes)for(var o=0;o<n.holes.length;o++){if(n.holes[o].shape.isPointIn(E))return null}return this}}return null},e.prototype.updateLocalBoundsSelf=function(){if(this.boundsDirty!=this.dirty){this.boundsDirty=this.dirty;var t=1/0,e=-1/0,r=1/0,i=-1/0;if(this.graphicsData.length)for(var n=void 0,o=0,a=0,s=0,h=0,l=0;l<this.graphicsData.length;l++){var f=this.graphicsData[l],p=f.type,d=f.lineStyle,v=(f.matrix||u.Matrix.IDENTITY,0);if(d&&d.visible){var y=d.alignment;v=d.width,p===c.SHAPES.POLY?v*=.5+Math.abs(.5-y):v*=Math.max(0,y)}if(n=f.shape,p===c.SHAPES.RECT||p===c.SHAPES.RREC)o=n.x-v/2,a=n.y-v/2,t=o<t?o:t,e=o+(s=n.width+v)>e?o+s:e,r=a<r?a:r,i=a+(h=n.height+v)>i?a+h:i;else if(p===c.SHAPES.CIRC)o=n.x,a=n.y,t=o-(s=n.radius+v/2)<t?o-s:t,e=o+s>e?o+s:e,r=a-(h=n.radius+v/2)<r?a-h:r,i=a+h>i?a+h:i;else if(p===c.SHAPES.ELIP)o=n.x,a=n.y,t=o-(s=n.width+v/2)<t?o-s:t,e=o+s>e?o+s:e,r=a-(h=n.height+v/2)<r?a-h:r,i=a+h>i?a+h:i;else for(var _=n.points,m=0,g=0,x=0,b=0,M=0,T=0,w=0,E=0,O=0;O+2<_.length;O+=2)o=_[O],a=_[O+1],m=_[O+2],g=_[O+3],x=Math.abs(m-o),b=Math.abs(g-a),h=v,(s=Math.sqrt(x*x+b*b))<1e-9||(t=(w=(m+o)/2)-(M=(h/s*b+x)/2)<t?w-M:t,e=w+M>e?w+M:e,r=(E=(g+a)/2)-(T=(h/s*x+b)/2)<r?E-T:r,i=E+T>i?E+T:i)}else t=0,e=0,r=0,i=0;var S=this.boundsPadding;this._localBoundsSelf.x=t-S,this._localBoundsSelf.y=r-S,this._localBoundsSelf.width=e-t+2*S,this._localBoundsSelf.height=i-r+2*S}},e.prototype.generateCanvasTexture=function(t){void 0===t&&(t=c.SCALE_MODES.LINEAR),this.updateLocalBoundsSelf();var e=this._localBoundsSelf;return this._canvasBuffer?this._canvasBuffer.resize(e.width,e.height):this._canvasBuffer=s.default.create(e.width,e.height,t),o||(o=new d.CanvasRenderer(null,0,0)),this.transform.updateLocalMatrix(),w.copy(this.transform.localMatrix),w.invert(),w.tx-=e.x,w.ty-=e.y,o.render(this,this._canvasBuffer,w),this._texture||(this._texture=p.default.fromCanvas(this._canvasBuffer.baseTexture._canvasRenderTarget.canvas,"graphics")),this._texture.baseTexture.update(),this.offsetX=e.x,this.offsetY=e.y,this._texture},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this._matrix=null,this._currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this.vertexData=null,this.geoBatches.length=0,this.geoBatches=null,this.batches.length=0,this.batches=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateLocalBoundsSelf(),Math.abs(this.scale.x)*this._localBoundsSelf.width},set:function(t){this.updateLocalBoundsSelf();var e=this._localBoundsSelf.width;if(0!==e){var r=l.sign(this.scale.x)||1;this.scale.x=r*t/e}else this.scale.x=1;this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateLocalBoundsSelf(),Math.abs(this.scale.y)*this._localBoundsSelf.height},set:function(t){this.updateLocalBoundsSelf();var e=this._localBoundsSelf.height;if(0!==e){var r=l.sign(this.scale.y)||1;this.scale.y=r*t/e}else this.scale.y=1;this._height=t},enumerable:!1,configurable:!0}),e.prototype.proccessHoles=function(t){for(var e=0;e<t.length;e++){var r=t[e];P[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},e.prototype.addUvs=function(t,e,r,i,n,o){for(var a=0,s=e.length,u=r.frame;a<n;){var h=t[2*(i+a)],l=t[2*(i+a)+1];if(o){var c=o.a*h+o.c*l+o.tx;l=o.b*h+o.d*l+o.ty,h=c}a++;var f=r.frame;e.push(h/f.width,l/f.height)}var p=r.baseTexture;(u.width<p.width||u.height<p.height)&&this.adjustUvs(e,r,s,n)},e.prototype.adjustUvs=function(t,e,r,i){for(var n=e.baseTexture,o=1e-6,a=r+2*i,s=e.frame,u=s.width/n.width,h=s.height/n.height,l=s.x/s.width,c=s.y/s.height,f=Math.floor(t[r]+o),p=Math.floor(t[r+1]+o),d=r+2;d<a;d+=2)f=Math.min(f,Math.floor(t[d]+o)),p=Math.min(p,Math.floor(t[d+1]+o));l-=f,c-=p;for(d=r;d<a;d+=2)t[d]=(t[d]+l)*u,t[d+1]=(t[d+1]+c)*h},e}(T.default);e.default=A;var C=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(77),a=r(9),s=r(0),u=function(t){function e(e,r){var i=t.call(this,e,r)||this;return i.valid=!0,i.updateUvs(),i}return n(e,t),e.prototype.resize=function(t,e,r){void 0===r&&(r=!1),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r||this.baseTexture.resize(t,e),this.updateUvs()},e.create=function(t,r,i){return void 0===i&&(i=s.SCALE_MODES.LINEAR),new e(new o.default(t,r,i))},e}(a.default);e.default=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(31),a=r(0),s=function(t){function e(e,r,i){void 0===e&&(e=100),void 0===r&&(r=100),void 0===i&&(i=a.SCALE_MODES.LINEAR);var n=t.call(this,null,i)||this;return n.width=Math.ceil(e),n.height=Math.ceil(r),n.scaleMode=i,n.hasLoaded=!0,n._glRenderTargets={},n._canvasRenderTarget=null,n.valid=!1,n}return n(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.valid&&this.dispatchEvent("update"))},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(o.default);e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(145);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return i.default}});var n=r(146);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return n.default}});var o=r(147);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return o.default}});var a=r(148);Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return a.default}})},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,s,u,h,l,p,v,y=e&&e.length,_=y?e[0]*r:t.length,m=n(t,0,_,r,!0),g=[];if(!m||m.next===m.prev)return g;if(y&&(m=function(t,e,r,i){var a,s,u,h,l,p=[];for(a=0,s=e.length;a<s;a++)u=e[a]*i,h=a<s-1?e[a+1]*i:t.length,(l=n(t,u,h,i,!1))===l.next&&(l.steiner=!0),p.push(d(l));for(p.sort(c),a=0;a<p.length;a++)f(p[a],r),r=o(r,r.next);return r}(t,e,m,r)),t.length>80*r){i=u=t[0],s=h=t[1];for(var x=r;x<_;x+=r)(l=t[x])<i&&(i=l),(p=t[x+1])<s&&(s=p),l>u&&(u=l),p>h&&(h=p);v=0!==(v=Math.max(u-i,h-s))?1/v:0}return a(m,g,r,i,s,v),g}function n(t,e,r,i,n){var o,a;if(n===E(t,e,r,i)>0)for(o=e;o<r;o+=i)a=M(o,t[o],t[o+1],a);else for(o=r-i;o>=e;o-=i)a=M(o,t[o],t[o+1],a);return a&&m(a,a.next)&&(T(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!m(i,i.next)&&0!==_(i.prev,i,i.next))i=i.next;else{if(T(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function a(t,e,r,i,n,c,f){if(t){!f&&c&&function(t,e,r,i){var n=t;do{null===n.z&&(n.z=p(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,a,s,u,h=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,i=r,s=0,e=0;e<h&&(s++,i=i.nextZ);e++);for(u=h;s>0||u>0&&i;)0!==s&&(0===u||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,h*=2}while(a>1)}(n)}(t,i,n,c);for(var d,v,y=t;t.prev!==t.next;)if(d=t.prev,v=t.next,c?u(t,i,n,c):s(t))e.push(d.i/r),e.push(t.i/r),e.push(v.i/r),T(t),t=v.next,y=v.next;else if((t=v)===y){f?1===f?a(t=h(t,e,r),e,r,i,n,c,2):2===f&&l(t,e,r,i,n,c):a(o(t),e,r,i,n,c,1);break}}}function s(t){var e=t.prev,r=t,i=t.next;if(_(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(v(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&_(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function u(t,e,r,i){var n=t.prev,o=t,a=t.next;if(_(n,o,a)>=0)return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,u=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,h=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,l=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,c=p(s,u,e,r,i),f=p(h,l,e,r,i),d=t.prevZ,y=t.nextZ;d&&d.z>=c&&y&&y.z<=f;){if(d!==t.prev&&d!==t.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,y!==t.prev&&y!==t.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,y.x,y.y)&&_(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;y&&y.z<=f;){if(y!==t.prev&&y!==t.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,y.x,y.y)&&_(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function h(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!m(n,o)&&g(n,i,i.next,o)&&x(n,o)&&x(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),T(i),T(i.next),i=t=o),i=i.next}while(i!==t);return i}function l(t,e,r,i,n,s){var u=t;do{for(var h=u.next.next;h!==u.prev;){if(u.i!==h.i&&y(u,h)){var l=b(u,h);return u=o(u,u.next),l=o(l,l.next),a(u,e,r,i,n,s),void a(l,e,r,i,n,s)}h=h.next}u=u.next}while(u!==t)}function c(t,e){return t.x-e.x}function f(t,e){if(e=function(t,e){var r,i=e,n=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>a){if(a=s,s===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===a)return r.prev;var u,h=r,l=r.x,c=r.y,f=1/0;i=r.next;for(;i!==h;)n>=i.x&&i.x>=l&&n!==i.x&&v(o<c?n:a,o,l,c,o<c?a:n,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(n-i.x))<f||u===f&&i.x>r.x)&&x(i,t)&&(r=i,f=u),i=i.next;return r}(t,e)){var r=b(e,t);o(r,r.next)}}function p(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function v(t,e,r,i,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(n-a)*(i-s)>=0}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&g(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&x(t,e)&&x(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)}function _(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function g(t,e,r,i){return!!(m(t,e)&&m(r,i)||m(t,i)&&m(r,e))||_(t,e,r)>0!=_(t,e,i)>0&&_(r,i,t)>0!=_(r,i,e)>0}function x(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function b(t,e){var r=new w(t.i,t.x,t.y),i=new w(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function M(t,e,r,i){var n=new w(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function T(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(t,e,r,i){for(var n=0,o=e,a=r-i;o<r;o+=i)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}Object.defineProperty(e,"__esModule",{value:!0}),e.earcut=void 0,e.earcut=i,i.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,a=Math.abs(E(t,0,o,r));if(n)for(var s=0,u=e.length;s<u;s++){var h=e[s]*r,l=s<u-1?e[s+1]*r:t.length;a-=Math.abs(E(t,h,l,r))}var c=0;for(s=0;s<i.length;s+=3){var f=i[s]*r,p=i[s+1]*r,d=i[s+2]*r;c+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[n][o][a]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9),n=function(){function t(){this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.alphaBlock=this.alphaBlock,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=i.default.WHITE,this.matrix=null,this.visible=!1,this.alphaBlock=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}();e.default=n},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(32),e),n(r(159),e),n(r(82),e),n(r(160),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.calculatePlaneIndices=e.Plane=void 0;var o=function(t){function e(e,r,i){void 0===r&&(r=10),void 0===i&&(i=10);var n=t.call(this,e)||this;return n.verticesX=r||10,n.verticesY=i||10,n.refresh(),n}return n(e,t),e.prototype._refresh=function(){for(var t=this.texture,e=this.verticesX*this.verticesY,r=[],i=[],n=this.verticesX-1,o=this.verticesY-1,s=t.width/n,u=t.height/o,h=0;h<e;h++){var l=h%this.verticesX,c=h/this.verticesX|0;r.push(l*s,c*u),i.push(l/n,c/o)}this._vertices=new Float32Array(r),this._uvs=new Float32Array(i),this._indices=a(this.verticesX,this.verticesY),this._vertexDirty++,this.multiplyUvs()},e}(r(32).Mesh);function a(t,e){for(var r=t-1,i=r*(e-1),n=[],o=0;o<i;o++){var a=o%r,s=o/r|0,u=s*t+a,h=s*t+a+1,l=(s+1)*t+a,c=(s+1)*t+a+1;n.push(u,h,l),n.push(h,c,l)}return new Uint16Array(n)}e.Plane=o,e.calculatePlaneIndices=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,r){this._target=null,this._useTicks=!1,this.ignoreGlobalPause=!1,this.loop=!1,this.pluginData=null,this._steps=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._prevPosition=0,this._stepPosition=0,this.passive=!1,this.initialize(t,e,r)}return t.get=function(e,r,i,n){return void 0===i&&(i=null),void 0===n&&(n=!1),n&&t.removeTweens(e),new t(e,r,i)},t.removeTweens=function(e){if(e.tween_count){for(var r=t._tweens,i=r.length-1;i>=0;i--)r[i]._target==e&&(r[i].paused=!0,r.splice(i,1));e.tween_count=0}},t.removeTweenSelf=function(e){if(e&&e._target&&e._target.tween_count){e.paused=!0;var r=t._tweens,i=r.indexOf(e);i>-1&&r.splice(i,1),e._target.tween_count--}},t.pauseTweens=function(e){if(e.tween_count)for(var r=t._tweens,i=r.length-1;i>=0;i--)r[i]._target==e&&(r[i].paused=!0)},t.resumeTweens=function(e){if(e.tween_count)for(var r=t._tweens,i=r.length-1;i>=0;i--)r[i]._target==e&&(r[i].paused=!1)},t.tick=function(e,r){void 0===r&&(r=!1);var i=e-t._lastTime;t._lastTime=e;for(var n=t._tweens.concat(),o=n.length-1;o>=0;o--){var a=n[o];r&&!a.ignoreGlobalPause||a.paused||a.$tick(a._useTicks?1:i)}return!1},t.flush=function(){var e=Date.now(),r=t._lastTime?e-t._lastTime:16.67;t._lastTime=e;for(var i=t._tweens.concat(),n=i.length-1;n>=0;n--){var o=i[n];o.paused||o.$tick(o._useTicks?1:r)}},t._register=function(e,r){var i=e._target,n=t._tweens;if(r)i&&(i.tween_count=i.tween_count>0?i.tween_count+1:1),n.push(e),t._inited||(t._inited=!0);else{i&&i.tween_count--;for(var o=n.length;o--;)if(n[o]==e)return void n.splice(o,1)}},t.removeAllTweens=function(){for(var e=t._tweens,r=0,i=e.length;r<i;r++){var n=e[r];n.paused=!0,n._target.tween_count=0}e.length=0},t.prototype.initialize=function(e,r,i){this._target=e,r&&(this._useTicks=r.useTicks,this.ignoreGlobalPause=r.ignoreGlobalPause,this.loop=r.loop,r.onChange?this.onChange=r.onChange.bind(r.onChangeObj):this.onChange=null,r.override&&t.removeTweens(e)),this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],r&&r.paused?this.paused=!0:t._register(this,!0),r&&null!=r.position&&this.setPosition(r.position,t.NONE)},t.prototype.setPosition=function(t,e){void 0===e&&(e=1),t<0&&(t=0);var r=t,i=!1;if(r>=this.duration)if(this.loop){var n=r%this.duration;r=r>0&&0===n?this.duration:n}else r=this.duration,i=!0;if(r==this._prevPos)return i;i&&this.setPaused(!0);var o=this._prevPos;if(this.position=this._prevPos=r,this._prevPosition=t,this._target&&this._steps.length>0){for(var a=this._steps.length,s=-1,u=0;u<a&&!("step"==this._steps[u].type&&(s=u,this._steps[u].t<=r&&this._steps[u].t+this._steps[u].d>=r));u++);for(u=0;u<a;u++)if("action"==this._steps[u].type)0!=e&&(this._useTicks?this._runAction(this._steps[u],r,r):1==e&&r<o?(o!=this.duration&&this._runAction(this._steps[u],o,this.duration),this._runAction(this._steps[u],0,r,!0)):this._runAction(this._steps[u],o,r));else if("step"==this._steps[u].type&&s==u){var h=this._steps[s];this._updateTargetProps(h,Math.min((this._stepPosition=r-h.t)/h.d,1))}}return this.onChange&&this.onChange(),i},t.prototype._runAction=function(t,e,r,i){void 0===i&&(i=!1);var n=e,o=r;e>r&&(n=r,o=e);var a=t.t;(a==o||a>n&&a<o||i&&a==e)&&t.f.apply(t.o,t.p)},t.prototype._updateTargetProps=function(e,r){var i,n,o,a,s,u;if(e||1!=r){if(this.passive=!!e.v,this.passive)return;e.e&&(r=e.e(r,0,1,1)),i=e.p0,n=e.p1}else this.passive=!1,i=n=this._curQueueProps;for(var h in this._initQueueProps){null==(a=i[h])&&(i[h]=a=this._initQueueProps[h]),null==(s=n[h])&&(n[h]=s=a),o=a==s||0==r||1==r||"number"!=typeof a?1==r?s:a:a+(s-a)*r;var l=!1;if(u=t._plugins[h])for(var c=0,f=u.length;c<f;c++){var p=u[c].tween(this,h,o,i,n,r,!!e&&i==n,!e);p==t.IGNORE?l=!0:o=p}l||(this._target[h]=o)}},t.prototype.setPaused=function(e){return this.paused==e||(this.paused=e,t._register(this,!e)),this},t.prototype._cloneProps=function(t){var e={};for(var r in t)e[r]=t[r];return e},t.prototype._addStep=function(t){return t.d>0&&(t.type="step",this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},t.prototype._appendQueueProps=function(e){var r,i,n,o,a;for(var s in e)if(void 0===this._initQueueProps[s]){if(i=this._target[s],r=t._plugins[s])for(n=0,o=r.length;n<o;n++)i=r[n].init(this,s,i);this._initQueueProps[s]=this._curQueueProps[s]=void 0===i?null:i}else i=this._curQueueProps[s];for(var s in e){if(i=this._curQueueProps[s],r=t._plugins[s])for(a=a||{},n=0,o=r.length;n<o;n++)r[n].step&&r[n].step(this,s,i,e[s],a);this._curQueueProps[s]=e[s]}return a&&this._appendQueueProps(a),this._curQueueProps},t.prototype._addAction=function(t){return t.t=this.duration,t.type="action",this._steps.push(t),this},t.prototype._set=function(t,e){for(var r in t)e[r]=t[r]},t.prototype.wait=function(t,e){if(null==t||t<=0)return this;var r=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:r,p1:r,v:e})},t.prototype.to=function(t,e,r){return void 0===r&&(r=void 0),(isNaN(e)||e<0)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:r,p1:this._cloneProps(this._appendQueueProps(t))}),this.set(t)},t.prototype.by=function(t,e,r){for(var i in void 0===e&&(e=0),void 0===r&&(r=void 0),t)t[i]+=this._curQueueProps[i]||this._target[i];return this.to(t,e,r)},t.prototype.call=function(t,e,r){return void 0===e&&(e=void 0),void 0===r&&(r=void 0),this._addAction({f:t,p:r||[],o:e||this._target})},t.prototype.set=function(t,e){return void 0===e&&(e=null),this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,e||this._target]})},t.prototype.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},t.prototype.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},t.prototype.$tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},t.NONE=0,t.LOOP=1,t.REVERSE=2,t._tweens=[],t.IGNORE={},t._plugins={},t._inited=!1,t._lastTime=0,t}();e.default=i},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollPage=void 0;var o=r(12),a=r(75),s=r(24),u=r(8),h=r(45),l=function(t){function e(e,r,i,n,h){void 0===n&&(n=!0),void 0===h&&(h=!1);var l=t.call(this)||this;l.isVertical=!0,l.viewWidth=0,l.viewHeight=0,l._tweenId=0,l.maxDistance=1040,l.distance=0,l.minDis=2,l.maskObj=new a.default,l.view=new o.default,l.lastValue=0,l.speed=0,l.addSpeed=0,l.isStop=!0,l.maxSpeed=100,l.fSpeed=20,l.paramXY="y",l.stopTimes=-1,l.isMouseDownState=0,l.autoScroll=!1,l.isSpringBack=!0;var c=l;return c._instanceType="ScrollPage",c.addChild(c.maskObj),c.addChild(c.view),h||(c.view.mask=c.maskObj,c.maskObj.isUsedToMask=!1),c.maskObj.alpha=0,c.maxDistance=i,c.setViewRect(e,r,n),c.addEventListener(u.Event.ADDED_TO_STAGE,(function(t){c.stage.addEventListener(s.MouseEvent.MOUSE_MOVE,c.onMouseEvent,c),c.stage.addEventListener(s.MouseEvent.MOUSE_UP,c.onMouseEvent,c)})),c.addEventListener(u.Event.REMOVED_FROM_STAGE,(function(t){c.stage.removeEventListener(s.MouseEvent.MOUSE_MOVE,c.onMouseEvent,c),c.stage.removeEventListener(s.MouseEvent.MOUSE_UP,c.onMouseEvent,c)})),c.addEventListener(s.MouseEvent.MOUSE_DOWN,c.onMouseEvent,c,!1),c.addEventListener(u.Event.ENTER_FRAME,(function(){var t=c.view;if(!c.autoScroll){if(!c.isSpringBack){if(t[c.paramXY]>0)return c.addSpeed=0,c.speed=0,c.isStop=!0,void(t[c.paramXY]=0);if(t[c.paramXY]<c.distance-c.maxDistance)return c.addSpeed=0,c.speed=0,c.isStop=!0,t[c.paramXY]=c.distance-c.maxDistance,void(c.distance>c.maxDistance&&(t[c.paramXY]=0))}if(c.isStop)c.stopTimes>=0&&(c.stopTimes++,c.stopTimes>=15&&(c.speed=0,(t[c.paramXY]>0||t[c.paramXY]<c.distance-c.maxDistance)&&(c.isStop=!1,c.stopTimes=-1,c.isMouseDownState=0)));else if(Math.abs(c.speed)>0)t[c.paramXY]+=c.speed,t[c.paramXY]>0||t[c.paramXY]<c.distance-c.maxDistance?c.speed+=c.addSpeed*c.fSpeed:c.speed+=c.addSpeed,c.speed*c.addSpeed>0&&(c.dispatchEvent(u.Event.SCROLL_STOP),c.speed=0);else if(0!=c.addSpeed){if(t[c.paramXY]>0||t[c.paramXY]<c.distance-c.maxDistance){var e=0;t[c.paramXY]<c.distance-c.maxDistance&&c.distance<c.maxDistance&&(e=c.distance-c.maxDistance),t[c.paramXY]+=.4*(e-t[c.paramXY]),Math.abs(e-t[c.paramXY])<.1&&(c.isStop=!0,c.addSpeed>0?c.dispatchEvent(u.Event.SCROLL_TO_END):c.dispatchEvent(u.Event.SCROLL_TO_HEAD))}}else c.isStop=!0}})),l}return n(e,t),e.prototype.setViewRect=function(t,e,r){var i=this;i.maskObj.clear(),i.maskObj.beginFill("#000000"),i.maskObj.drawRect(0,0,t,e),i.viewWidth=t,i.viewHeight=e,i.maskObj.endFill(),i.isVertical=r,r?(i.distance=i.viewHeight,i.paramXY="y"):(i.distance=i.viewWidth,i.paramXY="x"),i.isVertical=r},e.prototype.onMouseEvent=function(t){var e=this,r=e.view;if(t.type==s.MouseEvent.MOUSE_DOWN)t.stopPropagation(),e.isStop||(e.isStop=!0),e.autoScroll&&(e.autoScroll=!1,h.Tween.removeTweens(e.view)),e.isVertical?e.lastValue=t.stageY:e.lastValue=t.stageX,e.speed=0,e.isMouseDownState=1;else if(t.type==s.MouseEvent.MOUSE_MOVE){if(0==e.isMouseDownState)return;1==e.isMouseDownState&&e.dispatchEvent(u.Event.SCROLL_START),e.isMouseDownState=2;var i=void 0;if(i=e.isVertical?t.stageY:t.stageX,e.speed=i-e.lastValue,e.speed>e.minDis?(e.addSpeed=-2,e.speed>e.maxSpeed&&(e.speed=e.maxSpeed)):e.speed<-e.minDis?(e.speed<-e.maxSpeed&&(e.speed=-e.maxSpeed),e.addSpeed=2):e.speed=0,0!=e.speed){var n=1;(r[e.paramXY]>0||r[e.paramXY]<e.distance-e.maxDistance)&&(n=.2),r[e.paramXY]+=(i-e.lastValue)*n}e.lastValue=i,e.stopTimes=0}else e.isStop=!1,e.stopTimes=-1,0==e.speed&&2==e.isMouseDownState&&e.dispatchEvent(u.Event.SCROLL_STOP),e.isMouseDownState=0},e.prototype.scrollTo=function(t,e){var r;void 0===e&&(e=0);var i=this,n="x"==i.paramXY?i.viewWidth:i.viewHeight;t<0?t=0:t>i.maxDistance-n&&(t=i.maxDistance-n),Math.abs(i.view[i.paramXY]+t)>2&&(i.autoScroll=!0,i.isStop=!0,i.isMouseDownState=0,h.Tween.get(i.view).to((r={},r[i.paramXY]=-t,r),e).call((function(){i.view[i.paramXY]=-t,i.autoScroll=!1})),0==i.speed&&i.dispatchEvent(u.Event.SCROLL_START))},e.prototype.destroy=function(){h.Tween.removeTweens(this.view);var e=this;e.maskObj.destroy(),e.view.destroy(),e.maskObj=null,e.view=null,t.prototype.destroy.call(this)},e}(o.default);e.ScrollPage=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBezierEasing=void 0,e.getBezierEasing=function(){var t={};var e="function"==typeof Float32Array;function r(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function n(t){return 3*t}function o(t,e,o){return((r(e,o)*t+i(e,o))*t+n(e))*t}function a(t,e,o){return 3*r(e,o)*t*t+2*i(e,o)*t+n(e)}function s(t){this._p=t,this._mSampleValues=e?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return s.prototype={get:function(t){var e=this._p[0],r=this._p[1],i=this._p[2],n=this._p[3];return this._precomputed||this._precompute(),e===r&&i===n?t:0===t?0:1===t?1:o(this._getTForX(t),r,n)},_precompute:function(){var t=this._p[0],e=this._p[1],r=this._p[2],i=this._p[3];this._precomputed=!0,t===e&&r===i||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],r=0;r<11;++r)this._mSampleValues[r]=o(.1*r,t,e)},_getTForX:function(t){for(var e=this._p[0],r=this._p[2],i=this._mSampleValues,n=0,s=1;10!==s&&i[s]<=t;++s)n+=.1;var u=n+.1*((t-i[--s])/(i[s+1]-i[s])),h=a(u,e,r);return h>=.001?function(t,e,r,i){for(var n=0;n<4;++n){var s=a(e,r,i);if(0===s)return e;e-=(o(e,r,i)-t)/s}return e}(t,u,e,r):0===h?u:function(t,e,r,i,n){var a,s,u=0;do{(a=o(s=e+(r-e)/2,i,n)-t)>0?r=s:e=s}while(Math.abs(a)>1e-7&&++u<10);return s}(t,n,n+.1,e,r)}},function(e,r,i,n,o){var a=o||("bez_"+e+"_"+r+"_"+i+"_"+n).replace(/\./g,"p");if(t[a])return t[a];var u=new s([e,r,i,n]);return t[a]=u,u}}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Euler=e.RotationOrders=void 0;var i,n=r(34),o=r(3),a=r(10),s=r(1);!function(t){t.XYZ="XYZ",t.YZX="YZX",t.ZXY="ZXY",t.XZY="XZY",t.YXZ="YXZ",t.ZYX="ZYX"}(i=e.RotationOrders||(e.RotationOrders={}));var u=function(){function t(t,e,r,o){var s,u;void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===o&&(o=i.XYZ),this._x=t,this._y=e,this._z=r,this._order=o,this.setFromQuaternion=(s=new a.Matrix4,function(t,e,r){return s.makeRotationFromQuaternion(t),this.setFromRotationMatrix(s,e,r)}),this.reorder=(u=new n.Quaternion,function(t){return u.setFromEuler(this),this.setFromQuaternion(u,t)})}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e,r,i){return this._x=t,this._y=e,this._z=r,this._order=i||this._order,this.onChangeCallback(),this},t.prototype.clone=function(){return new t(this._x,this._y,this._z,this._order)},t.prototype.copy=function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},t.prototype.setFromRotationMatrix=function(t,e,r){var i=t.elements,n=i[0],o=i[4],a=i[8],u=i[1],h=i[5],l=i[9],c=i[2],f=i[6],p=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(s.clamp(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-o,n)):(this._x=Math.atan2(f,h),this._z=0)):"YXZ"===e?(this._x=Math.asin(-s.clamp(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(a,p),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-c,n),this._z=0)):"ZXY"===e?(this._x=Math.asin(s.clamp(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(u,n))):"ZYX"===e?(this._y=Math.asin(-s.clamp(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(f,p),this._z=Math.atan2(u,n)):(this._x=0,this._z=Math.atan2(-o,h))):"YZX"===e?(this._z=Math.asin(s.clamp(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-l,h),this._y=Math.atan2(-c,n)):(this._x=0,this._y=Math.atan2(a,p))):"XZY"===e?(this._z=Math.asin(-s.clamp(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,h),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-l,p),this._y=0)):console.warn("Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==r&&this.onChangeCallback(),this},t.prototype.setFromVector3=function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},t.prototype.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},t.prototype.fromArray=function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},t.prototype.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},t.prototype.toVector3=function(t){return t?t.set(this._x,this._y,this._z):new o.Vector3(this._x,this._y,this._z)},t.prototype.onChange=function(t){return this.onChangeCallback=t,this},t.prototype.onChangeCallback=function(){},t}();e.Euler=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ray=void 0;var i=r(3),n=function(){function t(t,e){void 0===t&&(t=new i.Vector3),void 0===e&&(e=new i.Vector3),this.origin=t,this.direction=e}return t.prototype.set=function(t,e){return this.origin.copy(t),this.direction.copy(e),this},t.prototype.clone=function(){return(new t).copy(this)},t.prototype.copy=function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},t.prototype.at=function(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)},t.prototype.lookAt=function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},t.prototype.recast=function(t){var e=new i.Vector3;return this.origin.copy(this.at(t,e)),this},t.prototype.closestPointToPoint=function(t,e){void 0===e&&(e=new i.Vector3),e.subVectors(t,this.origin);var r=e.dot(this.direction);return r<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(r).add(this.origin)},t.prototype.distanceToPoint=function(t){return Math.sqrt(this.distanceSqToPoint(t))},t.prototype.distanceSqToPoint=function(t){var e=new i.Vector3,r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))},t.prototype.intersectSphere=function(t,e){var r=new i.Vector3;r.subVectors(t.center,this.origin);var n=r.dot(this.direction),o=r.dot(r)-n*n,a=t.radius*t.radius;if(o>a)return null;var s=Math.sqrt(a-o),u=n-s,h=n+s;return u<0&&h<0?null:u<0?this.at(h,e):this.at(u,e)},t.prototype.intersectsSphere=function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},t.prototype.intersectBox=function(t,e){var r,i,n,o,a,s,u=1/this.direction.x,h=1/this.direction.y,l=1/this.direction.z,c=this.origin;return u>=0?(r=(t.min.x-c.x)*u,i=(t.max.x-c.x)*u):(r=(t.max.x-c.x)*u,i=(t.min.x-c.x)*u),h>=0?(n=(t.min.y-c.y)*h,o=(t.max.y-c.y)*h):(n=(t.max.y-c.y)*h,o=(t.min.y-c.y)*h),r>o||n>i?null:((n>r||r!=r)&&(r=n),(o<i||i!=i)&&(i=o),l>=0?(a=(t.min.z-c.z)*l,s=(t.max.z-c.z)*l):(a=(t.max.z-c.z)*l,s=(t.min.z-c.z)*l),r>s||a>i?null:((a>r||r!=r)&&(r=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(r>=0?r:i,e)))},t.prototype.intersectsBox=function(t){return null!==this.intersectBox(t,new i.Vector3)},t.prototype.intersectTriangle=function(t,e,r,n,o){var a=new i.Vector3,s=new i.Vector3,u=new i.Vector3,h=new i.Vector3;s.subVectors(e,t),u.subVectors(r,t),h.crossVectors(s,u);var l,c=this.direction.dot(h);if(c>0){if(n)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}a.subVectors(this.origin,t);var f=l*this.direction.dot(u.crossVectors(a,u));if(f<0)return null;var p=l*this.direction.dot(s.cross(a));if(p<0)return null;if(f+p>c)return null;var d=-l*a.dot(h);return d<0?null:this.at(d/c,o)},t.prototype.applyMatrix4=function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},t.prototype.equals=function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)},t}();e.Ray=n},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Scene3D=void 0;var o=r(16),a=r(48),s=r(35),u=r(3),h=r(2),l=r(21),c=r(25),f=r(177),p=r(1),d=function(t){function e(){var e=t.call(this)||this;return e._viewId=-1,e._viewX=0,e._viewY=0,e._viewWidth=750,e._viewHeight=1624,e.visible=!0,e.raycaster=new f.Raycaster,e._instanceType="Scene3D",e.scene=e,e.transform={_parentId:0},e.camera=new a.PerspectiveCamera,e}return n(e,t),Object.defineProperty(e.prototype,"viewX",{get:function(){return this._viewX},set:function(t){t=t||0,this._viewX!==t&&(this._viewX=t,this._viewId=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewY",{get:function(){return this._viewY},set:function(t){t=t||0,this._viewY!==t&&(this._viewY=t,this._viewId=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewWidth",{get:function(){return this._viewWidth},set:function(t){t=t||0,this._viewWidth!==t&&(this._viewWidth=t,this._viewId=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewHeight",{get:function(){return this._viewHeight},set:function(t){t=t||0,this._viewHeight!==t&&(this._viewHeight=t,this._viewId=-1)},enumerable:!1,configurable:!0}),e.prototype.setViewRect=function(t,e,r,i){this.viewX=t,this.viewY=e,this.viewWidth=r,this.viewHeight=i,this._viewId=-1},e.prototype.setFog=function(t,e,r){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===r&&(r=100);var i=p.hex2rgb(t);this._fog?(this._fog.color[0]=i[0],this._fog.color[1]=i[1],this._fog.color[2]=i[2],this._fog.near=e,this._fog.far=r):this._fog={color:new Float32Array(i),near:e,far:r}},e.prototype.removeFog=function(){this._fog=null},Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()},enumerable:!1,configurable:!0}),e.prototype.updateTransform=function(){this.visible&&this.updateWorldMatrix()},e.prototype.renderWebGL=function(t){if(this.visible){var e=t.plugins.d3;if(this.camera.updateWorldMatrix(),e.camera=this.camera,e.lightsConfig=this.getLightConfig(),e.fog=this._fog||null,t.batchManager.setObjectRenderer(e),this.setViewport(t),this.filters&&this.filters.length){var r=this.filters;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var i=0;i<r.length;i++)r[i].enabled&&this._enabledFilters.push(r[i]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}this.render(t),t.batchManager.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()}else this.render(t)}},e.prototype.setViewport=function(t){if(this._viewId!==this.parent.transform._worldID){this._viewId=this.parent.transform._worldID;var e=this.parent.transform.worldMatrix,r=this.viewX*e.a+this.viewY*e.c+e.tx,i=this.viewX*e.b+this.viewY*e.d+e.ty,n=Math.sqrt(e.a*e.a+e.b*e.b),o=Math.sqrt(e.c*e.c+e.d*e.d);this._viewport={x:r,y:t.height-i-this.viewHeight*o,width:this.viewWidth*n,height:this.viewHeight*o}}this._viewport&&t.gl.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)},e.prototype.getBounds=function(){var t=this.parent.transform.worldMatrix,e=this.viewX*t.b+this.viewY*t.d+t.ty;return new h.Rectangle(this._viewport.x,e,this._viewport.width,this._viewport.height)},e.prototype.getLightConfig=function(t,e){void 0===t&&(t=this),void 0===e&&(e={pointLights:[],directionalLights:[],ambientLightColor:[0,0,0]});for(var r=this.camera.worldMatrixInverse,i=0;i<t.children.length;i++){var n=t.children[i];if(n instanceof s.Light){var o=n.colorVec3.clone().multiplyScalar(n.intensity).toArray();if("AmbientLight"==n.instanceType)e.ambientLightColor[0]+=o[0],e.ambientLightColor[1]+=o[1],e.ambientLightColor[2]+=o[2];else if("PointLight"==n.instanceType){var a=(new u.Vector3).setFromMatrixPosition(n._worldMatrix);a.applyMatrix4(r),e.pointLights.push({color:o,position:a.toArray(),distance:n.distance,decay:0===n.distance?0:n.decay})}else if("DirectionalLight"==n.instanceType){var h=(new u.Vector3).setFromMatrixPosition(n._worldMatrix);h.sub((new u.Vector3).setFromMatrixPosition(n.target._worldMatrix)),h.transformDirection(r),e.directionalLights.push({color:o,direction:h.normalize().toArray(),castShadow:n.castShadow})}}n.children&&n.children.length&&this.getLightConfig(n,e)}return e},e.prototype.hitTestPoint=function(t,e){if(void 0===e&&(e=!1),!this.parent||!this.mouseEnable)return null;var r=this.parent.transform.worldMatrix,i=this.viewX*r.a+this.viewY*r.c+r.tx,n=this.viewX*r.b+this.viewY*r.d+r.ty,o=Math.sqrt(r.a*r.a+r.b*r.b),a=Math.sqrt(r.c*r.c+r.d*r.d),s=this.viewWidth*o,h=this.viewHeight*a;if(!(t.x>=i&&t.x<=i+s&&t.y>=n&&t.y<=n+h))return null;if(this.mouseChildren){i=(t.x-i)/s*2-1,n=-(t.y-n)/h*2+1,this.raycaster.setFromCamera(new u.Vector3(i,n,.5),this.camera);var l=this.raycaster.intersectObject(this);if(l.length)return l[0].object}return this},e.prototype.setOrbCtrCfg=function(t){var e=this.orbitControlConfig;if(e&&t)for(var r in t)void 0!==e[r]&&(e[r]=t[r])},e.prototype.setOrbitControl=function(t){var e=this;if(!this.orbitControlConfig){this.orbitControlConfig={enabled:!0,enableDamping:!0,dampingFactor:.25,userZoom:!0,userZoomSpeed:1,userRotate:!0,userRotateSpeed:1,autoRotate:!1,autoRotateSpeed:2,minPolarAngle:0,maxPolarAngle:Math.PI,minDistance:0,maxDistance:1/0,enablePitch:!0},this.setOrbCtrCfg(t);var r=this.orbitControlConfig,i=new u.Vector3,n=new l.Vector2,o=new l.Vector2,a=new l.Vector2,s=0,h=0,f=1,p=[],d=0;this.addEventListener(c.MouseEvent.MOUSE_DOWN,(function(t){if(r.enabled){if(p.push({x:t.clientX,y:t.clientY,id:t.identifier}),p.length>=2){var e=p[p.length-1],i=p[p.length-2];d=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}n.set(t.clientX,t.clientY)}}),this),this.addEventListener(c.MouseEvent.MOUSE_MOVE,(function(t){var e;if(r.enabled&&p.length)if(1==p.length){if(!r.userRotate)return;if(!n.x&&!n.y)return;o.set(t.clientX,t.clientY),a.subVectors(o,n),m(2*Math.PI*a.x/1800*r.userRotateSpeed),r.enablePitch&&(void 0===(e=2*Math.PI*a.y/1800*r.userRotateSpeed)&&(e=y()),s-=e),n.copy(o)}else{if(!1===r.userZoom)return;var i=p[p.length-1],u=p[p.length-2];if(t.identifier==i.id)i.x=t.clientX,i.y=t.clientY;else{if(t.identifier!=u.id)return;u.x=t.clientX,u.y=t.clientY}var h=Math.sqrt(Math.pow(i.x-u.x,2)+Math.pow(i.y-u.y,2));h-d>0?x(Math.pow(.95,r.userZoomSpeed/3)):g(Math.pow(.95,r.userZoomSpeed/3)),d=h}}),this);var v=function(t){p.length=0};this.addEventListener(c.MouseEvent.MOUSE_UP,v,this),this.addEventListener(c.MouseEvent.MOUSE_OUT,v,this),this.addEventListener(c.MouseEvent.ENTER_FRAME,(function(){!function(){if(!(Math.abs(h)<1e-4&&Math.abs(s)<1e-4&&Math.abs(f-1)<1e-4)||r.autoRotate){var t=e.camera.position,n=t.clone().sub(i),o=Math.atan2(n.x,n.z),a=Math.atan2(Math.sqrt(n.x*n.x+n.z*n.z),n.y);r.autoRotate&&m(),o+=h,a+=s,a=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a)),a=Math.max(1e-6,Math.min(Math.PI-1e-6,a));var u=n.length()*f;u=Math.max(r.minDistance,Math.min(r.maxDistance,u)),n.x=u*Math.sin(a)*Math.sin(o),n.y=u*Math.cos(a),n.z=u*Math.sin(a)*Math.cos(o),t.copy(i).add(n),e.camera.lookAt(i.x,i.y,i.z),r.enableDamping?(h*=1-r.dampingFactor,s*=1-r.dampingFactor):(h=0,s=0),f=1}}()}),this),document&&document.addEventListener("mousewheel",(function(t){if(r.enabled&&r.userZoom){var e=0;t.wheelDelta?e=t.wheelDelta:t.detail&&(e=-t.detail),e>0?x():g()}}),!1)}function y(){return 2*Math.PI/60/60*r.autoRotateSpeed}function _(){return Math.pow(.95,r.userZoomSpeed)}function m(t){void 0===t&&(t=y()),h-=t}function g(t){void 0===t&&(t=_()),f/=t}function x(t){void 0===t&&(t=_()),f*=t}},e}(o.Object3D);e.Scene3D=d},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.LightMaterial=void 0;var o=function(t){function e(e){var r=t.call(this,e)||this;return r._instanceType="LightMaterial",r._lightAffect=!0,r}return n(e,t),e.prototype.clone=function(){return(new e).copy(this)},e}(r(26).BaseMaterial);e.LightMaterial=o},function(t,e,r){"use strict";function i(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}Object.defineProperty(e,"__esModule",{value:!0}),e.InterpolateSmooth=e.InterpolateLinear=e.InterpolateDiscrete=e.sortedArray=e.getKeyframeOrder=e.flattenJSON=e.convertArray=e.arraySlice=e.isTypedArray=void 0,e.isTypedArray=i,e.arraySlice=function(t,e,r){return i(t)?new t.constructor(t.subarray(e,void 0!==r?r:t.length)):t.slice(e,r)},e.convertArray=function(t,e,r){return!t||!r&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},e.flattenJSON=function(t,e,r,i){for(var n=1,o=t[0];void 0!==o&&void 0===o[i];)o=t[n++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[i])&&(e.push(o.time),r.push.apply(r,a)),o=t[n++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[i])&&(e.push(o.time),a.toArray(r,r.length)),o=t[n++]}while(void 0!==o);else do{void 0!==(a=o[i])&&(e.push(o.time),r.push(a)),o=t[n++]}while(void 0!==o)}},e.getKeyframeOrder=function(t){for(var e=t.length,r=new Array(e),i=0;i!==e;++i)r[i]=i;return r.sort((function(e,r){return t[e]-t[r]})),r},e.sortedArray=function(t,e,r){for(var i=t.length,n=new t.constructor(i),o=0,a=0;a!==i;++o)for(var s=r[o]*e,u=0;u!==e;++u)n[a++]=t[s+u];return n},e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationTrack3D=e.AnimationType3D=void 0;var o,a=r(4),s=r(34);!function(t){t.quaternion="quaternion",t.scale="scale",t.morphTargetInfluences="morphTargetInfluences",t.position="position"}(o=e.AnimationType3D||(e.AnimationType3D={}));var u=function(t){function e(e,r,i,n){var a=t.call(this)||this;switch(a.node=e,a.animationType=r,a.times=i,a.values=n,a._instanceType="AnimationTrack",a.animationType){case o.position:case o.scale:case o.quaternion:var s=a.node[a.animationType].clone().toArray();a.resetValue=function(){a.node[a.animationType].fromArray(s)};break;case o.morphTargetInfluences:if("Mesh3D"==a.node.instanceType||"SkinnedMesh3D"==a.node.instanceType){var u=a.node.morphTargetInfluences?a.node.morphTargetInfluences.slice():[];a.resetValue=function(){for(var t=a.node.morphTargetInfluences,e=0;e<t.length;e++)t[e]=u[e]||0}}}return a.resetValue||(a.resetValue=function(){}),a}return n(e,t),e.prototype.setValue=function(t){var e=this.getValue(t);switch(this.animationType){case o.position:case o.scale:case o.quaternion:this.node[this.animationType].fromArray(e);break;case o.morphTargetInfluences:if("Mesh3D"==this.node.instanceType||"SkinnedMesh3D"==this.node.instanceType)for(var r=this.node.morphTargetInfluences,i=0;i<r.length;i++)r[i]=e[i]||0}},e.prototype.getValue=function(t){var e=this.getValueSize();if(t<=0)return this.values.slice(0,e);if(t>=this.times[this.times.length-1])return this.values.slice(-e);var r=this.findPreIndex(t),i=r-1;if(i<0)return this.values.slice(0,e);var n=(t-this.times[i])/(this.times[r]-this.times[i]),a=this.values.slice(i*e,i*e+e),u=this.values.slice(r*e,r*e+e);return this.animationType==o.quaternion?function(t,e,r){var i=[];return s.Quaternion.slerpFlat(i,0,e,0,r,0,t),i}(n,a,u):function(t,e,r){for(var i=[],n=0;n!==e.length;++n)i[n]=e[n]*(1-t)+r[n]*t;return i}(n,a,u)},e.prototype.getValueSize=function(){return this.values.length/this.times.length},e.prototype.findPreIndex=function(t){for(var e=0,r=0;r<this.times.length;r++)if(this.times[r]>t){e=r;break}return e},e.prototype.destroy=function(){this.node=null,this.values=null,this.times=null},e}(a.HashObject);e.AnimationTrack3D=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Skeleton3D=void 0;var o=r(10),a=r(4),s=new o.Matrix4,u=new o.Matrix4,h=function(t){function e(e,r){void 0===e&&(e=[]);var i=t.call(this)||this;if(i._instanceType="Skeleton3D",i.bones=e.slice(0),i.boneMatrices=new Float32Array(16*i.bones.length),r)if(i.bones.length===r.length)i.boneInverses=r.slice(0);else{console.warn("boneInverses长度有误"),i.boneInverses=[];for(var n=0,a=i.bones.length;n<a;n++)i.boneInverses.push(new o.Matrix4)}else i.calculateInverses();return i}return n(e,t),e.prototype.calculateInverses=function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var r=new o.Matrix4;this.bones[t]&&r.setInverseOf(this.bones[t]._worldMatrix),this.boneInverses.push(r)}},e.prototype.pose=function(){var t,e,r;for(e=0,r=this.bones.length;e<r;e++)(t=this.bones[e])&&t._worldMatrix.setInverseOf(this.boneInverses[e]);for(e=0,r=this.bones.length;e<r;e++)(t=this.bones[e])&&(t.parent&&"Bone3D"==t.parent.instanceType?(t._localMatrix.setInverseOf(t.parent._worldMatrix),t._localMatrix.multiply(t._worldMatrix)):t._localMatrix.copy(t._worldMatrix),t._localMatrix.decompose(t.position,t.quaternion,t.scale))},e.prototype.update=function(){for(var t=this.bones,e=this.boneInverses,r=this.boneMatrices,i=this.boneTexture,n=0,o=t.length;n<o;n++){var a=t[n]?t[n]._worldMatrix:u;s.multiplyMatrices(a,e[n]),s.toArray(r,16*n)}i&&i.update()},e.prototype.clone=function(){return new e(this.bones,this.boneInverses)},e.prototype.getBoneByName=function(t){for(var e=0,r=this.bones.length;e<r;e++){var i=this.bones[e];if(i.name===t)return i}return null},e.prototype.destroy=function(){},e}(a.HashObject);e.Skeleton3D=h},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Bone3D=void 0;var o=function(t){function e(){var e=t.call(this)||this;return e._instanceType="Bone3D",e}return n(e,t),e}(r(16).Object3D);e.Bone3D=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationClip=void 0;var o=r(25),a=function(t){function e(e,r){var i=t.call(this)||this;return i._isPlaying=!0,i._isFront=!0,i.lastTime=null,i.curTime=0,i._endMark=!1,i._instanceType="AnimationClip",i.tracks=e,i._totalTime=r,i}return n(e,t),Object.defineProperty(e.prototype,"totalTime",{get:function(){return this._totalTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFront",{get:function(){return this._isFront},enumerable:!1,configurable:!0}),e.prototype.update=function(t){if(this.tracks&&this.tracks.length)return this.curTime!==this.lastTime?(this.rectify(),void(this._endMark=!1)):void(t<=0||!this._isPlaying||(this._endMark=!1,this._isFront?(this.curTime+=t,this.curTime>this._totalTime&&(this.curTime=0,this._endMark=!0)):(this.curTime-=t,this.curTime<0&&(this.curTime=this._totalTime,this._endMark=!0)),this.curTime!==this.lastTime&&(this.rectify(),this.dispatchEvent(o.Event.ENTER_FRAME),this._endMark&&this.hasEventListener(o.Event.END_FRAME)&&this.dispatchEvent(o.Event.END_FRAME))))},e.prototype.play=function(t){void 0===t&&(t=!0),this._isFront=t,this._isPlaying=!0},e.prototype.stop=function(){this._isPlaying=!1,this.lastTime=this.curTime},e.prototype.gotoAndPlay=function(t,e){void 0===e&&(e=!0);var r=this;r._isFront=e,r._isPlaying=!0,t>r._totalTime&&(t=r._totalTime),t<1&&(t=0),r.curTime=t},e.prototype.gotoAndStop=function(t,e){void 0===e&&(e=!1),this._isPlaying=!1,t>this.totalTime&&(t=this.totalTime),t<0&&(t=0),this.curTime=t,e&&(this.lastTime=null)},e.prototype.startAniRange=function(t,e,r,i){var n=this;if(void 0===t&&(t=0),void 0===e&&(e=this._totalTime),void 0===r&&(r=1),t<0&&(t=0),t>this._totalTime&&(t=this._totalTime),e<0&&(e=0),e>this._totalTime&&(e=this._totalTime),t!==e){if(t<e)this._isFront=!0;else{this._isFront=!1;var a=t;t=e,e=a}this.startAniRangeFun&&this.removeEventListener(o.Event.ENTER_FRAME,this.startAniRangeFun,this),this.curTime=t,this._isPlaying=!0;var s=r?r+.5>>0:1/0;this.addEventListener(o.Event.ENTER_FRAME,this.startAniRangeFun=function(r){var a=r.target;a._isFront?(a.curTime>=e||a._endMark)&&(--s<=0?(a.gotoAndStop(e),a.removeEventListener(o.Event.ENTER_FRAME,n.startAniRangeFun,n),n.startAniRangeFun=null,i&&i(s)):a.gotoAndPlay(t)):(a.curTime<=t||a._endMark)&&(--s<=0?(a.gotoAndStop(t),a.removeEventListener(o.Event.ENTER_FRAME,n.startAniRangeFun,n),n.startAniRangeFun=null,i&&i(s)):a.gotoAndPlay(e,!1))},this)}else this.gotoAndStop(t)},e.prototype.rectify=function(){if(this.tracks&&this.tracks.length){for(var t=0;t<this.tracks.length;t++)this.tracks[t].setValue(this.curTime);this.lastTime=this.curTime}},e.prototype.resetState=function(){this.stop();for(var t=0;t<this.tracks.length;t++)this.tracks[t].resetValue()},e}(o.EventDispatcher);e.AnimationClip=a},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationManager=void 0;var o=function(t){function e(e){var r=t.call(this)||this;return r.animationClips=e,r._instanceType="AnimationManager",r.stop(),r}return n(e,t),e.prototype.getAniClipByName=function(t){for(var e=0;e<this.animationClips.length;e++)if(this.animationClips[e].name==t)return this.animationClips[e];return null},e.prototype.showAni=function(t,e,r){void 0===e&&(e=1);var i=this.getAniClipByName(t);return i?(this.currentClip&&this.currentClip.resetState(),this.currentClip=i,i.startAniRange(0,void 0,e,r),i):null},e.prototype.stop=function(){this.animationClips.forEach((function(t){t.stop()})),this.currentClip=null},e.prototype.reset=function(){this.animationClips.forEach((function(t){t.resetState()})),this.currentClip=null},e.prototype.update=function(t){void 0===t&&(t=.0167);for(var e=0;e<this.animationClips.length;e++)this.animationClips[e].update(t)},e.prototype.destroy=function(){this.animationClips=null,this.currentClip=null},e}(r(4).HashObject);e.AnimationManager=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Spine=void 0;var o,a=r(11),s=r(206),u=r(207),h=r(208),l=r(209),c=r(210),f=r(2),p=r(81),d=r(1),v=r(211),y=r(212),_=r(213),m=r(214),g=r(215),x=r(17),b=r(216);!function(t){t.region="region",t.mesh="mesh",t.clipping="clipping",t.linkedmesh="linkedmesh",t.path="path",t.point="point"}(o||(o={}));var M=[0,0,0],T=function(t){function e(e,r,i){void 0===i&&(i=!1);var n=t.call(this)||this;if(n.data=e,n.textures=r,n._instanceType="Spine",n.textures||(i=!0),n.scaleY=-1,e.bones){n.boneContainer=n.addChild(new a.Container),n.bones=[];for(var o=0;o<e.bones.length;o++){var f=new s.Bone(e.bones[o],i?n.boneContainer:null);if(n.bones.push(f),f.data.parent){var p=n.findBone(f.data.parent);p&&p.addChild(f)}else n.boneContainer.addChild(f)}}if(e.slots){n.slotContainer=n.addChildAt(new a.Container,0),n.slots=[];for(var d=0;d<e.slots.length;d++){var M=e.slots[d];f=n.findBone(M.bone);n.slots.push(n.slotContainer.addChild(new u.Slot(f,M,n)))}n.drawOrder=n.slots.slice()}if(e.skins){n.skins=[];var T=e.skins;for(var w in"[object Array]"===Object.prototype.toString.call(e.skins)&&(T={},e.skins.forEach((function(t){T[t.name]=t.attachments}))),T){var E=T[w],O=new h.Skin(w);for(var S in E){var P=n.findSlotIndex(S);if(-1==P)throw new Error("Slot not found: "+S);var A=E[S];for(var C in A){var D=n.readAttachment(A[C],O,P,C,null);null!=D&&O.addAttachment(P,C,D)}}n.skins.push(O),"default"==O.name&&(n.defaultSkin=O)}}if(e.animations){var R=[];for(var I in e.animations){var j=[],L=0,N=e.animations[I];if(N.bones)for(var B in N.bones){var F=N.bones[B];f=n.findBone(B);for(var k in F){var z=new v.SpineBoneAniTrack(f,k,F[k]);j.push(z),L=Math.max(L,z.times[z.times.length-1].time)}}if(N.slots)for(var V in N.slots){var U=N.slots[V],G=n.findSlotIndex(V),X=n.slots[G];for(var W in U){var H=U[W],Y=H[H.length-1].time;"attachment"==W?(j.push(new m.AttachmentAniTrack(X,H,n)),L=Math.max(L,Y||0)):"color"==W&&(j.push(new y.SpineColorAniTrack(X,H)),L=Math.max(L,Y||0))}}if(N.deform)for(var q in N.deform){var Z=N.deform[q],K=n.findSkin(q);for(var S in Z){var Q=Z[S],J=n.findSlotIndex(S);X=n.slots[J];for(var $ in Q){var tt=Q[$],et=K.getAttachment(J,$),rt=new _.SpineDeformAniTrack(X,et,tt);j.push(rt),L=Math.max(L,rt.frameTimes[rt.frameTimes.length-1])}}}var it=N.drawOrder;if(it){var nt=new g.DrawOrderAniTrack(n.slots,n.drawOrder,it.map((function(t){return{time:t.time||0,drawOrder:function(){var e=t.offsets;if(!e)return null;for(var r=n.slots.length,i=x.newArray(r,-1),o=x.newArray(r-e.length,0),a=0,s=0,u=0;u<e.length;u++){for(var h=e[u],l=n.findSlotIndex(h.slot);a!=l;)o[s++]=a++;i[a+h.offset]=a++}for(;a<r;)o[s++]=a++;for(u=r-1;u>=0;u--)-1==i[u]&&(i[u]=o[--s]);return i}()}})));j.push(nt),L=Math.max(L,nt.times[nt.times.length-1].time)}var ot=new b.SpineAniClip(j,L);ot.name=I,R.push(ot)}n.animationManager=new b.SpineAniManager(R)}if(e.slots)for(var at=0;at<n.slots.length;at++){if((X=n.slots[at]).data.attachment){var st=n.defaultSkin.getAttachment(at,X.data.attachment);if(X.setAttachment(st),st instanceof l.RegionAttachment){var ut=st.name,ht=n.createSprite(X,st,ut);X.currentSprite=ht,X.currentSpriteName=ut,X.addChild(ht)}else if(st instanceof c.MeshAttachment){var lt=n.createMesh(X,st);X.currentMesh=lt,X.currentMeshName=st.name,X.addChild(lt)}}}return n}return n(e,t),e.prototype.findBone=function(t){for(var e=this.bones,r=0,i=e.length;r<i;r++){var n=e[r];if(n.name==t)return n}return null},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this.orderCalculations.push(t)}},e.prototype.findSlot=function(t){for(var e=this.slots,r=0;r<e.length;r++)if(e[r].name==t)return e[r];return null},e.prototype.findSlotIndex=function(t){for(var e=this.slots,r=0;r<e.length;r++)if(e[r].name==t)return r;return-1},e.prototype.findSkin=function(t){for(var e=this.skins,r=0,i=e.length;r<i;r++){var n=e[r];if(n.name==t)return n}return null},e.prototype.getAttachment=function(t,e){var r;if(this.skin&&(r=this.skin.getAttachment(t,e)))return r;if(this.defaultSkin&&(r=this.defaultSkin.getAttachment(t,e)))return r;return null},e.prototype.update=function(){var e=Date.now(),r=this.lastTime?.001*(e-this.lastTime):.01667;this.lastTime=e,this.animationManager.update(r),t.prototype.update.call(this)},e.prototype.updateTransform=function(){this.transform.updateWorldMatrix(this.parent.transform),this._worldAlpha=this.alpha*this.parent._worldAlpha,this.boneContainer&&this.boneContainer.updateTransform(),this.updateSlots(),this.updateDrawOrder(),this.slotContainer.updateTransform()},e.prototype.updateSlots=function(){for(var t=0,e=this.slots.length;t<e;t++){var r=this.slots[t],i=r.attachment;if(i){var n=i.color;if(i instanceof l.RegionAttachment){if(r.currentMesh&&(r.currentMesh.visible=!1,r.currentMesh=null,r.currentMeshName=void 0),!r.currentSpriteName||r.currentSpriteName!==i.name){var o=i.name;if(r.currentSprite&&(r.currentSprite.visible=!1),r.sprites=r.sprites||{},void 0!==r.sprites[o])r.sprites[o].visible=!0;else{var a=this.createSprite(r,i,o);r.addChild(a)}r.currentSprite=r.sprites[o],r.currentSpriteName=o}var s=r.transform;r.bone.matrix.decompose(s),s._localID++,M[0]=r.color.r*n.r,M[1]=r.color.g*n.g,M[2]=r.color.b*n.b,r.currentSprite.tint=d.rgb2hex(M)}else{if(!(i instanceof c.MeshAttachment)){r.visible=!1;continue}r.currentSprite&&(r.currentSprite.visible=!1,r.currentSprite=null,r.currentSpriteName=void 0,(s=new f.Transform)._parentID=-1,s._worldID=r.transform._worldID,r.transform=s);if(!r.currentMeshName||r.currentMeshName!==i.name){var u=i.name;if(r.currentMesh&&(r.currentMesh.visible=!1),r.meshes=r.meshes||{},void 0!==r.meshes[u])r.meshes[u].visible=!0;else{var h=this.createMesh(r,i);r.addChild(h)}r.currentMesh=r.meshes[u],r.currentMeshName=u}i.computeWorldVerticesOld(r,r.currentMesh._vertices,this.bones),r.currentMesh._vertexDirty++,M[0]=r.color.r*n.r,M[1]=r.color.g*n.g,M[2]=r.color.b*n.b,r.currentMesh.tint=d.rgb2hex(M)}r.visible=!0,r.alpha=r.color.a}else r.visible=!1}},e.prototype.updateDrawOrder=function(){for(var t=this.drawOrder,e=0,r=t.length;e<r;e++){var i=this.slots.indexOf(t[e]),n=this.slots[i];this.slotContainer.children[e]=n}},e.prototype.readAttachment=function(t,e,r,i,n){switch(i=t.name||i,t.type||o.region){case o.region:var a=new l.RegionAttachment(i,t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.width,t.height,this.textures&&this.textures[t.path||i]);return t.color&&a.color.setFromString(t.color),a;case"mesh":var s=new c.MeshAttachment(i);s.texture=this.textures&&this.textures[t.path||i];var u=t.uvs;return this.readVertices(t,s,u.length),s.triangles=t.triangles,s.regionUVs=new Float32Array(u),s.hullLength=2*t.hull||0,s}return null},e.prototype.readVertices=function(t,e,r){e.worldVerticesLength=r;var i=t.vertices;if(r!=i.length){for(var n=new Array,o=new Array,a=0,s=i.length;a<s;){var u=i[a++];o.push(u);for(var h=a+4*u;a<h;a+=4)o.push(i[a]),n.push(i[a+1]),n.push(i[a+2]),n.push(i[a+3])}e.bones=o,e.vertices=new Float32Array(n)}else{var l=new Float32Array(i);e.vertices=l}},e.prototype.createSprite=function(t,e,r){var i=new a.Sprite(e.texture);return i.rotation=e.rotation||0,i.anchorTexture.set(.5,.5),i.position.x=e.x,i.position.y=e.y,i.alpha=e.color.a,e.texture&&(i.scaleX=e.scaleX*e.width/e.texture.width,i.scaleY=-e.scaleY*e.height/e.texture.height),t.sprites=t.sprites||{},t.sprites[r]=i,i},e.prototype.createMesh=function(t,e){var r=new p.Mesh(e.texture,new Float32Array(e.regionUVs.length),e.regionUVs,new Uint16Array(e.triangles));return r.canvasPadding&&(r.canvasPadding=1.5),r.refresh(!0),r.multiplyUvs(),t.meshes=t.meshes||{},t.meshes[e.name]=r,r},e.prototype.clone=function(){return new e(this.data,this.textures)},e.prototype.setSkin=function(t){var e=this.findSkin(t);e&&this.skin!=e&&(this.addSkin(e)||(e==this.defaultSkin?this.resetSkin():(this.resetSkin(),this.addSkin(e))))},e.prototype.resetSkin=function(){this.skin=this.defaultSkin,this.slots.forEach((function(t){t.setToSetupPose()}))},e.prototype.addSkin=function(t){if(this.skin&&this.skin!=this.defaultSkin)return!1;for(var e=this.slots,r=0,i=e.length;r<i;r++){var n=e[r],o=n.data.attachment;if(o){var a=t.getAttachment(r,o);a&&n.setAttachment(a)}}return this.skin=t,!0},Object.defineProperty(e.prototype,"skinNames",{get:function(){return this.skins&&this.skins.length?this.skins.map((function(t){return t.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"aniNames",{get:function(){var t=this.animationManager;return t&&t.animationClips&&t.animationClips.length?t.animationClips.map((function(t){return t.name})):[]},enumerable:!1,configurable:!0}),e}(a.Container);e.Spine=T},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTexturesByAtlas=e.loadAtlas=void 0;var i=r(23),n=r(1),o=r(15),a=r(2);function s(t,e){for(var r={},i=new u(e),n=new Array(4),s=null;;){var h=i.readLine();if(null==h)break;if(0==(h=h.trim()).length);else if(s){var l="true"==i.readValue()?6:0;i.readTuple(n);var c=parseInt(n[0]),f=parseInt(n[1]);i.readTuple(n);var p=parseInt(n[0]),d=parseInt(n[1]);4==i.readTuple(n)&&4==i.readTuple(n)&&i.readTuple(n);var v=parseInt(n[0]),y=parseInt(n[1]);i.readTuple(n);var _=parseInt(n[0]),m=parseInt(n[1]),g=null,x=null,b=new a.Rectangle(0,0,Math.floor(v),Math.floor(y));g=l?new a.Rectangle(Math.floor(c),Math.floor(f),Math.floor(d),Math.floor(p)):new a.Rectangle(Math.floor(c),Math.floor(f),Math.floor(p),Math.floor(d)),(_||m||p!=v||d!=y)&&(x=new a.Rectangle(_,y-d-m,p,d)),r[h]=new o.Texture(t,g,b,x,l),i.readValue()}else{s={},2==i.readTuple(n)&&i.readTuple(n),i.readTuple(n);i.readValue()}}return r}e.loadAtlas=function(t,e,r,a){a=a||t.replace(".atlas",".png"),Promise.all([new Promise((function(e){"tb"==n.getEnv()?i.GlobalLoader.tbLoad((function(t,r){e(t?r:null)}),t,"utf8"):i.GlobalLoader.loadRawWeb((function(t,r){e(t?r:null)}),t,"text")})),new Promise((function(t){i.GlobalLoader.loadImage((function(e,r){t(e?o.BaseTexture.fromImage(r):null)}),a)}))]).then((function(i){if(i[0]&&i[1]){var n=s(i[1],i[0]);e&&e(n)}else r&&r("atlas图集："+t+"加载失败")}))},e.createTexturesByAtlas=s;var u=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),r=e.indexOf(":");if(-1==r)throw new Error("Invalid line: "+e);for(var i=0,n=r+1;i<3;i++){var o=e.indexOf(",",n);if(-1==o)break;t[i]=e.substr(n,o-n).trim(),n=o+1}return t[i]=e.substring(n).trim(),i+1},t}()},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(0),e),n(r(11),e),n(r(25),e),n(r(68),e),n(r(44),e),n(r(23),e),n(r(2),e),n(r(81),e),n(r(30),e),n(r(39),e),n(r(161),e),n(r(15),e),n(r(166),e),n(r(1),e),n(r(45),e),n(r(46),e),n(r(205),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(51),a=r(38),s=r(4),u=r(0),h=function(t){function e(){var e=t.call(this)||this;return e._instanceType="Transform",e.worldMatrix=new a.Matrix,e.localMatrix=new a.Matrix,e._worldID=0,e._parentID=0,e.position=new o.ObservablePoint(e.onChange,e,0,0),e.scale=new o.ObservablePoint(e.onChange,e,1,1),e.anchor=new o.ObservablePoint(e.onChange,e,0,0),e.skew=new o.ObservablePoint(e.updateSkew,e,0,0),e._rotation=0,e._cx=1,e._sx=0,e._cy=0,e._sy=1,e._localID=0,e._currentLocalID=0,e}return n(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=u.cos(this._rotation+this.skew._y),this._sx=u.sin(this._rotation+this.skew._y),this._cy=-u.sin(this._rotation-this.skew._x),this._sy=u.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalMatrix=function(){var t=this.localMatrix;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x+this.anchor._x-(this.anchor._x*t.a+this.anchor._y*t.c),t.ty=this.position._y+this.anchor._y-(this.anchor._x*t.b+this.anchor._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateWorldMatrix=function(t){var e=this.localMatrix;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x+this.anchor._x-(this.anchor._x*e.a+this.anchor._y*e.c),e.ty=this.position._y+this.anchor._y-(this.anchor._x*e.b+this.anchor._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldMatrix,i=this.worldMatrix;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._worldID++}},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){t!==this._rotation&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.worldMatrix=null,this.localMatrix=null,this.position=null,this.skew=null,this.scale=null,this.anchor=null},e}(s.HashObject);e.default=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapPremultipliedBlendModes=void 0;var i=r(0);e.mapPremultipliedBlendModes=function(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,t[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,t[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,e[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,e[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,e[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nextCombination=e.deinterleave3=e.interleave3=e.deinterleave2=e.interleave2=e.reverse=e.parity=e.prevPow2=e.nextPow2=e.countTrailingZeros=e.popCount=e.log10=e.log2=e.isPow2=e.max=e.min=e.abs=e.INT_MIN=e.INT_MAX=e.INT_BITS1=void 0;function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS1=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,r;return t>>>=e=Number(t>65535)<<4,t>>>=r=Number(t>255)<<3,e|=r,t>>>=r=Number(t>15)<<2,e|=r,(e|=r=Number(t>3)<<1)|(t>>>=r)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=i,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,i=e,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=1&r,--n;t[e]=i<<n&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=r(30),o=r(2),a=r(22),s=null,u=new o.Matrix;e.default=function(t,e,r,o){void 0===e&&(e=null),void 0===r&&(r=null),void 0===o&&(o=0);var h=t.getLocalBounds(),l=e?e.width:h.width,c=e?e.height:h.height,f=e?e.x:h.x,p=e?e.y:h.y;if(s)i.width=l,i.height=c;else{var d=a.createCanvas();d.width=l,d.height=c,i=d,s=new n.CanvasRenderer(d.getContext("2d"),l,c)}return r||(r={type:"png"}),t.transform.updateLocalMatrix(),u.copy(t.transform.localMatrix),u.invert(),u.tx-=f,u.ty-=p,s.render(t,null,u),t.transform._parentID=-1,i.toDataURL("image/"+r.type,r.quality)}},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=r(4),s=r(55),u=function(t){function e(e){var r=t.call(this)||this;return r._instanceType="CanvasMaskManager",r.renderer=e,r}return n(e,t),e.prototype.pushMask=function(t){var e=this.renderer;e.context.save(),e.context.globalAlpha=0;var r=t.transform.worldMatrix;e.context.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),"Shape"==t.instanceType?t._drawShape(e.context):"Graphics"==t.instanceType&&(t.finishPoly(),this.renderGraphicsShape(t)),e.context.clip()},e.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,r=t.graphicsData.length;if(0!==r){e.beginPath();for(var i=0;i<r;i++){var n=t.graphicsData[i],a=n.shape,u=!0;if(n.type===o.SHAPES.POLY){var h=a.points;e.moveTo(h[0],h[1]);for(var l=1;l<h.length/2;l++)e.lineTo(h[2*l],h[2*l+1]);u=!s.judgeCcw(h),h[0]===h[h.length-2]&&h[1]===h[h.length-1]||e.closePath()}else if(n.type===o.SHAPES.RECT)e.rect(a.x,a.y,a.width,a.height);else if(n.type===o.SHAPES.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI);else if(n.type===o.SHAPES.ELIP){var c=2*a.width,f=2*a.height,p=a.x-c/2,d=a.y-f/2,v=c/2*.5522848,y=f/2*.5522848,_=p+c,m=d+f,g=p+c/2,x=d+f/2;e.moveTo(p,x),e.bezierCurveTo(p,x-y,g-v,d,g,d),e.bezierCurveTo(g+v,d,_,x-y,_,x),e.bezierCurveTo(_,x+y,g+v,m,g,m),e.bezierCurveTo(g-v,m,p,x+y,p,x)}else if(n.type===o.SHAPES.RREC){var b=a.x,M=a.y,T=a.width,w=a.height,E=a.radius,O=Math.min(T,w)/2|0;E=E>O?O:E,e.moveTo(b,M+E),e.quadraticCurveTo(b,M,b+E,M),e.lineTo(b+T-E,M),e.quadraticCurveTo(b+T,M,b+T,M+E),e.lineTo(b+T,M+w-E),e.quadraticCurveTo(b+T,M+w,b+T-E,M+w),e.lineTo(b+E,M+w),e.quadraticCurveTo(b,M+w,b,M+w-E),e.lineTo(b,M+E)}for(l=0;l<n.holes.length;l++)s.holePath(n.holes[i],e,u)}}},e.prototype.popMask=function(t){t.context.restore()},e.prototype.destroy=function(){},e}(a.HashObject);e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=r(2),o=r(1),a=new n.Matrix,s=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=t._texture,r=this.renderer,s=e._frame.width,u=e._frame.height,h=t.transform.worldMatrix,l=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&e.valid){r.setBlendMode(t.blendMode),r.context.globalAlpha=t._worldAlpha,t._anchorTexture?(e.trim?(l=e.trim.width/2+e.trim.x-t._anchorTexture.x*e.orig.width,c=e.trim.height/2+e.trim.y-t._anchorTexture.y*e.orig.height):(l=(.5-t._anchorTexture.x)*e.orig.width,c=(.5-t._anchorTexture.y)*e.orig.height),e.rotate&&(a.copy(h),h=a,n.GroupD8.matrixAppendRotationInv(h,e.rotate,l,c),l=0,c=0),l-=s/2,c-=u/2):(l=t.offsetX||0,c=t.offsetY||0),r.context.setTransform(h.a,h.b,h.c,h.d,h.tx,h.ty);var f=r._outerBlend;f&&(r.context.save(),r.context.beginPath(),r.context.rect(l,c,s,u),r.context.clip()),16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=o.getTintedTexture(t._texture,t.tint)),r.context.drawImage(t.tintedTexture,0,0,s,u,l,c,s,u)):r.context.drawImage(e.baseTexture.source,e._frame.x,e._frame.y,s,u,l,c,s,u),f&&r.context.restore(),r.setBlendMode(i.BLEND_MODES.NORMAL)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),n=function(){function t(t,e){this.canvas=i.createCanvas(),this.resize(t,e),this.context=this.canvas.getContext("2d"),this.resize(t,e),this.clear()}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),t}();e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasMeshRenderer=void 0;var i=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=this.renderer,r=e.context,i=t.worldMatrix;r.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),e.context.globalAlpha=t._worldAlpha,e.setBlendMode(t.blendMode),this._renderTriangles(t)},t.prototype._renderTriangles=function(t){for(var e=t._indices,r=e.length,i=0;i<r;i+=3){var n=2*e[i],o=2*e[i+1],a=2*e[i+2];this._renderDrawTriangle(t,n,o,a)}},t.prototype._renderDrawTriangle=function(t,e,r,i){var n=this.renderer.context,o=t._uvs,a=t._vertices,s=t.texture;if(s.valid){var u=s.baseTexture,h=u.source,l=u.width,c=u.height,f=o[e]*u.width,p=o[r]*u.width,d=o[i]*u.width,v=o[e+1]*u.height,y=o[r+1]*u.height,_=o[i+1]*u.height,m=a[e],g=a[r],x=a[i],b=a[e+1],M=a[r+1],T=a[i+1],w=t.canvasPadding;if(w>0){var E=w/Math.abs(t.worldMatrix.a),O=w/Math.abs(t.worldMatrix.d),S=(m+g+x)/3,P=(b+M+T)/3,A=m-S,C=b-P,D=Math.sqrt(A*A+C*C);m=S+A/D*(D+E),b=P+C/D*(D+O),C=M-P,g=S+(A=g-S)/(D=Math.sqrt(A*A+C*C))*(D+E),M=P+C/D*(D+O),C=T-P,x=S+(A=x-S)/(D=Math.sqrt(A*A+C*C))*(D+E),T=P+C/D*(D+O)}n.save(),n.beginPath(),n.moveTo(m,b),n.lineTo(g,M),n.lineTo(x,T),n.closePath(),n.clip();var R=f*y+v*d+p*_-y*d-v*p-f*_,I=m*y+v*x+g*_-y*x-v*g-m*_,j=f*g+m*d+p*x-g*d-m*p-f*x,L=f*y*x+v*g*d+m*p*_-m*y*d-v*p*x-f*g*_,N=b*y+v*T+M*_-y*T-v*M-b*_,B=f*M+b*d+p*T-M*d-b*p-f*T,F=f*y*T+v*M*d+b*p*_-b*y*d-v*p*T-f*M*_;n.transform(I/R,N/R,j/R,B/R,L/R,F/R),n.drawImage(h,0,0,l,c,0,0,l,c),n.restore()}},t.prototype.destroy=function(){this.renderer=null},t}();e.CanvasMeshRenderer=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTintedTexture=void 0;var i,n=r(57),o=r(22),a=n.canUseNewCanvasBlendModes()?function(t,e,r){var i=r.getContext("2d"),n=t._frame.clone();r.width=Math.ceil(n.width),r.height=Math.ceil(n.height),i.save(),i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="multiply",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.restore()}:function(t,e,r){var i=r.getContext("2d"),n=t._frame.clone();r.width=Math.ceil(n.width),r.height=Math.ceil(n.height),i.save(),i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.restore();for(var o=s(e),a=o[0],u=o[1],h=o[2],l=i.getImageData(0,0,n.width,n.height),c=l.data,f=0;f<c.length;f+=4)c[f+0]*=a,c[f+1]*=u,c[f+2]*=h;i.putImageData(l,0,0)};function s(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}e.getTintedTexture=function(t,e){var r="#"+("00000"+(0|(e=function(t){var e=s(t);return e[0]=Math.min(255,e[0]/8*8),e[1]=Math.min(255,e[1]/8*8),e[2]=Math.min(255,e[2]/8*8),function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}(e)}(e))).toString(16)).substr(-6);t.tintCache=t.tintCache||{};var n,u=t.tintCache[r];if(u){if(u.tintId===t._updateID)return t.tintCache[r];n=t.tintCache[r]}else n=i||o.createCanvas();return a(t,e,n),n.tintId=t._updateID,t.tintCache[r]=n,i=null,n}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapWebGLBlendModes=void 0;var i=r(0);e.mapWebGLBlendModes=function(t,e){return void 0===e&&(e=[]),e[i.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.NONE]=[0,0],e[i.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e[i.BLEND_MODES.SRC_OVER]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[i.BLEND_MODES.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[i.BLEND_MODES.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[i.BLEND_MODES.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[i.BLEND_MODES.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[i.BLEND_MODES.ERASE]=[t.ZERO,t.ONE,t.SRC_ALPHA,0],e[i.BLEND_MODES.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapCanvasBlendModes=void 0;var i=r(0),n=r(57);e.mapCanvasBlendModes=function(t){return void 0===t&&(t=[]),n.canUseNewCanvasBlendModes()?(t[i.BLEND_MODES.NORMAL]="source-over",t[i.BLEND_MODES.ADD]="lighter",t[i.BLEND_MODES.MULTIPLY]="multiply",t[i.BLEND_MODES.SCREEN]="screen",t[i.BLEND_MODES.OVERLAY]="overlay",t[i.BLEND_MODES.DARKEN]="darken",t[i.BLEND_MODES.LIGHTEN]="lighten",t[i.BLEND_MODES.COLOR_DODGE]="color-dodge",t[i.BLEND_MODES.COLOR_BURN]="color-burn",t[i.BLEND_MODES.HARD_LIGHT]="hard-light",t[i.BLEND_MODES.SOFT_LIGHT]="soft-light",t[i.BLEND_MODES.DIFFERENCE]="difference",t[i.BLEND_MODES.EXCLUSION]="exclusion",t[i.BLEND_MODES.HUE]="hue",t[i.BLEND_MODES.SATURATION]="saturate",t[i.BLEND_MODES.COLOR]="color",t[i.BLEND_MODES.LUMINOSITY]="luminosity"):(t[i.BLEND_MODES.NORMAL]="source-over",t[i.BLEND_MODES.ADD]="lighter",t[i.BLEND_MODES.MULTIPLY]="source-over",t[i.BLEND_MODES.SCREEN]="source-over",t[i.BLEND_MODES.OVERLAY]="source-over",t[i.BLEND_MODES.DARKEN]="source-over",t[i.BLEND_MODES.LIGHTEN]="source-over",t[i.BLEND_MODES.COLOR_DODGE]="source-over",t[i.BLEND_MODES.COLOR_BURN]="source-over",t[i.BLEND_MODES.HARD_LIGHT]="source-over",t[i.BLEND_MODES.SOFT_LIGHT]="source-over",t[i.BLEND_MODES.DIFFERENCE]="source-over",t[i.BLEND_MODES.EXCLUSION]="source-over",t[i.BLEND_MODES.HUE]="source-over",t[i.BLEND_MODES.SATURATION]="source-over",t[i.BLEND_MODES.COLOR]="source-over",t[i.BLEND_MODES.LUMINOSITY]="source-over"),t[i.BLEND_MODES.NORMAL_NPM]=t[i.BLEND_MODES.NORMAL],t[i.BLEND_MODES.ADD_NPM]=t[i.BLEND_MODES.ADD],t[i.BLEND_MODES.SCREEN_NPM]=t[i.BLEND_MODES.SCREEN],t[i.BLEND_MODES.SRC_OVER]="source-over",t[i.BLEND_MODES.SRC_IN]="source-in",t[i.BLEND_MODES.SRC_OUT]="source-out",t[i.BLEND_MODES.SRC_ATOP]="source-atop",t[i.BLEND_MODES.DST_OVER]="destination-over",t[i.BLEND_MODES.DST_IN]="destination-in",t[i.BLEND_MODES.DST_OUT]="destination-out",t[i.BLEND_MODES.DST_ATOP]="destination-atop",t[i.BLEND_MODES.SUBTRACT]="source-over",t}},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalLoader=e.Loader=void 0;var o=r(13),a=r(1),s=function(t){function r(){var e=t.call(this)||this;return e.caches={},e._instanceType="Loader",e}return n(r,t),r.prototype.loadSheet=function(t,e){var r=this,i=e.substring(0,e.lastIndexOf("."))+".png";this.loadImage((function(n,o){n?(r.cache(i,o),r.caches[e]&&(t(!0,{json:r.caches[e],img:o}),r.caches[e]=null,r.caches[i]=null)):t(!1)}),i),this.loadJson((function(n,o){n?(r.cache(e,o),r.caches[i]&&(t(!0,{json:o,img:r.caches[i]}),r.caches[e]=null,r.caches[i]=null)):t(!1)}),e)},r.prototype.loadJson=function(t,e){"tb"!=a.getEnv()?this.loadRawWeb(t,e,"json"):this.tbLoad((function(e,r){t(e,e?JSON.parse(r):r)}),e,"utf8")},r.prototype.loadAB=function(t,r){"tb"==a.getEnv()?e.GlobalLoader.tbLoad(t,r,"ArrayBuffer"):e.GlobalLoader.loadRawWeb(t,r,"arraybuffer")},r.prototype.loadRawWeb=function(t,e,r){var i;void 0===r&&(r="json"),window.XMLHttpRequest?i=new XMLHttpRequest:window.ActiveXObject?i=new window.ActiveXObject:alert("请升级至最新版本的浏览器"),null!=i&&(i.open("GET",e,!0),i.responseType=r,i.send(),i.onreadystatechange=function(){4==i.readyState&&200==i.status&&t(!0,i.response)},i.onerror=function(e){t(!1,e)})},r.prototype.loadImage=function(t,e){var r=a.createImage();r.onload=function(){t(!0,r)},r.onerror=function(){t(!1)},0!==(e=encodeURI(e)).indexOf("data:")&&(r.crossOrigin="anonymous"),r.src=e},r.prototype.loadAudio=function(t,e){var r=my.createInnerAudioContext();r.src=e,r.onCanplay((function(){t(!0,r)})),r.onError((function(e){t(!1)}))},r.prototype.tbLoad=function(t,e,r){var i=this;void 0===r&&(r="ArrayBuffer"),0==e.indexOf("cloud://")?this.getTbTempUrl((function(e){i.downloadReadFile(t,e,r)}),e):this.downloadReadFile(t,e,r)},r.prototype.getTbTempUrl=function(t,e){getApp().cloud.file.getTempFileURL({fileId:[e]}).then((function(e){t(e[0].url.replace("-internal",""))})).catch((function(t){console.error(t)}))},r.prototype.downloadReadFile=function(t,e,r){void 0===r&&(r="ArrayBuffer");var i=my;i.downloadFile({url:e,success:function(e){var n=e.apFilePath;i.getFileSystemManager().readFile({filePath:n,encoding:"ArrayBuffer"===r?"":r,success:function(e){t(!0,e.data)},fail:function(e){t(!1,e)}})},fail:function(e){t(!1,e)}})},r.prototype.cache=function(t,e){this.caches[t]&&console.log("覆盖原先数据："+t),this.caches[t]=e},r}(o.EventDispatcher);e.Loader=s,e.GlobalLoader=new s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(53),n=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4),this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,r){var n=e.width,o=e.height;if(r){var a=t.width/2/n,s=t.height/2/o,u=t.x/n+a,h=t.y/o+s;r=i.default.add(r,i.default.NW),this.x0=u+a*i.default.uX(r),this.y0=h+s*i.default.uY(r),r=i.default.add(r,2),this.x1=u+a*i.default.uX(r),this.y1=h+s*i.default.uY(r),r=i.default.add(r,2),this.x2=u+a*i.default.uX(r),this.y2=h+s*i.default.uY(r),r=i.default.add(r,2),this.x3=u+a*i.default.uX(r),this.y3=h+s*i.default.uY(r)}else this.x0=t.x/n,this.y0=t.y/o,this.x1=(t.x+t.width)/n,this.y1=t.y/o,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/o,this.x3=t.x/n,this.y3=(t.y+t.height)/o;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535,this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t}();e.default=n},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=void 0;var o=r(12),a=r(0),s=r(2),u=r(13),h=r(8),l=r(19),c=r(24),f=r(39),p=r(30),d=r(1),v=function(t){function e(r,i,n,o,u,l,c,v){void 0===i&&(i=750),void 0===n&&(n=1624),void 0===l&&(l=a.RENDERER_TYPE.CANVAS),void 0===c&&(c=!1),void 0===v&&(v=!1);var y=t.call(this)||this;y.renderObj=null,y.viewRect=new s.Rectangle,y.desWidth=0,y.desHeight=0,y.divHeight=0,y.divWidth=0,y._bgColor=0,y._lastDpList={},y.canvasOffsetTb={x:0,y:0},y._ml=[],y._mp=[],y._mouseDownPoint={},y._mouseEventTypes={mousedown:"onMouseDown",mousemove:"onMouseMove",mouseup:"onMouseUp",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp",touchStart:"onMouseDown",touchMove:"onMouseMove",touchEnd:"onMouseUp"},y.canvas=r;var _=y;if(y._instanceType="Stage",e._stageList.canvas=_,_.stage=y,_.name="stageInstance_"+_.instanceId,_.desWidth=i,_.desHeight=n,_.divWidth=o,_.divHeight=u,console.log("%cfyge版本："+a.VERSION,"text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 3px 0 #bbb,0 4px 0 #b9b9b9,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);font-size:3em"),l!=a.RENDERER_TYPE.WEBGL||d.isWebGLSupported()||(l=a.RENDERER_TYPE.CANVAS,console.warn("不支持webgl")),l==a.RENDERER_TYPE.CANVAS){var m=r.getContext("2d");_.renderObj=new p.CanvasRenderer(m,r.width,r.height)}else{var g={alpha:!0,antialias:!1,premultipliedAlpha:!0,stencil:!0};m=r.getContext("webgl",g)||r.getContext("experimental-webgl",g);_.renderObj=new f.WebglRenderer(m,r.width,r.height),"web"==d.getEnv()&&(r.addEventListener("webglcontextlost",_.renderObj.handleContextLost.bind(_.renderObj),!1),r.addEventListener("webglcontextrestored",_.renderObj.handleContextRestored.bind(_.renderObj),!1))}return _._dpi=r.width/o,_._stageCenter=c,_._scaleMode=v?"fixedHeight":"fixedWidth",_._setAlign(),setTimeout((function(){_.dispatchEvent(h.Event.INIT_STAGE)}),100),y}return n(e,t),e.getStage=function(t){return void 0===t&&(t="cusEngine"),e._stageList[t]},Object.defineProperty(e.prototype,"bgColor",{get:function(){return this._bgColor},set:function(t){this._bgColor!==t&&(this._bgColor=t,this.renderObj.backgroundColor=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageWidth",{get:function(){return this.viewRect.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageHeight",{get:function(){return this.viewRect.height},enumerable:!1,configurable:!0}),e.prototype._setAlign=function(){var t=this,e=t.canvas;t._stageCenter&&(t.anchorX=t.desWidth>>1,t.anchorY=t.desHeight>>1,t.x=e.width-t.desWidth>>1,t.y=e.height-t.desHeight>>1);var r="fixedHeight"==t._scaleMode?e.height/t.desHeight:e.width/t.desWidth;t.scaleX=r,t.scaleY=r,t.viewRect=t.viewRect||new s.Rectangle,t.viewRect.x=t.desWidth-e.width/r>>1,t.viewRect.y=t.desHeight-e.height/r>>1,t.viewRect.width=t.desWidth-2*t.viewRect.x,t.viewRect.height=t.desHeight-2*t.viewRect.y,t._stageCenter||(t.viewRect.x=t.viewRect.y=0)},e.prototype.resize=function(t,e){if("web"==d.getEnv()&&(t=t||document.body.clientWidth,e=e||document.body.clientHeight),t&&t){var r=this,i=r._dpi,n=r.canvas;t==r.divWidth&&e==r.divHeight||(t!=r.divWidth&&(n.width=t*i),e!=r.divHeight&&(n.height=e*i),r.divWidth=t,r.divHeight=e,r._setAlign(),r.renderObj.resize(n.width,n.height),r.dispatchEvent(h.Event.RESIZE))}else console.error("传入的显示尺寸不能为空")},e.prototype._initMouseEvent=function(t,e,r,i){t._pd=!1,t.clientX=e.x,t.clientY=e.y,t.stageX=r.x,t.stageY=r.y,t.identifier=i},e.prototype.flush=function(){this.renderObj.render(this)},e.prototype.onMouseEvent=function(t){"web"==d.getEnv()&&t.preventDefault();var e=this;if(u.EventDispatcher._totalMEC>0){var r,i=void 0,n=e._mouseEventTypes[t.type],o=void 0,h=void 0,f=void 0,p=void 0,v=void 0,y=void 0;"pc"==a.osType?(t.identifier=0,i=[t]):i=[t.changedTouches[0]];var _=e.canvasOffsetTb,m=_.x,g=_.y;if("web"==d.getEnv()){var x=document.documentElement,b=e.canvas.getBoundingClientRect();m=b.left+window.pageXOffset-x.clientLeft,g=b.top+window.pageYOffset-x.clientTop}for(var M=0;M<i.length;M++)if(i[M]&&(v=0,o=[],y="m"+i[M].identifier,(p=e._mp.length>0?e._mp.shift():new s.Point).x=((i[M].pageX||i[M].x||i[M].b)-m)*e._dpi,p.y=((i[M].pageY||i[M].y||i[M].c)-g)*e._dpi,h=e.globalToLocal(p,l.DisplayObject._bp),u.EventDispatcher.getMouseEventCount()>0&&(e._ml[v]?(r=e._ml[v]).type=n:(r=new c.MouseEvent(n),e._ml[v]=r),o[o.length]=r,e._initMouseEvent(r,p,h,y),v++),"onMouseDown"==n?e._mouseDownPoint[y]=p:"onMouseUp"==n&&e._mouseDownPoint[y]&&s.Point.distance(e._mouseDownPoint[y],p)<20&&u.EventDispatcher.getMouseEventCount("onMouseClick")>0&&(e._ml[v]?(r=e._ml[v]).type="onMouseClick":(r=new c.MouseEvent("onMouseClick"),e._ml[v]=r),o[o.length]=r,e._initMouseEvent(r,p,h,y),v++),v>0)){var T=e.hitTestPoint(p,!0),w=[];if(T)for(;T;)!1===T.mouseChildren&&(w.length=0),w[w.length]=T,T=T.parent;else w[w.length]=e;for(var E=w.length,O=E-1;O>=0;O--){T=w[O];for(var S=0;S<v;S++)o[S]._pd||T.hasEventListener(o[S].type)&&T.mouseEnable&&(o[S].target=T,o[S].currentTarget=w[0],f=T.globalToLocal(p,l.DisplayObject._bp),o[S].localX=f.x,o[S].localY=f.y,T.dispatchEvent(o[S]))}w.reverse();for(O=E-1;O>=0;O--){T=w[O];for(S=0;S<v;S++)o[S]._pd||T.hasEventListener(o[S].type,!1)&&T.mouseEnable&&(o[S].target=T,o[S].currentTarget=w[v-1],f=T.globalToLocal(p,l.DisplayObject._bp),o[S].localX=f.x,o[S].localY=f.y,T.dispatchEvent(o[S],null,!1))}if("onMouseDown"!=n){if((u.EventDispatcher.getMouseEventCount("onMouseOver")>0||u.EventDispatcher.getMouseEventCount("onMouseOut")>0)&&e._lastDpList[y]){var P=e._lastDpList[y].length,A=w.length;E=P>A?P:A;var C=!1,D=void 0,R=void 0;for(O=1;O<E;O++)C||e._lastDpList[y][O]!=w[O]&&(C=!0,e._ml[v]?(D=e._ml[v]).type="onMouseOver":(D=new c.MouseEvent("onMouseOver"),e._ml[v]=D),e._initMouseEvent(D,p,h,y),v++,e._ml[v]?(R=e._ml[v]).type="onMouseOut":(R=new c.MouseEvent("onMouseOut"),e._ml[v]=R),e._initMouseEvent(R,p,h,y)),C&&(e._lastDpList[y][O]&&(R._pd||(T=e._lastDpList[y][O]).hasEventListener("onMouseOut")&&(R.currentTarget=e._lastDpList[y][P-1],R.target=T,f=T.globalToLocal(p,l.DisplayObject._bp),R.localX=f.x,R.localY=f.y,T.dispatchEvent(R))),w[O]&&(D._pd||(T=w[O]).hasEventListener("onMouseOver")&&(D.currentTarget=w[A-1],D.target=T,f=T.globalToLocal(p,l.DisplayObject._bp),D.localX=f.x,D.localY=f.y,T.dispatchEvent(D))))}e._mp[e._mp.length]=p}"onMouseUp"==n?(delete e._mouseDownPoint[y],delete e._lastDpList[y]):e._lastDpList[y]=w}}},e.prototype.getBounds=function(){return this.viewRect},e.prototype.destroy=function(){var e=this;e.renderObj.destroy(),e.renderObj=null,e.viewRect=null,e._lastDpList=null,e._ml=null,t.prototype.destroy.call(this)},e._stageList={},e}(o.default);e.Stage=v},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(114),a=r(0),s=r(40),u=r(58),h=r(60),l=r(115),c=r(6),f=r(1),p=0,d=function(t){function e(e){var r=t.call(this,e)||this;r.vertSize=6,r.vertByteSize=4*r.vertSize,r.size=8e3,r.currentSize=0,r.currentIndexSize=0,r.aBuffers={},r.iBuffers={},r.shader=null,r.currentIndex=0,r.groups=[];for(var i=0;i<r.size/4;i++)r.groups[i]=new o.default;return r.elements=[],r.vertexBuffers=[],r.indexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.addEventListener("onPreRender",r.onPreRender,r),r}return n(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),16),this.MAX_TEXTURES=u.checkMaxIfStatementsInShader(this.MAX_TEXTURES,t),this.shader=l.generateMultiTextureShader(t,this.MAX_TEXTURES),this.renderer.bindVao(null);for(var e=this.shader.attributes,r=0;r<this.vaoMax;r++){var i=this.vertexBuffers[r]=c.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),n=this.indexBuffers[r]=c.GLBuffer.createIndexBuffer(t,null,t.STREAM_DRAW),o=this.renderer.createVao().addIndex(n).addAttribute(i,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(i,e.aTextureCoord,t.FLOAT,!0,this.vertByteSize,8).addAttribute(i,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,16).addAttribute(i,e.aTextureId,t.FLOAT,!1,this.vertByteSize,20);this.vaos[r]=o}},e.prototype.onPreRender=function(){this.vertexCount=0},e.prototype.render=function(t){t._texture&&t._texture.valid&&(this.currentSize+t._vertexData.length/2>this.size&&this.flush(),this.elements[this.currentIndex++]=t,this.currentSize+=t._vertexData.length/2,this.currentIndexSize+=t._indices.length)},e.prototype.getIndexBuffer=function(t){var e=f.nextPow2(Math.ceil(t/12)),r=f.log2(e),i=12*e,n=this.iBuffers[r];return n||(this.iBuffers[r]=n=new Uint16Array(i)),n},e.prototype.getAttributeBuffer=function(t){var e=f.nextPow2(Math.ceil(t/8)),r=(f.log2(e),8*e),i=this.aBuffers[r];return i||(this.aBuffers[r]=i=new h.BatchBuffer(r*this.vertByteSize)),i},e.prototype.flush=function(){if(0!==this.currentSize){var t,e,r,i=this.renderer.gl,n=this.MAX_TEXTURES,o=this.getAttributeBuffer(this.currentSize),s=this.getIndexBuffer(this.currentIndexSize),u=this.elements,h=this.groups,l=o.float32View,c=o.uint32View,d=this.renderer.textureGC.count,v=0,y=0,_=1,m=0,g=h[0],x=f.premultiplyBlendMode[u[0]._texture.baseTexture.premultipliedAlpha?1:0][u[0]._blendMode];for(g.textureCount=0,g.start=0,p++,r=0;r<this.currentIndex;++r){var b=u[r];u[r]=null,t=b._texture.baseTexture;var M=f.premultiplyBlendMode[t.premultipliedAlpha?1:0][b._blendMode];x!==M&&(x=M,e=null,m=n,p++),e!==t&&(e=t,t._enabledId!==p&&(m===n&&(p++,m=0,g.size=y-g.start,(g=h[_++]).textureCount=0,g.blend=x,g.start=y),t._touchedId=d,t._enabledId=p,t._id=m,g.textures[g.textureCount++]=t,m++)),this.packGeometry(b,l,c,s,v,y),v+=b._vertexData.length/2*this.vertSize,y+=b._indices.length}g.size=y-g.start,a.osType,this.vertexBuffers[this.vertexCount].upload(o.vertices,0,!0),this.indexBuffers[this.vertexCount].upload(s,0,!0);var T=this.renderer.textureManager;for(r=0;r<_;r++){for(var w=h[r],E=w.textureCount,O=0;O<E;O++)w.textures[O]!=T.boundTextures[O]&&T.bindTexture(w.textures[O],O,!0),w.textures[O]=null;this.renderer.setBlendMode(w.blend),i.drawElements(w.type,w.size,i.UNSIGNED_SHORT,2*w.start)}this.currentIndex=0,this.currentSize=0,this.currentIndexSize=0}},e.prototype.packGeometry=function(t,e,r,i,n,o){for(var a=n/this.vertSize,s=t._uvs,u=t._indices,h=t._vertexData,l=t._texture.baseTexture._id,c=null==t._tintRGB?16777215:t._tintRGB,p=Math.min(t._worldAlpha,1),d=p<1&&t._texture.baseTexture.premultipliedAlpha?f.premultiplyTint(c,p):c+(255*p<<24),v=0;v<h.length;v+=2)e[n++]=h[v],e[n++]=h[v+1],e[n++]=s[v],e[n++]=s[v+1],r[n++]=d,e[n++]=l;for(v=0;v<u.length;v++)i[o++]=a+u[v]},e.prototype.start=function(){this.renderer.bindShader(this.shader),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind(),this.indexBuffers[this.vertexCount].bind()},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vaos[e]&&this.vaos[e].destroy();this.renderer.removeEventListener("onPreRender",this.onPreRender,this),this.shader&&(this.shader.destroy(),this.shader=null),this.vaos=null,t.prototype.destroy.call(this)},e}(s.default);e.default=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=function(){this.textures=[],this.blend=0,this.textureCount=0,this.start=0,this.size=0,this.type=i.DRAW_MODES.TRIANGLES};e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateMultiTextureShader=void 0;var i=r(6),n=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n");e.generateMultiTextureShader=function(t,e){var r=n;r=(r=r.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(textureId == "+r+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var o=new i.GLShader(t,"precision highp float;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;attribute vec4 aColor;attribute float aTextureId;uniform mat3 projectionMatrix;varying vec2 vTextureCoord;varying vec4 vColor;varying float vTextureId;void main(void){gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);vTextureCoord = aTextureCoord;vTextureId = aTextureId;vColor = aColor;}",r),a=[],s=0;s<e;s++)a[s]=s;return o.bind(),o.uniforms.uSamplers=a,o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GLBuffer=void 0;var i=new ArrayBuffer(0),n=function(){function t(t,e,r,n){this.destroy=function(){this.gl.deleteBuffer(this.buffer)},this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=n||t.STATIC_DRAW,this.data=i,r&&this.upload(r),this._updateID=0}return t.prototype.upload=function(t,e,r){r||this.bind();var i=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?i.bufferSubData(this.type,e,t):i.bufferData(this.type,t,this.drawType),this.data=t},t.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},t.createVertexBuffer=function(e,r,i){return new t(e,e.ARRAY_BUFFER,r,i)},t.createIndexBuffer=function(e,r,i){return new t(e,e.ELEMENT_ARRAY_BUFFER,r,i)},t.create=function(e,r,i,n){return new t(e,r,i,n)},t}();e.GLBuffer=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VertexArrayObject=void 0;var i=r(118),n=function(){function t(e,r){if(this.nativeVaoExtension=null,t.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=r,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}return t.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},t.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},t.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),n.attribute.pointer(n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i.setVertexAttribArrays(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},t.prototype.addAttribute=function(t,e,r,i,n,o,a){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:i||!1,stride:n||0,start:o||0,name:a}),this.dirty=!0,this},t.prototype.removeAttribute=function(t,e){void 0===e&&(e=!0);for(var r=this.attributes.length-1;r>=0;r--){if(this.attributes[r].name===t&&(this.attributes.splice(r,1),this.dirty=!0,e))break}return this},t.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},t.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},t.prototype.draw=function(t,e,r){var i=this.gl;return this.indexBuffer?i.drawElements(t,e||this.indexBuffer.data.length,i.UNSIGNED_SHORT,2*(r||0)):i.drawArrays(t,r||0,e||this.getSize()),this},t.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},t.prototype.getSize=function(){var t=this.attributes[0];return(t.buffer.data.length||t.buffer.data.byteLength/4)/(t.stride/4||t.attribute.size)},t.FORCE_NATIVE=!1,t}();e.VertexArrayObject=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setVertexAttribArrays=void 0,e.setVertexAttribArrays=function(t,e,r){var i;if(r){var n=r.tempAttribState,o=r.attribState;for(i=0;i<n.length;i++)n[i]=!1;for(i=0;i<e.length;i++)n[e[i].attribute.location]=!0;for(i=0;i<o.length;i++)o[i]!==n[i]&&(o[i]=n[i],r.attribState[i]?t.enableVertexAttribArray(i):t.disableVertexAttribArray(i))}else for(i=0;i<e.length;i++){var a=e[i];t.enableVertexAttribArray(a.attribute.location)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GLFramebuffer=void 0;var i=r(61),n=function(){function t(t,e,r){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=r||100}return t.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new i.GLTexture(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},t.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},t.prototype.clear=function(t,e,r,i){this.bind();var n=this.gl;n.clearColor(t,e,r,i),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},t.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},t.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},t.prototype.resize=function(t,e){var r=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e))},t.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},t.createRGBA=function(e,r,n,o){var a=i.GLTexture.fromData(e,o||null,r,n);a.enableNearestScaling(),a.enableWrapClamp();var s=new t(e,r,n);return s.enableTexture(a),s.enableStencil(),s.unbind(),s},t.createFloat32=function(e,r,n,o){var a=i.GLTexture.fromData(e,o,r,n);a.enableNearestScaling(),a.enableWrapClamp();var s=new t(e,r,n);return s.enableTexture(a),s.unbind(),s},t}();e.GLFramebuffer=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GLShader=void 0;var i=r(62),n=r(63),o=r(65),a=r(66),s=r(67),u=function(){function t(t,e,r,u,h){this.gl=t,u&&(e=a.setPrecision(e,u),r=a.setPrecision(r,u)),this.program=i.compileProgram(t,e,r,h),this.attributes=n.extractAttributes(t,this.program),this.uniformData=o.extractUniforms(t,this.program),this.uniforms=s.generateUniformAccessObject(t,this.uniformData)}return t.prototype.bind=function(){return this.gl.useProgram(this.program),this},t.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t}();e.GLShader=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6),n=r(0),o=r(43),a=r(1),s=r(31),u=function(){function t(t){this._nextTextureLocation=0,this.renderer=t,this.gl=t.gl,this._managedTextures=[],this.renderer.addEventListener("onContextChange",this.onContextChange,this)}return t.prototype.onContextChange=function(){var t=this.gl,e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=new Array(e),this.emptyTextures=new Array(e);var r=i.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.renderer.CONTEXT_UID]={};for(var o=0;o<e;o++){var a=new s.default;a._glTextures[this.renderer.CONTEXT_UID]=r,this.boundTextures[o]=n,this.emptyTextures[o]=a,this.bindTexture(null,o)}},t.prototype.bindTexture=function(t,e,r){if((t=(t=t||this.emptyTextures[e]).baseTexture||t)._touchedId=this.renderer.textureGC.count,r)e=e||0;else{for(var i=0;i<this.boundTextures.length;i++)if(this.boundTextures[i]===t)return i;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,o=t._glTextures[this.renderer.CONTEXT_UID];return o?(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.boundTextures[e]!==t&&n.bindTexture(n.TEXTURE_2D,o.texture),this.boundTextures[e]=t):this.updateTexture(t,e),e},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){t="Event"===t.instanceType?t.target.baseTexture||t.target:t.baseTexture||t;var r=this.gl,a=!!t._glRenderTargets;if(!t.hasLoaded)return null;var s=this.boundTextures;if(void 0===e){e=0;for(var u=0;u<s.length;++u)if(s[u]===t){e=u;break}}s[e]=t,this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e));var h=t._glTextures[this.renderer.CONTEXT_UID];if(h)a?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):t.source.data?h.uploadData(t.source.data,t.width,t.height):h.upload(t.source);else{if(a){var l=new o.default(this.gl,t.width,t.height,t.scaleMode,!1);l.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=l,h=l.texture}else(h=new i.GLTexture(this.gl,null,null,null,null)).premultiplyAlpha=!0,t.source.data?h.uploadData(t.source.data,t.width,t.height):h.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=h,t.addEventListener("update",this.updateTexture,this),t.addEventListener("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&h.enableMipmap(),t.wrapMode===n.WRAP_MODES.CLAMP?h.enableWrapClamp():t.wrapMode===n.WRAP_MODES.REPEAT?h.enableWrapRepeat():h.enableWrapMirrorRepeat()):h.enableWrapClamp(),t.scaleMode===n.SCALE_MODES.NEAREST?h.enableNearestScaling():h.enableLinearScaling()}return h},t.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===t&&(this.boundTextures[r]=this.emptyTextures[r],this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.renderer.CONTEXT_UID].texture))},t.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var r=this.renderer.CONTEXT_UID,i=t._glTextures,n=t._glRenderTargets;if(i[r]&&(this.unbindTexture(t),i[r].destroy(),t.removeEventListener("update",this.updateTexture,this),t.removeEventListener("dispose",this.destroyTexture,this),delete i[r],!e)){var o=this._managedTextures.indexOf(t);-1!==o&&a.removeItems(this._managedTextures,o,1)}n&&n[r]&&(n[r].destroy(),delete n[r])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0)}this.renderer.removeEventListener("onContextChange",this.onContextChange,this),this.renderer=null,this._managedTextures=null},t}();e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=3600,this.checkCountMax=600,this.mode=i.GC_MODES.AUTO}return t.prototype.update=function(){this.count++,this.mode!==i.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n._glRenderTargets&&this.count-n._touchedId>this.maxIdle&&(t.destroyTexture(n,!0),e[i]=null,r=!0)}if(r){var o=0;for(i=0;i<e.length;i++)null!==e[i]&&(e[o++]=e[i]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t}();e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),n=function(){function t(t){this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=i.mapWebGLBlendModes(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(t=1;t<this.maxAttribs;t++)this.gl.disableVertexAttribArray(t)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t.prototype.resetTo3D=function(){this.setDepthTest(1),this.setFrontFace(0),this.setCullFace(1)},t}();e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(40),n=function(){function t(t){this.renderer=t,this.emptyRenderer=new i.default(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t}();e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(68),n=function(){function t(t){this.renderer=t,this.scissor=!1,this.scissorData=null,this.scissorRenderTarget=null,this.enableScissor=!0,this.alphaMaskPool=[],this.alphaMaskIndex=0}return t.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(e)},t.prototype.popMask=function(t,e){e.texture?this.popSpriteMask():this.popStencilMask()},t.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new i.SpriteMaskFilter(e)]),r[0].resolution=1,r[0].maskSprite=e;var n=t.filterArea;t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,r),t.filterArea=n,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(t){this.renderer.batchManager.flush(),this.renderer.stencilManager.pushStencil(t)},t.prototype.popStencilMask=function(){this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(t,e){e.renderable=!0;var r=this.renderer._activeRenderTarget,i=e.getBounds();i.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(i.x,r.root?r.size.height-i.y-i.height:i.y,i.width,i.height),this.scissorRenderTarget=r,this.scissorData=e,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},t.prototype.destroy=function(){this.renderer=null},t}();e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6);function n(t){for(var e,r=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),n={},o=t.replace(/\s+/g," ").split(/\s*;\s*/),a=0;a<o.length;a++){var s=o[a].trim();if(s.indexOf("uniform")>-1){var u=s.split(" "),h=u[1],l=u[2],c=1;l.indexOf("[")>-1&&(e=l.split(/\[|]/),l=e[0],c*=Number(e[1])),l.match(r)||(n[l]={value:i.defaultValue(h,c),name:l,type:h})}}return n}e.default=function(t,e){var r=n(t),i=n(e);return Object.assign(r,i)}},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),a=["precision highp float;","varying vec2 v_rgbNW;","varying vec2 v_rgbNE;","varying vec2 v_rgbSW;","varying vec2 v_rgbSE;","varying vec2 v_rgbM;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform vec4 filterArea;","#ifndef FXAA_REDUCE_MIN","#define FXAA_REDUCE_MIN   (1.0/ 128.0)","#endif","#ifndef FXAA_REDUCE_MUL","#define FXAA_REDUCE_MUL   (1.0 / 8.0)","#endif","#ifndef FXAA_SPAN_MAX","#define FXAA_SPAN_MAX     8.0","#endif","vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,","vec2 v_rgbNW, vec2 v_rgbNE,","vec2 v_rgbSW, vec2 v_rgbSE,","vec2 v_rgbM) {","vec4 color;","mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);","vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;","vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;","vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;","vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;","vec4 texColor = texture2D(tex, v_rgbM);","vec3 rgbM  = texColor.xyz;","vec3 luma = vec3(0.299, 0.587, 0.114);","float lumaNW = dot(rgbNW, luma);","float lumaNE = dot(rgbNE, luma);","float lumaSW = dot(rgbSW, luma);","float lumaSE = dot(rgbSE, luma);","float lumaM  = dot(rgbM,  luma);","float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));","float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));","mediump vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *","(0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);","float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);","dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),","max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * inverseVP;","vec3 rgbA = 0.5 * (","texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +","texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);","vec3 rgbB = rgbA * 0.5 + 0.25 * (","texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +","texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);","float lumaB = dot(rgbB, luma);","if ((lumaB < lumaMin) || (lumaB > lumaMax))","color = vec4(rgbA, texColor.a);","else","color = vec4(rgbB, texColor.a);","return color;","}","void main() {","vec2 fragCoord = vTextureCoord * filterArea.xy;","vec4 color;","color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);","gl_FragColor = color;","}"].join("\n"),s=function(t){function e(){return t.call(this,"precision highp float;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat3 projectionMatrix;varying vec2 v_rgbNW;varying vec2 v_rgbNE;varying vec2 v_rgbSW;varying vec2 v_rgbSE;varying vec2 v_rgbM;uniform vec4 filterArea;varying vec2 vTextureCoord;vec2 mapCoord( vec2 coord ){coord *= filterArea.xy;coord += filterArea.zw;return coord;}vec2 unmapCoord( vec2 coord ){coord -= filterArea.zw;coord /= filterArea.xy;return coord;}void texcoords(vec2 fragCoord, vec2 resolution,out vec2 v_rgbNW, out vec2 v_rgbNE,out vec2 v_rgbSW, out vec2 v_rgbSE,out vec2 v_rgbM) {vec2 inverseVP = 1.0 / resolution.xy;v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;v_rgbM = vec2(fragCoord * inverseVP);}void main(void) {gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);vTextureCoord = aTextureCoord;vec2 fragCoord = vTextureCoord * filterArea.xy;texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);}",a)||this}return n(e,t),e}(o.default);e.default=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),a=r(14),s=function(t){function e(e,r){void 0===e&&(e=.5),void 0===r&&(r=Math.random());var i=t.call(this,a.defaultVert,"precision mediump float;varying vec2 vTextureCoord;varying vec4 vColor;uniform float uNoise;uniform float uSeed;uniform sampler2D uSampler;float rand(vec2 co){return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);}void main(){vec4 color = texture2D(uSampler, vTextureCoord);float randomValue = rand(gl_FragCoord.xy * uSeed);float diff = (randomValue - 0.5) * uNoise;if (color.a > 0.0) {color.rgb /= color.a;}color.r += diff;color.g += diff;color.b += diff;color.rgb *= color.a;gl_FragColor = color;}")||this;return i.noise=e,i.seed=r,i}return n(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(o.default);e.default=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),a=r(2),s=r(14),u=function(t){function e(e,r){var i=this,n=new a.Matrix;return e.renderable=!1,(i=t.call(this,s.defaultFilterMatrix,"precision mediump float;varying vec2 vFilterCoord;varying vec2 vTextureCoord;uniform vec2 scale;uniform sampler2D uSampler;uniform sampler2D mapSampler;uniform vec4 filterArea;uniform vec4 filterClamp;void main(void){vec4 map = texture2D(mapSampler, vFilterCoord);map -= 0.5;map.xy *= scale / filterArea.xy;gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));}")||this).maskSprite=e,i.maskMatrix=n,i.uniforms.mapSampler=e._texture,i.uniforms.filterMatrix=n,i.uniforms.scale={x:1,y:1},null==r&&(r=20),i.scale=new a.Point(r,r),i}return n(e,t),e.prototype.apply=function(t,e,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(o.default);e.default=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(69),a=r(73),s=function(t){function e(e,r,i,n){var s=t.call(this)||this;return s.blurXFilter=new o.default(e,r,i,n),s.blurYFilter=new a.default(e,r,i,n),s.padding=0,s.resolution=i||1,s.quality=r||4,s.blur=e||8,s}return n(e,t),e.prototype.apply=function(t,e,r){var i=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,i,!0),this.blurYFilter.apply(t,i,r,!1),t.returnRenderTarget(i)},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),e}(r(5).default);e.default=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),a=r(14),s=function(t){function e(e){var r=t.call(this,a.defaultVert,"precision mediump float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float m[20];uniform float uAlpha;void main(void){vec4 c = texture2D(uSampler, vTextureCoord);if (uAlpha == 0.0) {gl_FragColor = c;return;}if (c.a > 0.0) {c.rgb /= c.a;}vec4 result;result.r = (m[0] * c.r);result.r += (m[1] * c.g);result.r += (m[2] * c.b);result.r += (m[3] * c.a);result.r += m[4];result.g = (m[5] * c.r);result.g += (m[6] * c.g);result.g += (m[7] * c.b);result.g += (m[8] * c.a);result.g += m[9];result.b = (m[10] * c.r);result.b += (m[11] * c.g);result.b += (m[12] * c.b);result.b += (m[13] * c.a);result.b += m[14];result.a = (m[15] * c.r);result.a += (m[16] * c.g);result.a += (m[17] * c.b);result.a += (m[18] * c.a);result.a += m[19];vec3 rgb = mix(c.rgb, result.rgb, uAlpha);rgb *= result.a;gl_FragColor = vec4(rgb, result.a);}")||this;return r.uniforms.m=e||[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r.alpha=1,r}return n(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),i=Math.sin(t),n=1/3,o=(0,Math.sqrt)(n),a=[r+(1-r)*n,n*(1-r)-o*i,n*(1-r)+o*i,0,0,n*(1-r)+o*i,r+n*(1-r),n*(1-r)-o*i,0,0,n*(1-r)-o*i,n*(1-r)+o*i,r+n*(1-r),0,0,0,0,0,1,0];this._loadMatrix(a,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,i=-.5*(r-1),n=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var r=2*t/3+1,i=-.5*(r-1),n=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,r,i,n){var o=((r=r||16770432)>>16&255)/255,a=(r>>8&255)/255,s=(255&r)/255,u=((i=i||3375104)>>16&255)/255,h=(i>>8&255)/255,l=(255&i)/255,c=[.3,.59,.11,0,0,o,a,s,t=t||.2,0,u,h,l,e=e||.15,0,o-u,a-h,s-l,0,0];this._loadMatrix(c,n)},e.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(o.default);e.default=s,s.prototype.grayscale=s.prototype.greyscale},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),a=r(14),s=function(t){function e(e){void 0===e&&(e=1);var r=t.call(this,a.defaultVert,"precision mediump float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float uAlpha;void main(void){gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;}")||this;return r.alpha=e,r.glShaderKey="alpha",r}return n(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(o.default);e.default=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),a=r(2),s=r(74),u=function(t){function e(e){var r=this,i=new a.Matrix;return r=t.call(this,"attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat3 projectionMatrix;uniform mat3 otherMatrix;varying vec2 vMaskCoord;varying vec2 vTextureCoord;void main(void){gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);vTextureCoord = aTextureCoord;vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;}","precision mediump float;varying vec2 vMaskCoord;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform sampler2D mask;uniform float alpha;uniform vec4 maskClamp;void main(void){float clip = step(3.5,step(maskClamp.x, vMaskCoord.x) +step(maskClamp.y, vMaskCoord.y) +step(vMaskCoord.x, maskClamp.z) +step(vMaskCoord.y, maskClamp.w));vec4 original = texture2D(uSampler, vTextureCoord);vec4 masky = texture2D(mask, vMaskCoord);original *= (masky.a * alpha * clip);gl_FragColor = original;}")||this,e.renderable=!1,r.maskSprite=e,r.maskMatrix=i,r}return n(e,t),e.prototype.apply=function(t,e,r){var i=this.maskSprite,n=this.maskSprite.texture;n&&n.valid&&(n.transform||(n.transform=new s.default(n,0)),n.transform.update(),this.uniforms.mask=n,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(n.transform.mapCoord),this.uniforms.alpha=i._worldAlpha,this.uniforms.maskClamp=n.transform.uClampFrame,t.applyFilter(this,e,r))},e}(o.default);e.default=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),a=r(14),s=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","const float resolution=1024.0;","uniform float radius;","uniform vec2 dir;","void main() {","vec4 sum = vec4(0.0);","vec2 tc = vTextureCoord;","float blur = radius/resolution;","float hstep = dir.x;","float vstep = dir.y;","sum += texture2D(uSampler, vec2(tc.x - 4.0*blur*hstep, tc.y - 4.0*blur*vstep)) * 0.0162162162;","sum += texture2D(uSampler, vec2(tc.x - 3.0*blur*hstep, tc.y - 3.0*blur*vstep)) * 0.0540540541;","sum += texture2D(uSampler, vec2(tc.x - 2.0*blur*hstep, tc.y - 2.0*blur*vstep)) * 0.1216216216;","sum += texture2D(uSampler, vec2(tc.x - 1.0*blur*hstep, tc.y - 1.0*blur*vstep)) * 0.1945945946;","sum += texture2D(uSampler, vec2(tc.x, tc.y)) * 0.2270270270;","sum += texture2D(uSampler, vec2(tc.x + 1.0*blur*hstep, tc.y + 1.0*blur*vstep)) * 0.1945945946;","sum += texture2D(uSampler, vec2(tc.x + 2.0*blur*hstep, tc.y + 2.0*blur*vstep)) * 0.1216216216;","sum += texture2D(uSampler, vec2(tc.x + 3.0*blur*hstep, tc.y + 3.0*blur*vstep)) * 0.0540540541;","sum += texture2D(uSampler, vec2(tc.x + 4.0*blur*hstep, tc.y + 4.0*blur*vstep)) * 0.0162162162;","vec4 cc= texture2D(uSampler,vTextureCoord );","gl_FragColor =vec4(sum.rgb, cc.a);","}"].join("\n"),u=function(t){function e(e){void 0===e&&(e=.5);var r=t.call(this,a.defaultVert,s)||this;return r.blur=e,r.uniforms.dir=[1,1],r}return n(e,t),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blur},set:function(t){this._blur!==t&&(t>1&&(t=1),t<0&&(t=0),this._blur=t,this.uniforms.radius=10*t)},enumerable:!1,configurable:!0}),e}(o.default);e.default=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AdvancedBloomFilter=void 0;var o=r(136),a=r(5),s=r(14),u=r(137),h=["precision mediump float;","uniform sampler2D uSampler;","varying vec2 vTextureCoord;","uniform sampler2D bloomTexture;","uniform float bloomScale;","uniform float brightness;","void main() {","vec4 color = texture2D(uSampler, vTextureCoord);","color.rgb *= brightness;","vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);","bloomColor.rgb *= bloomScale;","gl_FragColor = color + bloomColor;","}"].join("\n"),l=function(t){function e(e){var r=t.call(this,s.defaultVert,h)||this;"number"==typeof e&&(e={threshold:e}),e=Object.assign({threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:1},e),r.bloomScale=e.bloomScale,r.brightness=e.brightness;var i=e.kernels,n=e.blur,a=e.quality,l=e.pixelSize,c=e.resolution;return r._extractFilter=new o.ExtractBrightnessFilter(e.threshold),r._extractFilter.resolution=c,r._blurFilter=i?new u.KawaseBlurFilter(i):new u.KawaseBlurFilter(n,a),r.pixelSize=l,r.resolution=c,r}return n(e,t),e.prototype.apply=function(t,e,r,i){var n=t.getRenderTarget();this._extractFilter.apply(t,e,n,!0);var o=t.getRenderTarget();this._blurFilter.apply(t,n,o,!0),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=o,t.applyFilter(this,e,r,i),t.returnRenderTarget(o),t.returnRenderTarget(n)},Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t,this._extractFilter&&(this._extractFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"threshold",{get:function(){return this._extractFilter.threshold},set:function(t){this._extractFilter.threshold=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(t){this._blurFilter.kernels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(t){this._blurFilter.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(t){this._blurFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(t){this._blurFilter.pixelSize=t},enumerable:!1,configurable:!0}),e}(a.default);e.AdvancedBloomFilter=l},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ExtractBrightnessFilter=void 0;var o=r(5),a=r(14),s=["precision mediump float;","uniform sampler2D uSampler;","varying vec2 vTextureCoord;","uniform float threshold;","void main() {","vec4 color = texture2D(uSampler, vTextureCoord);","float _max = max(max(color.r, color.g), color.b);","float _min = min(min(color.r, color.g), color.b);","float brightness = (_max + _min) * 0.5;","if(brightness > threshold) {","gl_FragColor = color;","} else {","gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);","}","}"].join("\n"),u=function(t){function e(e){void 0===e&&(e=.5);var r=t.call(this,a.defaultVert,s)||this;return r.threshold=e,r}return n(e,t),Object.defineProperty(e.prototype,"threshold",{get:function(){return this.uniforms.threshold},set:function(t){this.uniforms.threshold=t},enumerable:!1,configurable:!0}),e}(o.default);e.ExtractBrightnessFilter=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.KawaseBlurFilter=void 0;var o=r(5),a=r(14),s=r(2),u=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform vec2 uOffset;","uniform vec4 filterClamp;","void main(void)","{","vec4 color = vec4(0.0);","color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));","color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));","color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));","color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));","color *= 0.25;","gl_FragColor = color;","}"].join("\n"),h=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform vec2 uOffset;","void main(void)","{","vec4 color = vec4(0.0);","color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));","color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));","color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));","color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));","color *= 0.25;","gl_FragColor = color;","}"].join("\n"),l=function(t){function e(e,r,i){void 0===e&&(e=4),void 0===r&&(r=3),void 0===i&&(i=!1);var n=t.call(this,a.defaultVert,i?u:h)||this;return n.uniforms.uOffset=new Float32Array(2),n._pixelSize=new s.Point,n.pixelSize=1,n._clamp=i,n._kernels=null,Array.isArray(e)?n.kernels=e:(n._blur=e,n.quality=r),n}return n(e,t),e.prototype.apply=function(t,e,r,i){var n,o=this.pixelSize.x/e.size.width,a=this.pixelSize.y/e.size.height;if(1===this._quality||0===this._blur)n=this._kernels[0]+.5,this.uniforms.uOffset[0]=n*o,this.uniforms.uOffset[1]=n*a,t.applyFilter(this,e,r,i);else{for(var s=t.getRenderTarget(),u=e,h=s,l=void 0,c=this._quality-1,f=0;f<c;f++)n=this._kernels[f]+.5,this.uniforms.uOffset[0]=n*o,this.uniforms.uOffset[1]=n*a,t.applyFilter(this,u,h,!0),l=u,u=h,h=l;n=this._kernels[c]+.5,this.uniforms.uOffset[0]=n*o,this.uniforms.uOffset[1]=n*a,t.applyFilter(this,u,r,i),t.returnRenderTarget(s)}},e.prototype._generateKernels=function(){var t=this._blur,e=this._quality,r=[t];if(t>0)for(var i=t,n=t/e,o=1;o<e;o++)i-=n,r.push(i);this._kernels=r},Object.defineProperty(e.prototype,"kernels",{get:function(){return this._kernels},set:function(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof s.Point?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blur},set:function(t){this._blur=t,this._generateKernels()},enumerable:!1,configurable:!0}),e}(o.default);e.KawaseBlurFilter=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.renderer=t,this.stencilMaskStack=null}return t.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},t.prototype.pushStencil=function(t){this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,r,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),t.renderable=!0;var i=t._worldAlpha;t._worldAlpha=1,t.renderWebGL(this.renderer),this.renderer.batchManager.flush(),t.renderable=!1,t._worldAlpha=i,this._useCurrent()},t.prototype.popStencil=function(){var t=this.renderer.gl,e=this.stencilMaskStack.pop();if(0===this.stencilMaskStack.length)t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0);else{t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0;var r=e._worldAlpha;e._worldAlpha=1,e.renderWebGL(this.renderer),this.renderer.batchManager.flush(),e.renderable=!1,e._worldAlpha=r,this._useCurrent()}},t.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){this.renderer=null,this.stencilMaskStack=null},t}();e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=r(43),o=r(140),a=r(1),s=r(6),u=r(142),h=function(){function t(){this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new i.Rectangle,this.destinationFrame=new i.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),l=function(){function t(t){this.renderer=t,this.gl=this.renderer.gl,this.quad=new o.default(this.gl,t.state.attribState),this.shaderCache={},this.pool={},this.filterData=null,this.managedFilters=[],this.renderer.addEventListener("onPreRender",this.onPreRender,this),this._screenWidth=t.width,this._screenHeight=t.height}return t.prototype.pushFilter=function(t,e){var r=this.renderer,i=this.filterData;if(!i){var n=new h;n.sourceFrame=n.destinationFrame=this.renderer._activeRenderTarget.size,n.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=i={index:0,stack:[n]},this.filterData=i}var o=i.stack[++i.index],a=i.stack[0].destinationFrame;o||(o=i.stack[i.index]=new h);var s=e[0].resolution,u=0|e[0].padding,l=t.filterArea||t.getBounds(!0),c=o.sourceFrame,f=o.destinationFrame;c.x=(l.x*s|0)/s,c.y=(l.y*s|0)/s,c.width=(l.width*s|0)/s,c.height=(l.height*s|0)/s,i.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(a),c.pad(u),f.width=c.width,f.height=c.height;var p=this.getPotRenderTarget(r.gl,c.width,c.height,s);o.target=t,o.filters=e,o.resolution=s,o.renderTarget=p,p.setFrame(f,c),r.bindRenderTarget(p),p.clear()},t.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],r=t.stack[t.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var i=r.filters;if(1===i.length)i[0].apply(this,r.renderTarget,e.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var n=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var a=0;for(a=0;a<i.length-1;++a){i[a].apply(this,n,o,!0,r);var s=n;n=o,o=s}i[a].apply(this,n,e.renderTarget,!1,r),this.freePotRenderTarget(n),this.freePotRenderTarget(o)}r.clear(),t.index--,0===t.index&&(this.filterData=null)},t.prototype.applyFilter=function(t,e,r,i){var n=this.renderer,o=n.gl,a=t.glShaders[n.CONTEXT_UID];a||(t.glShaderKey?(a=this.shaderCache[t.glShaderKey])||(a=new s.GLShader(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[n.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=a,this.managedFilters.push(t)):(a=t.glShaders[n.CONTEXT_UID]=new s.GLShader(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),n.bindVao(null),this.quad.initVao(a)),n.bindVao(this.quad.vao),n.bindRenderTarget(r),i&&(o.disable(o.SCISSOR_TEST),n.clear(),o.enable(o.SCISSOR_TEST)),r===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(a);var u=this.renderer.textureManager.emptyTextures[0];this.renderer.textureManager.boundTextures[0]=u,this.syncUniforms(a,t),n.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,u._glTextures[this.renderer.CONTEXT_UID].texture),this.renderer.textureManager.currentLocation=-1},t.prototype.syncUniforms=function(t,e){var r,i=e.uniformData,n=e.uniforms,o=1;if(t.uniforms.filterArea){r=this.filterData.stack[this.filterData.index];var a=t.uniforms.filterArea;a[0]=r.renderTarget.size.width,a[1]=r.renderTarget.size.height,a[2]=r.sourceFrame.x,a[3]=r.sourceFrame.y,t.uniforms.filterArea=a}if(t.uniforms.filterClamp){r=r||this.filterData.stack[this.filterData.index];var s=t.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(r.sourceFrame.width-1)/r.renderTarget.size.width,s[3]=(r.sourceFrame.height-1)/r.renderTarget.size.height,t.uniforms.filterClamp=s}for(var u in i){var h=i[u].type;if("sampler2d"===h&&0!==n[u]){if(n[u].baseTexture)t.uniforms[u]=this.renderer.textureManager.bindTexture(n[u].baseTexture,o);else{t.uniforms[u]=o;var l=this.renderer.gl;this.renderer.textureManager.boundTextures[o]=this.renderer.textureManager.emptyTextures[o],l.activeTexture(l.TEXTURE0+o),n[u].texture.bind()}o++}else if("mat3"===h)void 0!==n[u].a?t.uniforms[u]=n[u].toArray(!0):t.uniforms[u]=n[u];else if("vec2"===h)if(void 0!==n[u].x){var c=t.uniforms[u]||new Float32Array(2);c[0]=n[u].x,c[1]=n[u].y,t.uniforms[u]=c}else t.uniforms[u]=n[u];else"float"===h?t.uniforms.data[u].value!==i[u]&&(t.uniforms[u]=n[u]):t.uniforms[u]=n[u]}},t.prototype.getRenderTarget=function(t,e){var r=this.filterData.stack[this.filterData.index],i=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,e||r.resolution);return i.setFrame(r.destinationFrame,r.sourceFrame),i},t.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},t.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return u.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return u.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},t.prototype.calculateSpriteMatrix=function(t,e){var r=this.filterData.stack[this.filterData.index];return u.calculateSpriteMatrix(t,r.sourceFrame,r.renderTarget.size,e)},t.prototype.destroy=function(t){void 0===t&&(t=!1);var e=this.renderer,r=this.managedFilters;e.removeEventListener("onPreRender",this.onPreRender,this),this.renderer=null;for(var i=0;i<r.length;i++)t||r[i].glShaders[e.CONTEXT_UID].destroy(),delete r[i].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},t.prototype.getPotRenderTarget=function(t,e,r,i){var o="screen";r*=i,(e*=i)===this._screenWidth&&r===this._screenHeight||(o=(65535&(e=a.nextPow2(e)))<<16|65535&(r=a.nextPow2(r))),this.pool[o]||(this.pool[o]=[]);var s=this.pool[o].pop();if(!s){var u=this.renderer.textureManager.boundTextures[0];t.activeTexture(t.TEXTURE0),s=new n.default(t,e,r,void 0),t.bindTexture(t.TEXTURE_2D,u._glTextures[this.renderer.CONTEXT_UID].texture),this.renderer.textureManager.currentLocation=-1}return s.resolution=i,s.defaultFrame.width=s.size.width=e/i,s.defaultFrame.height=s.size.height=r/i,s.filterPoolKey=o,s},t.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0)}this.pool={}},t.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},t.prototype.onPreRender=function(){if(this._screenWidth!==this.renderer.width||this._screenHeight!==this.renderer.height){this._screenWidth=this.renderer.width,this._screenHeight=this.renderer.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},t}();e.default=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(141),n=r(6),o=function(){function t(t,e){this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=i.createIndicesForQuads(1),this.vertexBuffer=n.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=n.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new n.VertexArrayObject(t,e)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+e.width/t.width,this.uvs[3]=i,this.uvs[4]=r+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=r,this.uvs[7]=i+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),this.gl=null,this.vertices=null,this.uvs=null,this.interleaved=null,this.indices=null,this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.vao.destroy()},t}();e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createIndicesForQuads=void 0,e.createIndicesForQuads=function(t){for(var e=6*t,r=new Uint16Array(e),i=0,n=0;i<e;i+=6,n+=4)r[i+0]=n+0,r[i+1]=n+1,r[i+2]=n+2,r[i+3]=n+0,r[i+4]=n+2,r[i+5]=n+3;return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateSpriteMatrix=e.calculateNormalizedScreenSpaceMatrix=e.calculateScreenSpaceMatrix=void 0;var i=r(2);e.calculateScreenSpaceMatrix=function(t,e,r){var i=t.identity();return i.translate(e.x/r.width,e.y/r.height),i.scale(r.width,r.height),i},e.calculateNormalizedScreenSpaceMatrix=function(t,e,r){var i=t.identity();i.translate(e.x/r.width,e.y/r.height);var n=r.width/e.width,o=r.height/e.height;return i.scale(n,o),i},e.calculateSpriteMatrix=function(t,e,r,n){var o=n._texture.orig,a=t.set(r.width,0,0,r.height,e.x,e.y),s=i.Matrix.TEMP_MATRIX.copy(n.worldMatrix);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(n.anchorTexture.x,n.anchorTexture.y),a}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GDispatcher=void 0;var i=r(13);e.GDispatcher=new i.EventDispatcher},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,r,i,n){void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=null);var o=t.call(this)||this;return o._instanceType="GraphicsData",o.shape=e,o.lineStyle=i,o.fillStyle=r,o.matrix=n,o.holes=[],o.type=e.type,o.points=[],o}return n(e,t),e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(r(4).HashObject);e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=r(0),o=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.x=t,this.y=e,this.radius=r,this.type=n.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.isPointIn=function(t){if(this.radius<=0)return!1;var e=this.radius*this.radius,r=this.x-t.x,i=this.y-t.y;return(r*=r)+(i*=i)<=e},t.prototype.getBounds=function(){return new i.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=r(0),o=function(){function t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t,this.y=e,this.width=r,this.height=i,this.type=n.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.isPointIn=function(t){if(this.width<=0||this.height<=0)return!1;var e=(t.x-this.x)/this.width,r=(t.y-this.y)/this.height;return(e*=e)+(r*=r)<=1},t.prototype.getBounds=function(){return new i.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(29),n=r(0),o=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(Array.isArray(t[0])&&(t=t[0]),t[0]instanceof i.Point){for(var r=[],o=0,a=t.length;o<a;o++)r.push(t[o].x,t[o].y);t=r}this.closed=!0,this.points=t,this.type=n.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.isPointIn=function(t){for(var e=t.x,r=t.y,i=!1,n=this.points.length/2,o=0,a=n-1;o<n;a=o++){var s=this.points[2*o],u=this.points[2*o+1],h=this.points[2*a],l=this.points[2*a+1];u>r!=l>r&&e<(r-u)/(l-u)*(h-s)+s&&(i=!i)}return i},t}();e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=function(){function t(t,e,r,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=20),this.x=t,this.y=e,this.width=r,this.height=n;var a=(r<n?r:n)/2;o=(o=o<0?-o:o)>a?a:o,this.radius=o,this.type=i.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.isPointIn=function(t){var e=t.x,r=t.y;if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){if(r>=this.y+this.radius&&r<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var i=e-(this.x+this.radius),n=r-(this.y+this.radius),o=this.radius*this.radius;if(i*i+n*n<=o)return!0;if((i=e-(this.x+this.width-this.radius))*i+n*n<=o)return!0;if(i*i+(n=r-(this.y+this.height-this.radius))*n<=o)return!0;if((i=e-(this.x+this.radius))*i+n*n<=o)return!0}return!1},t}();e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(79);e.default={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,n=t.holes,o=e.verts,a=e.indices;if(r.length>=6){for(var s=[],u=0;u<n.length;u++){var h=n[u];s.push(r.length/2),r=r.concat(h.points)}var l=i.earcut(r,s,2);if(!l)return;var c=o.length/2;for(u=0;u<l.length;u+=3)a.push(l[u]+c),a.push(l[u+1]+c),a.push(l[u+2]+c);for(u=0;u<r.length;u++)o.push(r[u])}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0);e.default={build:function(t){var e,r,n=t.shape,o=t.points,a=n.x,s=n.y;if(o.length=0,t.type===i.SHAPES.CIRC?(e=n.radius,r=n.radius):(e=n.width,r=n.height),0!==e&&0!==r){var u=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height));u/=2.3;for(var h=2*Math.PI/u,l=0;l<u;l++)o.push(a+Math.sin(h*l)*e,s+Math.cos(h*l)*r);o.push(o[0],o[1])}},triangulate:function(t,e){var r=t.points,i=e.verts,n=e.indices,o=i.length/2,a=o;i.push(t.shape.x,t.shape.y);for(var s=0;s<r.length;s+=2)i.push(r[s],r[s+1]),n.push(o++,a,o)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={build:function(t){var e=t.shape,r=e.x,i=e.y,n=e.width,o=e.height,a=t.points;a.length=0,a.push(r,i,r+n,i,r+n,i+o,r,i+o)},triangulate:function(t,e){var r=t.points,i=e.verts,n=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(79);function n(t,e,r){return t+(e-t)*r}function o(t,e,r,i,o,a,s){void 0===s&&(s=[]);for(var u=s,h=0,l=0,c=0,f=0,p=0,d=0,v=0,y=0;v<=20;++v)h=n(t,r,y=v/20),l=n(e,i,y),c=n(r,o,y),f=n(i,a,y),p=n(h,c,y),d=n(l,f,y),u.push(p,d);return u}e.default={build:function(t){var e=t.shape,r=t.points,i=e.x,n=e.y,a=e.width,s=e.height,u=e.radius;r.length=0,r.push(i,n+u),o(i,n+s-u,i,n+s,i+u,n+s,r),o(i+a-u,n+s,i+a,n+s,i+a,n+s-u,r),o(i+a,n+u,i+a,n,i+a-u,n,r),o(i+u,n,i,n,i,n+u+1e-10,r)},triangulate:function(t,e){for(var r=t.points,n=e.verts,o=e.indices,a=n.length/2,s=i.earcut(r,null,2),u=0,h=s.length;u<h;u+=3)o.push(s[u]+a),o.push(s[u+1]+a),o.push(s[u+2]+a);for(u=0,h=r.length;u<h;u++)n.push(r[u],r[++u])}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=r(0);e.default=function(t,e){!function(t,e){var r=t.shape,o=t.points||r.points.slice();if(0===o.length)return;var a=t.lineStyle,s=new i.Point(o[0],o[1]),u=new i.Point(o[o.length-2],o[o.length-1]),h=r.type!==n.SHAPES.POLY,l=s.x===u.x&&s.y===u.y;if(l||h){o=o.slice(),l&&(o.pop(),o.pop(),u.set(o[o.length-2],o[o.length-1]));var c=u.x+.5*(s.x-u.x),f=u.y+.5*(s.y-u.y);o.unshift(c,f),o.push(c,f)}var p=e.verts,d=o.length/2,v=o.length,y=p.length/2,_=a.width/2,m=o[0],g=o[1],x=o[2],b=o[3],M=0,T=0,w=-(g-b),E=m-x,O=0,S=0,P=0,A=0,C=Math.sqrt(w*w+E*E);w/=C,E/=C,w*=_,E*=_;var D=a.alignment,R=2*(1-D),I=2*D;p.push(m-w*R,g-E*R),p.push(m+w*I,g+E*I);for(var j=1;j<d-1;++j){m=o[2*(j-1)],g=o[2*(j-1)+1],x=o[2*j],b=o[2*j+1],M=o[2*(j+1)],T=o[2*(j+1)+1],w=-(g-b),E=m-x,C=Math.sqrt(w*w+E*E),w/=C,E/=C,w*=_,E*=_,O=-(b-T),S=x-M,C=Math.sqrt(O*O+S*S),O/=C,S/=C;var L=-E+g-(-E+b),N=-w+x-(-w+m),B=(-w+m)*(-E+b)-(-w+x)*(-E+g),F=-(S*=_)+T-(-S+b),k=-(O*=_)+x-(-O+M),z=(-O+M)*(-S+b)-(-O+x)*(-S+T),V=L*k-F*N;if(Math.abs(V)<.1)V+=10.1,p.push(x-w*R,b-E*R),p.push(x+w*I,b+E*I);else{var U=(N*z-k*B)/V,G=(F*B-L*z)/V;(U-x)*(U-x)+(G-b)*(G-b)>196*_*_?(P=w-O,A=E-S,C=Math.sqrt(P*P+A*A),P/=C,A/=C,P*=_,A*=_,p.push(x-P*R,b-A*R),p.push(x+P*I,b+A*I),p.push(x-P*I*R,b-A*R),v++):(p.push(x+(U-x)*R,b+(G-b)*R),p.push(x-(U-x)*I,b-(G-b)*I))}}m=o[2*(d-2)],g=o[2*(d-2)+1],x=o[2*(d-1)],b=o[2*(d-1)+1],w=-(g-b),E=m-x,C=Math.sqrt(w*w+E*E),w/=C,E/=C,w*=_,E*=_,p.push(x-w*R,b-E*R),p.push(x+w*I,b+E*I);var X=e.indices;for(j=0;j<v-2;++j)X.push(y,y+1,y+2),y++}(t,e)}},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.width=0,this.alignment=.5,this.native=!1},e}(r(80).default);e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bezierCurveLength=e.quadraticCurveLength=e.GRAPHICS_CURVES=void 0;var i=r(156);Object.defineProperty(e,"bezierCurveTo",{enumerable:!0,get:function(){return i.default}});var n=r(157);Object.defineProperty(e,"bezierCurveControlPoint",{enumerable:!0,get:function(){return n.bezierCurveControlPoint}}),e.GRAPHICS_CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048,segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive)return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},e.quadraticCurveLength=function(t,e,r,i,n,o){var a=t-(2*r+n),s=e-(2*i+o),u=(r-2)*t*2,h=(i-2)*e*2,l=4*(a*a+s*s),c=4*(a*u+s*h),f=u*u+h*h,p=2*Math.sqrt(l+c+f),d=Math.sqrt(l),v=2*l*d,y=2*Math.sqrt(f),_=c/d;return(v*p+d*c*(p-y)+(4*f*l-c*c)*Math.log((2*d+_+p)/(_+y)))/(4*v)},e.bezierCurveLength=function(t,e,r,i,n,o,a,s){for(var u=0,h=0,l=0,c=0,f=0,p=0,d=0,v=0,y=0,_=0,m=0,g=t,x=e,b=1;b<=10;++b)_=g-(v=(d=(p=(f=1-(h=b/10))*f)*f)*t+3*p*h*r+3*f*(l=h*h)*n+(c=l*h)*a),m=x-(y=d*e+3*p*h*i+3*f*l*o+c*s),g=v,x=y,u+=Math.sqrt(_*_+m*m);return u}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r,i,n,o,a,s,u,h){void 0===h&&(h=[]);var l=0,c=0,f=0,p=0,d=0;h.push(t,e);for(var v=1,y=0;v<=u;++v)f=(c=(l=1-(y=v/u))*l)*l,d=(p=y*y)*y,h.push(f*t+3*c*y*r+3*l*p*n+d*a,f*e+3*c*y*i+3*l*p*o+d*s);return h}},function(t,e,r){"use strict";function i(t){if(t.length>2){var e=[],r=[];e[0]={x:t[0].x+(t[1].x-t[0].x)/4,y:t[0].y+(t[1].y-t[0].y)/4},r[0]=o(t,0),e[t.length-2]=n(t,t.length-2),r[t.length-2]={x:t[t.length-1].x-(t[t.length-1].x-t[t.length-2].x)/4,y:t[t.length-1].y-(t[t.length-1].y-t[t.length-2].y)/4};for(var i=1;i<t.length-2;i++)e[i]=n(t,i),r[i]=o(t,i);return{A:e,B:r}}}function n(t,e){return{x:t[e].x+(t[e+1].x-t[e-1].x)/4,y:t[e].y+(t[e+1].y-t[e-1].y)/4}}function o(t,e){return{x:t[e+1].x-(t[e+2].x-t[e].x)/4,y:t[e+1].y-(t[e+2].y-t[e].y)/4}}Object.defineProperty(e,"__esModule",{value:!0}),e.bezierCurveControlPoint=void 0,e.bezierCurveControlPoint=i},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=void 0;var o=r(9),a=r(0),s=r(1),u=function(t){function e(){var e=t.call(this)||this;e._command=[],e.hitTestByPixel=!0,e._instanceType="Shape";var r=s.createCanvas();return r.width=3,r.height=3,e.texture=o.default.fromCanvas(r,"shapeCanvas"),o.default.addToCache(e.texture,e.texture.baseTexture.textureCacheIds[0]),e.canvas=r,e.context=r.getContext("2d"),e.dirty=!0,e}return n(e,t),e.prototype.drawRoundedRect=function(t,e,r,i,n,o,a,s){void 0===n&&(n=0);var u=(r<i?r:i)/2,h=0,l=0,c=0,f=0;null==o&&(o=n),null==a&&(a=n),null==s&&(s=n),n<0&&(n*=h=-1),n>u&&(n=u),o<0&&(o*=l=-1),o>u&&(o=u),s<0&&(s*=c=-1),s>u&&(s=u),a<0&&(a*=f=-1),a>u&&(a=u);var p=this._command;return p[p.length]=[1,"moveTo",[t+r-o,e]],p[p.length]=[1,"arcTo",[t+r+o*l,e-o*l,t+r,e+o,o]],p[p.length]=[1,"lineTo",[t+r,e+i-s]],p[p.length]=[1,"arcTo",[t+r+s*c,e+i+s*c,t+r-s,e+i,s]],p[p.length]=[1,"lineTo",[t+a,e+i]],p[p.length]=[1,"arcTo",[t-a*f,e+i+a*f,t,e+i-a,a]],p[p.length]=[1,"lineTo",[t,e+n]],p[p.length]=[1,"arcTo",[t-n*h,e-n*h,t+n,e,n]],p[p.length]=[1,"closePath",[]],this},e.prototype.moveTo=function(t,e){return this._command[this._command.length]=[1,"moveTo",[t,e]],this},e.prototype.lineTo=function(t,e){return this._command[this._command.length]=[1,"lineTo",[t,e]],this},e.prototype.arcTo=function(t,e,r,i,n){return this._command[this._command.length]=[1,"arcTo",[t,e,r,i,n]],this},e.prototype.quadraticCurveTo=function(t,e,r,i){return this._command[this._command.length]=[1,"quadraticCurveTo",[t,e,r,i]],this},e.prototype.bezierCurveTo=function(t,e,r,i,n,o){return this._command[this._command.length]=[1,"bezierCurveTo",[t,e,r,i,n,o]],this},e.prototype.closePath=function(){return this._command[this._command.length]=[1,"closePath",[]],this},e.prototype.drawRect=function(t,e,r,i){var n=this._command;return n[n.length]=[1,"moveTo",[t,e]],n[n.length]=[1,"lineTo",[t+r,e]],n[n.length]=[1,"lineTo",[t+r,e+i]],n[n.length]=[1,"lineTo",[t,e+i]],n[n.length]=[1,"closePath",[]],this},e.prototype.arc=function(t,e,r,i,n,o){return void 0===o&&(o=!1),this._command[this._command.length]=[1,"arc",[t,e,r,i,n,o]],this},e.prototype.drawCircle=function(t,e,r,i){return void 0===i&&(i=!1),this._command[this._command.length]=[1,"arc",[t,e,r,0,2*Math.PI,i]],this},e.prototype.drawEllipse=function(t,e,r,i){var n=.5522848,o=r/2*n,a=i/2*n,s=t+r,u=e+i,h=t+r/2,l=e+i/2,c=this._command;return c[c.length]=[1,"moveTo",[t,l]],c[c.length]=[1,"bezierCurveTo",[t,l-a,h-o,e,h,e]],c[c.length]=[1,"bezierCurveTo",[h+o,e,s,l-a,s,l]],c[c.length]=[1,"bezierCurveTo",[s,l+a,h+o,u,h,u]],c[c.length]=[1,"bezierCurveTo",[h-o,u,t,l+a,t,l]],this},e.prototype.clear=function(){var t=this;return t._command=[],t.dirty=!0,t},e.prototype.beginFill=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1),"string"==typeof t&&(t=s.string2hex(t));var r=s.getRGBA(s.hex2string(t),e);return this._fill(r),this},e.prototype.beginGradientFill=function(t,e){return this._fill(s.getGradientColor(t,e)),this},e.prototype.beginBitmapFill=function(t,e){var r=this;return e&&(r._isBitmapFill=e),r._fill(s.getCanvasBitmapStyle(t)),r},e.prototype._fill=function(t){var e=this._command;e[e.length]=[0,"fillStyle",t],e[e.length]=[1,"beginPath",[]],this.dirty=!0},e.prototype.beginStroke=function(t,e,r,i,n,o){void 0===e&&(e=1),void 0===r&&(r=a.LINE_CAP.BUTT),void 0===i&&(i=a.LINE_JOIN.MITER),void 0===n&&(n=0),void 0===o&&(o=1);var u=s.getRGBA(s.hex2string(t),o);return this._stroke(u,e,r,i,n),this},e.prototype.beginGradientStroke=function(t,e,r,i,n,o){return void 0===r&&(r=1),void 0===i&&(i=a.LINE_CAP.BUTT),void 0===n&&(n=a.LINE_JOIN.MITER),void 0===o&&(o=10),this._stroke(s.getGradientColor(t,e),r,i,n,o),this},e.prototype.beginBitmapStroke=function(t,e,r,i,n,o){void 0===r&&(r=1),void 0===i&&(i=a.LINE_CAP.BUTT),void 0===n&&(n=a.LINE_JOIN.MITER),void 0===o&&(o=10);var u=this;return e&&(u._isBitmapStroke=e),u._stroke(s.getCanvasBitmapStyle(t),r,i,n,o),u},e.prototype._stroke=function(t,e,r,i,n){var o=this._command;o[o.length]=[0,"lineWidth",e],o[o.length]=[0,"lineCap",r],o[o.length]=[0,"lineJoin",i],o[o.length]=[0,"miterLimit",n],o[o.length]=[0,"strokeStyle",t],o[o.length]=[1,"beginPath",[]],this.dirty=!0},e.prototype.endFill=function(){var t=this,e=t._command,r=t._isBitmapFill;return r&&(e[e.length]=[2,"setTransform",r]),e[e.length]=[1,"fill",[]],r&&(t._isBitmapFill=null),t},e.prototype.endStroke=function(){var t=this,e=t._command,r=t._isBitmapStroke;return r&&(e[e.length]=[2,"setTransform",r]),e[e.length]=[1,"stroke",[]],r&&(t._isBitmapStroke=null),t},e.prototype.updateShape=function(){var t=this;if(t.visible&&t.dirty){t.dirty=!1,t._boundsID++;var e,r,i,n,o,a,s=t._command.length,u=0,h=0,l=0;for(o=0;o<s;o++)if(1==(a=t._command[o])[0]){if("moveTo"==a[1]||"lineTo"==a[1]||"arcTo"==a[1]||"bezierCurveTo"==a[1])null==e&&(e=a[2][0]),null==r&&(r=a[2][1]),null==i&&(i=a[2][0]),null==n&&(n=a[2][1]),"bezierCurveTo"==a[1]?(e=Math.min(e,a[2][0],a[2][2],a[2][4]),r=Math.min(r,a[2][1],a[2][3],a[2][5]),i=Math.max(i,a[2][0],a[2][2],a[2][4]),n=Math.max(n,a[2][1],a[2][3],a[2][5]),u=a[2][4],h=a[2][5]):(e=Math.min(e,a[2][0]),r=Math.min(r,a[2][1]),i=Math.max(i,a[2][0]),n=Math.max(n,a[2][1]),u=a[2][0],h=a[2][1]);else if("quadraticCurveTo"==a[1]){var c=.5*(u+a[2][0]),f=.5*(h+a[2][1]),p=.5*(a[2][0]+a[2][2]),d=.5*(a[2][1]+a[2][3]);null==e&&(e=c),null==r&&(r=f),null==i&&(i=c),null==n&&(n=f),e=Math.min(e,c,p,a[2][2]),r=Math.min(r,f,d,a[2][3]),i=Math.max(i,c,p,a[2][2]),n=Math.max(n,f,d,a[2][3]),u=a[2][2],h=a[2][3]}else if("arc"==a[1]){var v=a[2][0],y=a[2][1],_=a[2][2],m=v-_,g=y-_,x=v+_,b=y+_;null==e&&(e=m),null==r&&(r=g),null==i&&(i=x),null==n&&(n=b),e=Math.min(e,m),r=Math.min(r,g),i=Math.max(i,x),n=Math.max(n,b)}}else"lineWidth"==a[1]&&l<a[2]&&(l=a[2]);if(null!=e||l>0){null==e&&(e=0,r=0);var M=(i+=20+l>>1)-(e-=20+l>>1),T=(n+=20+l>>1)-(r-=20+l>>1);t.offsetX=e,t.offsetY=r,t._localBoundsSelf.x=e+10,t._localBoundsSelf.y=r+10,t._localBoundsSelf.width=M-20,t._localBoundsSelf.height=T-20;var w=t.canvas,E=t.context;w.width=M,w.height=T,E.clearRect(0,0,M,T),E.setTransform(1,0,0,1,-e,-r),t._drawShape(E),t.anchorTexture.set(-e/M,-r/T)}else t.canvas.width=0,t.canvas.height=0,t.offsetX=0,t.offsetY=0,t._localBoundsSelf.clear(),t.anchorTexture.set(0,0);t.texture.update(),t._onTextureUpdate()}},e.prototype._drawShape=function(t){for(var e,r=this,i=r._command,n=i.length,o=r.offsetX,a=r.offsetY,s=0;s<n;s++)if((e=i[s])[0]>0){var u=e[2].length;if(0==u)t[e[1]]();else if(2==u)t[e[1]](e[2][0],e[2][1]);else if(4==u)t[e[1]](e[2][0],e[2][1],e[2][2],e[2][3]);else if(5==u)t[e[1]](e[2][0],e[2][1],e[2][2],e[2][3],e[2][4]);else if(6==u){var h=e[2][4],l=e[2][5];2==e[0]&&(h-=o,l-=a),t[e[1]](e[2][0],e[2][1],e[2][2],e[2][3],h,l)}}else t[e[1]]=e[2]},e.prototype.hitTestPoint=function(e,r){void 0===r&&(r=!1);var i=this;this.updateShape();var n=t.prototype.hitTestPoint.call(this,e,r);if(!n)return null;if(n!=i)return n;if(!i.hitTestByPixel)return i;var o=e;r&&(o=i.globalToLocal(e));var a=i._texture;if(!a||0==a.width||0==a.height)return null;o.x-=i.offsetX,o.y-=i.offsetY;var u=s.getBackupCanvasCtx();u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,1,1),u.setTransform(1,0,0,1,-o.x,-o.y),u.drawImage(i.canvas,0,0);var h=u.getImageData(0,0,1,1);return h&&h.data?h.data[3]>0?i:null:i},e.prototype.changeColor=function(t){for(var e=this,r=e._command.length,i=e._command,n=0;n<r;n++)0==i[n][0]&&("fillStyle"==i[n][1]&&t.fillColor&&i[n][2]!=t.fillColor&&(i[n][2]=t.fillColor,e.dirty=!0),"strokeStyle"==i[n][1]&&t.strokeColor&&i[n][2]!=t.strokeColor&&(i[n][2]=t.strokeColor,e.dirty=!0),"lineWidth"==i[n][1]&&t.lineWidth&&i[n][2]!=t.lineWidth&&(i[n][2]=t.lineWidth,e.dirty=!0))},e.prototype.calculateBounds=function(){this.updateShape(),t.prototype.calculateBounds.call(this)},e.prototype._renderCanvas=function(e){this.updateShape(),t.prototype._renderCanvas.call(this,e)},e.prototype._renderWebGL=function(e){this.updateShape(),t.prototype._renderWebGL.call(this,e)},e.prototype.destroy=function(){var e=this;e._command=null,e._isBitmapStroke=null,e._isBitmapFill=null,t.prototype.destroy.call(this)},e}(r(20).default);e.Shape=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.NineSlicePlane=void 0;var o=r(82),a=r(32),s=o.calculatePlaneIndices(4,4),u=function(t){function e(e,r,i,n,o){void 0===r&&(r=10),void 0===i&&(i=10),void 0===n&&(n=10),void 0===o&&(o=10);var a=t.call(this,e)||this;return a._origWidth=e.orig.width,a._origHeight=e.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=r,a._rightWidth=n,a._topHeight=i,a._bottomHeight=o,a._indices=s,a._vertices=new Float32Array(32),a._uvs=new Float32Array(32),a.refresh(!0),a}return n(e,t),e.prototype.updateHorizontalVertices=function(){var t=this._vertices,e=this._topHeight+this._bottomHeight,r=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this._vertices,e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this._worldAlpha,t.setBlendMode(this.blendMode);var r=this.worldMatrix;e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty);var i=this.texture.baseTexture,n=i.source,o=i.width,a=i.height;this.drawSegment(e,n,o,a,0,1,10,11),this.drawSegment(e,n,o,a,2,3,12,13),this.drawSegment(e,n,o,a,4,5,14,15),this.drawSegment(e,n,o,a,8,9,18,19),this.drawSegment(e,n,o,a,10,11,20,21),this.drawSegment(e,n,o,a,12,13,22,23),this.drawSegment(e,n,o,a,16,17,26,27),this.drawSegment(e,n,o,a,18,19,28,29),this.drawSegment(e,n,o,a,20,21,30,31)},e.prototype.drawSegment=function(t,e,r,i,n,o,a,s){var u=this._uvs,h=this._vertices,l=(u[a]-u[n])*r,c=(u[s]-u[o])*i,f=h[a]-h[n],p=h[s]-h[o];l<1&&(l=1),c<1&&(c=1),f<1&&(f=1),p<1&&(p=1),t.drawImage(e,u[n]*r,u[o]*i,l,c,h[n],h[o],f,p)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._needRefresh=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._needRefresh=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._needRefresh=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._needRefresh=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._needRefresh=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._needRefresh=!0},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this._uvs,e=this.texture;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var r=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this._vertexDirty++,this.multiplyUvs()},e}(a.Mesh);e.NineSlicePlane=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Rope=void 0;var o=function(t){function e(e,r){var i=t.call(this,e)||this;return i.points=r,i._vertices=new Float32Array(4*r.length),i._uvs=new Float32Array(4*r.length),i._indices=new Uint16Array(6*(r.length-1)),i.textureHeight=e.height,i.refresh(!0),i.refreshVertices(),i}return n(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this.texture._uvs){this._vertices.length/4!==t.length&&(this._vertices=new Float32Array(4*t.length),this._uvs=new Float32Array(4*t.length),this._indices=new Uint16Array(6*(t.length-1)));var e=this._uvs,r=this._indices;e[0]=0,e[1]=0,e[2]=0,e[3]=1;for(var i=t.length,n=1;n<i;n++){var o=n/(i-1);e[s=4*n]=o,e[s+1]=0,e[s+2]=o,e[s+3]=1}var a=0;for(n=0;n<i-1;n++){var s=2*n;r[a++]=s,r[a++]=s+1,r[a++]=s+2,r[a++]=s+2,r[a++]=s+1,r[a++]=s+3}this.multiplyUvs()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1)){if(this._vertices.length/4!==t.length)return this._refresh(),void this.refreshVertices();for(var e,r=t[0],i=0,n=0,o=this._vertices,a=t.length,s=0;s<a;s++){var u=t[s],h=4*s;n=-((e=s<t.length-1?t[s+1]:u).x-r.x),i=e.y-r.y;var l=10*(1-s/(a-1));l>1&&(l=1);var c=Math.sqrt(i*i+n*n),f=this.textureHeight/2;i/=c,n/=c,i*=f,n*=f,o[h]=u.x+i,o[h+1]=u.y+n,o[h+2]=u.x-i,o[h+3]=u.y-n,r=u}this._vertexDirty++}},e.prototype.update=function(){t.prototype.update.call(this),(this.autoUpdateVertices||this.textureHeight!==this.texture.height)&&(this.textureHeight=this.texture.height,this.refreshVertices())},e}(r(32).Mesh);e.Rope=o},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(162),e),n(r(163),e),n(r(33),e),n(r(164),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.EditableText=void 0;var o=r(33),a=r(25),s=r(0),u=function(t){function e(){var e=t.call(this)||this;e._prompt="",e._promptColor="#eeeeee",e._textColor="#000000",e._instanceType="EditableText";var r=e,i=function(){r.htmlElement&&r.htmlElement.blur(),r.htmlElement.style.display="none",r.htmlElement.value?(r.text=r.htmlElement.value,r.fillColor=r.textColor):(r.text=r.prompt,r.fillColor=r.promptColor),window.scrollTo(0,0)};return e.addEventListener(a.MouseEvent.CLICK,(function(t){r.initElement(),r.htmlElement.style.font=r.size+"px "+this.font,r.htmlElement.style.color=r.textColor,r.htmlElement.style.textAlign=r.textAlign,r.htmlElement.style.height=r.textHeight+"px",r.htmlElement.style.width=r.textWidth+"px",r.text!==r.prompt&&(r.htmlElement.value=r.text),r.text="",r.htmlElement.style.display="block",r.htmlElement.focus();var e=r.transform.worldMatrix,n=r.stage._dpi||r.stage.dpi;r.htmlElement.style.transform=r.htmlElement.style.webkitTransform="matrix("+(e.a/n).toFixed(4)+","+(e.b/n).toFixed(4)+","+(e.c/n).toFixed(4)+","+(e.d/n).toFixed(4)+","+(e.tx/n).toFixed(4)+","+(e.ty/n).toFixed(4)+")",r.stage.once(a.MouseEvent.MOUSE_UP,i)})),e}return n(e,t),Object.defineProperty(e.prototype,"prompt",{get:function(){return this._prompt},set:function(t){this._prompt!=t&&(this._prompt=t,this.dirty=!0,this.htmlElement&&this.htmlElement.value||(this.text=this._prompt))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promptColor",{get:function(){return this._promptColor},set:function(t){this._promptColor!=t&&(this._promptColor=t,this.dirty=!0,this.htmlElement&&this.htmlElement.value||(this.fillColor=this._promptColor))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._textColor},set:function(t){this._textColor!=t&&(this._textColor=t,this.dirty=!0,this.htmlElement&&this.htmlElement.value&&(this.fillColor=this._textColor))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inputValue",{get:function(){return this.htmlElement&&this.htmlElement.value||(this.text!=this._prompt?this.text:"")},set:function(t){this.htmlElement&&(this.htmlElement.value=t),this.text=t,this.fillColor=this.textColor},enumerable:!1,configurable:!0}),e.prototype.initElement=function(){var t=this;if(!t.htmlElement){t.htmlElement=document.createElement("input");var e=t.htmlElement,r=e.style;e.type="input",r.position="absolute",r.display="none",r.transformOrigin=r.WebkitTransformOrigin=r.webkitTransformOrigin="0 0 0",r.outline="none",r.borderWidth="thin",r.borderColor="#000",e.placeholder="",r.borderStyle="none",r.backgroundColor="transparent";var i=t.stage.canvas.parentNode;i?i.insertBefore(e,i.childNodes[0]):document.body.appendChild(e),e.onblur=function(){"ios"==s.osType&&window.scrollTo({top:0,left:0,behavior:"smooth"})}}},e}(o.TextField);e.EditableText=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.InputText=void 0;var o=r(0),a=r(8),s=r(24),u=r(54),h=r(33),l=function(t){function e(r){void 0===r&&(r=0);var i=t.call(this)||this;i.inputType=0,i.isAutoDownKeyBoard=!0;var n=null,u=i;u._instanceType="InputText",r<2?(n=document.createElement("input")).type=e._inputTypeList[r]:((n=document.createElement("textarea")).style.resize="none",n.style.overflow="hidden"),u.inputType=r;var h=function(){u.isAutoDownKeyBoard&&"pc"!=o.osType&&(u.htmlElement&&u.htmlElement.blur(),window.scrollTo(0,0))}.bind(u);return u.addEventListener(a.Event.REMOVED_FROM_STAGE,(function(t){u.stage.removeEventListener(s.MouseEvent.MOUSE_UP,h)})),u.addEventListener(a.Event.ADDED_TO_STAGE,(function(t){u.stage.addEventListener(s.MouseEvent.MOUSE_UP,h)})),u.init(n),i}return n(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e);var r=this;r.htmlElement.style.outline="none",r.htmlElement.style.borderWidth="thin",r.htmlElement.style.borderColor="#000"},e.prototype.initInfo=function(t,e,r,i,n,o,a,s,u){void 0===u&&(u=!1);var h=this;h.htmlElement.placeholder=t,h.htmlElement.style.font=i+"px "+(n||"微软雅黑"),h.htmlElement.style.color=e,h.htmlElement.style.textAlign=r,h.border=u,h.textWidth=o,h.textHeight=a,2==h.inputType&&(h.htmlElement.style.lineHeight=s+"px")},Object.defineProperty(e.prototype,"lineSpacing",{get:function(){return parseInt(this.htmlElement.style.lineHeight)},set:function(t){this.htmlElement.style.lineHeight=t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bold",{get:function(){return"bold"==this.htmlElement.style.fontWeight},set:function(t){var e=this.htmlElement.style;e.fontWeight=t?"bold":"normal"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"italic",{get:function(){return"italic"==this.htmlElement.style.fontStyle},set:function(t){var e=this.htmlElement.style;e.fontStyle=t?"italic":"normal"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return parseInt(this.htmlElement.style.height)},set:function(t){this.htmlElement.style.height=t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return parseInt(this.htmlElement.style.width)},set:function(t){this.htmlElement.style.width=t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.htmlElement.style.color},set:function(t){this.htmlElement.style.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"border",{get:function(){return"none"!=this.htmlElement.style.borderStyle},set:function(t){var e=this;t?(e.htmlElement.style.borderStyle="inset",e.htmlElement.style.backgroundColor="#fff"):(e.htmlElement.style.borderStyle="none",e.htmlElement.style.backgroundColor="transparent")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){if(this.htmlElement)return this.htmlElement.value},set:function(t){this.htmlElement&&(this.htmlElement.value=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxCharacters",{get:function(){var t=this.htmlElement.getAttribute("maxlength");return null===t?0:t},set:function(t){this.htmlElement.setAttribute("maxlength",t)},enumerable:!1,configurable:!0}),e.prototype.convertToTextField=function(t){return this.htmlElement&&this.text?((t=t||new h.TextField).fillColor=this.color,t.text=this.text,t.size=parseInt(this.htmlElement.style.font.split("px")[0]),t.textAlign=this.htmlElement.style.textAlign,t.bold=this.bold,t.italic=this.italic,t.textWidth=this.textWidth,t.lineType=2==this.inputType?o.TEXT_lINETYPE.MULTI:o.TEXT_lINETYPE.SINGLE,t.position.copy(this.position),t.scale.copy(this.scale),t.rotation=this.rotation,t):null},e._inputTypeList=["input","password","textarea"],e}(u.FloatDisplay);e.InputText=l},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.BitmapText=void 0;var o=r(0),a=r(11),s=[],u=function(t){function e(e){var r=t.call(this)||this;return r._textAlign=o.TEXT_ALIGN.CENTER,r._verticalAlign=o.VERTICAL_ALIGN.MIDDLE,r._gap=0,r.textures=e,r}return n(e,t),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this._textAlign},set:function(t){this._textAlign!==t&&(this._textAlign=t,this.adaptate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!==t&&(this._verticalAlign=t,this.adaptate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gap",{get:function(){return this._gap},set:function(t){this._gap!=t&&(this._gap=t,this.adaptate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){if(t!==this._text){this._text=t;for(var e=t||[],r=0;r<e.length;r++)if(this.children[r])this.children[r].text=e[r];else{var i=s.shift();i?i.reset(this.textures):i=new h(this.textures),i.text=e[r],this.addChild(i)}if(this.children.length>e.length)for(r=this.children.length-1;r>=e.length;r--){var n=this.children[r];this.removeChild(n),s.push(n)}this.adaptate()}},enumerable:!1,configurable:!0}),e.prototype.adaptate=function(){if(this.children.length){for(var t,e=this.children.length,r=0,i=0;i<e;i++)r+=this.children[i].width;r+=(e-1)*this._gap,t=this._textAlign==o.TEXT_ALIGN.LEFT?0:this._textAlign==o.TEXT_ALIGN.RIGHT?-r:-r/2;for(var n=0,a=0;a<this.children.length;a++)this.children[a].x=t+n,n+=this.children[a].width+this._gap;var s=0;this._verticalAlign==o.VERTICAL_ALIGN.DOWN?s=-1:this._verticalAlign==o.VERTICAL_ALIGN.MIDDLE&&(s=-.5),this.children.forEach((function(t){t.y=t.height*s}))}},e}(a.Container);e.BitmapText=u;var h=function(t){function e(e){var r=t.call(this)||this;return r.textures=e,r}return n(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this.texture=this.textures[this._text]},enumerable:!1,configurable:!0}),e.prototype.reset=function(t){this.textures=t},e}(a.Sprite)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureSheet=void 0;var i=r(2),n=r(9);e.createTextureSheet=function(t,e){for(var r=e,o=Object.keys(r),a=0,s={};a<o.length;){var u=o[a],h=r[u],l=null,c=null,f=new i.Rectangle(0,0,Math.floor(h.sw),Math.floor(h.sh));l=h.ro?new i.Rectangle(Math.floor(h.x),Math.floor(h.y),Math.floor(h.h),Math.floor(h.w)):new i.Rectangle(Math.floor(h.x),Math.floor(h.y),Math.floor(h.w),Math.floor(h.h)),(h.ox||h.oy||h.w!=h.sw||h.h!=h.sh)&&(c=new i.Rectangle(Math.floor(h.ox),Math.floor(h.oy),Math.floor(h.w),Math.floor(h.h)));var p=new n.default(t,l,f,c,h.ro?2:0);n.default.addToCache(p,u),s[u]=p,a++}return s}},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(167),e),n(r(168),e),n(r(84),e),n(r(170),e),n(r(171),e),n(r(172),e),n(r(173),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;var o=r(20),a=r(24),s=r(83),u=function(t){function e(e,r,i){var n=t.call(this,e)||this;return n._clicked=!1,n._instanceType="Button",n.textureUp=e,n.textureDown=r===e?null:r,n.textureDisable=i||e,n.textureUp&&(n.anchorX=n.textureUp.width/2,n.anchorY=n.textureUp.height/2),n.initButton(),n}return n(e,t),e.prototype.changeTexture=function(t,e,r){this.textureUp=t,this.textureDown=e===t?null:e,this.textureDisable=r||t,this.textureUp&&(this.anchorX=this.textureUp.width/2,this.anchorY=this.textureUp.height/2),this._clicked&&this.textureDown?this.texture=this.textureDown:this.mouseEnable||this.textureStatusEnable?this.texture=this.textureUp:this.texture=this.textureDisable},e.prototype._mouseEvent=function(t){var e=this;e._clicked||(t.type==a.MouseEvent.MOUSE_DOWN?e.textureDown?e.texture=e.textureDown:(this.frames=null,s.default.removeTweens(this),s.default.get(this).to({scaleX:.9,scaleY:.9},50)):e.textureDown?e.texture=e.textureUp:(this.frames=this.framesOri,s.default.removeTweens(this),s.default.get(this).to({scaleX:1,scaleY:1},50)))},e.prototype.initButton=function(){var t=this;t.mouseChildren=!1,t.addEventListener("onMouseDown",t._mouseEvent,t),t.addEventListener("onMouseUp",t._mouseEvent,t),t.addEventListener("onMouseOut",t._mouseEvent,t),t.texture=t.textureUp},Object.defineProperty(e.prototype,"clicked",{get:function(){return this._clicked},set:function(t){var e=this;t!=e._clicked&&(t&&e._mouseEvent({type:"onMouseDown"}),e._clicked=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textureStatusEnable",{set:function(t){t?this.texture=this.textureUp:this.textureDisable&&(this.texture=this.textureDisable,this.frames=null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{set:function(t){this.mouseEnable=t,this.textureStatusEnable=t},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.textureUp=null,this.textureDown=null,this.textureDisable=null,s.default.removeTweens(this),t.prototype.destroy.call(this)},e}(o.default);e.Button=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.FrameAni=void 0;var o=r(8),a=r(20),s=function(t){function e(e){var r=t.call(this)||this;return r.loop=1,r.count=0,r.showImage=new a.default,r.showImage.anchorTexture.set(.5,.5),r.addChild(r.showImage),r.texturesAll=e,r.currentFrame=0,r.addEventListener(o.Event.ENTER_FRAME,r.onEnterFrame,r),r.frameRate=30,r}return n(e,t),Object.defineProperty(e.prototype,"currentFrame",{set:function(t){this.texturesAll[t]?this.showImage.texture=this.texturesAll[t]:this.showImage.texture=null},enumerable:!1,configurable:!0}),e.prototype.getCurrentFrame=function(){return this.texturesAll.indexOf(this.showImage.texture)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this.texturesAll.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameRate",{get:function(){return this._frameRate},set:function(t){this._frameRate=t,this.allTime=this.texturesAll.length/this._frameRate*1e3},enumerable:!1,configurable:!0}),e.prototype.onEnterFrame=function(){if(this.isPlay){var t=(Date.now()-this.startTime)/this.allTime;t>=1?(this.loop--,0==this.loop?(this.isPlay=!1,this.callback&&this.callback()):(this.startTime=Date.now(),this.currentFrame=0)):this.currentFrame=t*this.texturesAll.length>>0}},e.prototype.play=function(t,e){void 0===t&&(t=1),this.startTime=Date.now(),this.isPlay=!0,this.currentFrame=0,this.loop=t,this.callback=e},e.prototype.reset=function(t){void 0===t&&(t=0),this.isPlay=!1,this.currentFrame=t},e.prototype.resetTexturesAll=function(t){this.texturesAll=t,this.currentFrame=0,this.frameRate=30},e}(r(11).Container);e.FrameAni=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ease=void 0;var i=function(){function t(){}return t.get=function(t){return t<-1&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return e<.5?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var r=2*Math.PI;return function(i){if(0==i||1==i)return i;var n=e/r*Math.asin(1/t);return-t*Math.pow(2,10*(i-=1))*Math.sin((i-n)*r/e)}},t.getElasticOut=function(t,e){var r=2*Math.PI;return function(i){if(0==i||1==i)return i;var n=e/r*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-n)*r/e)+1}},t.getElasticInOut=function(t,e){var r=2*Math.PI;return function(i){var n=e/r*Math.asin(1/t);return(i*=2)<1?t*Math.pow(2,10*(i-=1))*Math.sin((i-n)*r/e)*-.5:t*Math.pow(2,-10*(i-=1))*Math.sin((i-n)*r/e)*.5+1}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.backIn=t.getBackIn(1.7),t.backOut=t.getBackOut(1.7),t.backInOut=t.getBackInOut(1.7),t.elasticIn=t.getElasticIn(1,.3),t.elasticOut=t.getElasticOut(1,.3),t.elasticInOut=t.getElasticInOut(1,.3*1.5),t}();e.Ease=i},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollList=void 0;var o=r(84),a=r(8),s=function(t){function e(e,r,i,n,o,s,u){void 0===s&&(s=!0),void 0===u&&(u=1);var h=t.call(this,n,o,0,s)||this;h._items=null,h._isInit=0,h.data=[],h.downL=null,h._lastFirstId=-1,h._updateId=-1;var l=h;return l._instanceType="ScrollList",l._itemW=r,l._itemH=i,l._items=[],l._itemClass=e,l._itemCount=0,l._cols=u,l._updateViewRect(),l.addEventListener(a.Event.ENTER_FRAME,l.flushData.bind(l)),h}return n(e,t),Object.defineProperty(e.prototype,"loadingView",{get:function(){return this.downL},enumerable:!1,configurable:!0}),e.prototype.updateData=function(t,e){void 0===e&&(e=!0);var r=this;if(!r._isInit||e?r.data=t:r.data=r.data.concat(t),r._isInit=1,r._lastFirstId=-1,r._updateId=-1,r.maxDistance=Math.ceil(r.data.length/r._cols)*r._itemRow,r.downL){r.downL[r.paramXY]=Math.max(r.distance,r.maxDistance);var i=r.downL.getWH();r.maxDistance+="x"==r.paramXY?i.width:i.height}},e.prototype.flushData=function(){var t=this;if(t._isInit>0&&t._updateId!=t.view.transform._localID){t._updateId=t.view.transform._localID;var e=t.view[t.paramXY]>0?0:(Math.abs(Math.floor(t.view[t.paramXY]/t._itemRow))-1)*t._cols;if((e=e<0?0:e)!=t._lastFirstId&&(t._lastFirstId=e,e!=t._items[0].id))for(var r=0;r<t._cols;r++)t.speed>0?t._items.unshift(t._items.pop()):t._items.push(t._items.shift());for(var i=0;i<t._itemCount;i++){var n=t._items[i];1==t._isInit&&(n.sli_id=-1),n.sli_id!=e&&(n.initData(t.data[e]?e:-1,t.data[e]),n[t.paramXY]=Math.floor(e/t._cols)*t._itemRow,n[t._disParam]=e%t._cols*t._itemCol,t.data[e]?(n.sli_id=e,n.visible=!0):(n.sli_id=-1,n.visible=!1)),e++}t._isInit=2}},e.prototype.setViewRect=function(e,r,i){t.prototype.setViewRect.call(this,e,r,i);var n=this;n._itemRow&&n._itemCol&&n._updateViewRect()},e.prototype._updateViewRect=function(){var t=this;t.isVertical?(t._disParam="x",t._itemRow=t._itemH,t._itemCol=t._itemW):(t._disParam="y",t._itemRow=t._itemW,t._itemCol=t._itemH);var e=(Math.ceil(t.distance/t._itemRow)+1)*t._cols;if(e!=t._itemCount){if(e>t._itemCount)for(var r=t._itemCount;r<e;r++){var i=new t._itemClass;i.id=-1,i.data=null,t._items.push(i),t.view.addChild(i)}else for(r=0;r<t._itemCount-e;r++)t.view.removeChild(t._items.pop());t._itemCount=e,t._lastFirstId=-1}},e.prototype.setLoading=function(t){var e=this;if(e.downL){e.view.removeChild(e.downL);var r=e.downL.getWH();e.maxDistance-="x"==e.paramXY?r.width:r.height,e.downL=null}if(t){e.downL=t,e.view.addChild(t),e.downL[e.paramXY]=Math.max(e.distance,e.maxDistance);r=e.downL.getWH();e.maxDistance+="x"==e.paramXY?r.width:r.height}else e.isStop=!1},e.prototype.destroy=function(){var e=this;e._items=null,e._itemClass=null,e.data=null,e.downL=null,t.prototype.destroy.call(this)},e}(o.ScrollPage);e.ScrollList=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ShowWord=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.playWords=function(t,e,r){var i=this;void 0===e&&(e=100);for(var n=t.split("\n"),o=[],a=0;a<n.length;a++){for(var s=n[a],u="",h=0;h<a;)u+=n[h],u+="\n",h++;for(var l=0;l<s.length;l++){var c=""+u;c+=s.substring(0,l+1),o.push(c)}}for(var f=function(t){var n=o[t];setTimeout((function(){i.text=n,t==o.length-1&&r&&r()}),e*t)},p=0;p<o.length;p++)f(p)},e}(r(33).TextField);e.ShowWord=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MovieClip=void 0;var o=r(12),a=r(9),s=r(20),u=r(8),h=r(1),l=r(2),c=r(15),f=r(44),p=function(t){function e(e){var r=t.call(this)||this;r.lockStep=!1,r._curFrame=1,r._isPlaying=!0,r._isFront=!0,r.frameCount=0,r._lastFrame=0,r.commonDeltaTime=1e3/60;var i=r;return i._instanceType="MovieClip",e&&i.init(e),r}return n(e,t),Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this._curFrame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFront",{get:function(){return this._isFront},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this.rawData&&this.rawData.frames||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoWidth",{get:function(){return this.rawData&&this.rawData.videoSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoHeight",{get:function(){return this.rawData&&this.rawData.videoSize.height},enumerable:!1,configurable:!0}),e.prototype.init=function(t){if(t){if(this.removeAllChildren(),this.startAniRangeFun&&this.removeEventListener(u.Event.ENTER_FRAME,this.startAniRangeFun,this),this.rawData=t,this.timeInterval=1e3/t.FPS,this.startTime=Date.now(),this.startFrame=1,this.deltaFrame=60/t.FPS,this.frameCount=this.deltaFrame,this._curFrame=1,t.images&&!t.textures)for(var e in t.textures={},t.images){var r=t.images[e];0!==r.indexOf("iVBO")&&0!==r.indexOf("/9j/2w")||(r="data:image/png;base64,"+r);var i=h.createImage();i.src=r,t.textures[e]=new a.default(new c.BaseTexture(i))}this.initChildren(t.sprites)}},e.prototype.initChildren=function(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i.imageKey){var n=this.addChild(new s.default(this.rawData.textures?this.rawData.textures[i.imageKey]:h.TextureCache[i.imageKey]||h.TextureCache[i.imageKey+".png"]||null));n.frames=i.frames,i.frames[0].alpha<.05?n.alpha=0:(n.alpha=i.frames[0].alpha,n.transform.localMatrix.copy(i.frames[0].transform),n.transform._parentID=-1),n.framesOri=i.frames,n.imageKey=i.imageKey}}},e.prototype.setImage=function(t,e){for(var r=[],i=0;i<this.children.length;i++)this.children[i].imageKey==t&&r.push(this.children[i]);if(r.length){var n=r[0].texture,o=n.width,s=n.height,u=h.createImage();u.onload=function(){var t;if(u.width==o&&u.height==s)t=a.default.from(u);else{var e=h.createCanvas();e.width=o,e.height=s;var i=e.getContext("2d"),n=o/s,l=u.width/u.height;n>l?i.drawImage(u,0,0,u.width,u.height,(o-l*s)/2,0,l*s,s):i.drawImage(u,0,0,u.width,u.height,0,(s-o/l)/2,o,o/l),t=a.default.fromCanvas(e)}r.forEach((function(e){e.texture=t}))},u.src=e}},e.prototype.stop=function(){this._isPlaying=!1},e.prototype.nextFrame=function(){var t=this;t._curFrame<t.totalFrames&&t._curFrame++,t._isPlaying=!1},e.prototype.prevFrame=function(){var t=this;t._curFrame>1&&t._curFrame--,t._isPlaying=!1},e.prototype.gotoAndStop=function(t){var e=this;e._isPlaying=!1,t>e.totalFrames&&(t=e.totalFrames),t<1&&(t=1),e._curFrame=t},e.prototype.play=function(t){void 0===t&&(t=!0);var e=this;e.frameCount=e.deltaFrame,e.startTime=Date.now(),e.startFrame=e._curFrame,e._isPlaying=!0,e._isFront=t},Object.defineProperty(e.prototype,"isInTimeFrame",{get:function(){return this.frameCount==this.deltaFrame},enumerable:!1,configurable:!0}),e.prototype.gotoAndPlay=function(t,e){void 0===e&&(e=!0);var r=this;r._isFront=e,r._isPlaying=!0,t>r.totalFrames&&(t=r.totalFrames),t<1&&(t=1),r.frameCount=r.deltaFrame,r.startTime=Date.now(),r._curFrame=t,r.startFrame=r._curFrame},e.prototype.startAniRange=function(t,e,r,i){var n=this;if(void 0===t&&(t=1),void 0===e&&(e=this.totalFrames),void 0===r&&(r=1),t=t||1,e=e||this.totalFrames,r=r||0,r=Math.max(0,r),t<1&&(t=1),t>this.totalFrames&&(t=this.totalFrames),e<1&&(e=1),e>this.totalFrames&&(e=this.totalFrames),t!==e){this._isFront=t<e,this.startAniRangeFun&&this.removeEventListener(u.Event.ENTER_FRAME,this.startAniRangeFun,this),this._curFrame=t,this.frameCount=this.deltaFrame,this.startTime=Date.now(),this.startFrame=this._curFrame,this._isPlaying=!0;var o=r?r+.5>>0:1/0;this.addEventListener(u.Event.ENTER_FRAME,this.startAniRangeFun=function(r){r.target._isFront?(r.target.currentFrame>=e||r.target._endMark)&&(--o<=0?(r.target.gotoAndStop(e),r.target.removeEventListener(u.Event.ENTER_FRAME,n.startAniRangeFun,n),n.startAniRangeFun=null,i&&i()):r.target.gotoAndPlay(t)):(r.target.currentFrame<=t||r.target._endMark)&&(--o<=0?(r.target.gotoAndStop(t),r.target.removeEventListener(u.Event.ENTER_FRAME,n.startAniRangeFun,n),n.startAniRangeFun=null,i&&i()):r.target.gotoAndPlay(e,!1))},this)}else this.gotoAndStop(t)},e.prototype.updateFrame=function(){var t=this;if(0!=t.totalFrames&&1!=t.totalFrames){var e=!1;if(t._lastFrame!=t._curFrame?(e=!0,t._lastFrame=t._curFrame,t.startTime=Date.now(),t.startFrame=t._curFrame,t._endMark=!1):t._isPlaying&&(t.lockStep?e=t.getCurFrameWhenLockStep():0==--t.frameCount&&(t.frameCount=t.deltaFrame,e=!0,t._isFront?(t._curFrame++,t._curFrame>t.totalFrames&&(t._curFrame=1)):(t._curFrame--,t._curFrame<1&&(t._curFrame=t.totalFrames)),t._lastFrame=t._curFrame)),e){for(var r=0,i=t.children.length;r<i;r++){var n=t.children[r];if(n.frames&&n.frames[t._curFrame-1]){var o=n.frames[t._curFrame-1];if(o.alpha<.05)n.alpha=0;else if(n.alpha=o.alpha,l.Matrix.isEqual(n.transform.localMatrix,o.transform)||(n.transform.localMatrix.copy(o.transform),n.transform._parentID=-1),o.maskPath){n.cusMask||(n.cusMask=new f.Shape),n.mask||(n.mask=n.addChild(n.cusMask));var a=n.mask;this.updateMask(a,o.maskPath)}else n.mask&&(n.removeChild(n.mask),n.mask=null)}}t.lockStep?t._endMark&&t.hasEventListener(u.Event.END_FRAME)&&t.dispatchEvent(u.Event.END_FRAME,{frameIndex:t._curFrame,frameName:"endFrame"}):(1==t._curFrame&&!t._isFront||t._curFrame==t.totalFrames&&t._isFront)&&t.hasEventListener(u.Event.END_FRAME)&&t.dispatchEvent(u.Event.END_FRAME,{frameIndex:t._curFrame,frameName:"endFrame"})}}},e.prototype.getCurFrameWhenLockStep=function(){var t=(Date.now()-this.startTime)/this.timeInterval>>0;return t==this.lastDeltaFrame?(this.frameCount=0,!1):(this._endMark=!1,this.frameCount=this.deltaFrame,this.lastDeltaFrame=t,this._isFront?(this._curFrame=(this.startFrame+t)%this.totalFrames,0==this._curFrame?(this._curFrame=this.totalFrames,this._endMark=!0):this._lastFrame>this._curFrame&&this._lastFrame!=this.totalFrames&&(this._endMark=!0)):(this._curFrame=(this.startFrame-t)%this.totalFrames,0==this._curFrame?this._curFrame=this.totalFrames:this._curFrame<0&&(this._curFrame+=this.totalFrames),(1==this._curFrame||this._lastFrame<this._curFrame&&1!=this._lastFrame)&&(this._endMark=!0)),this._lastFrame=this._curFrame,!0)},e.prototype.update=function(){this.updateFrame(),t.prototype.update.call(this)},e.prototype.destroy=function(){this.rawData=null,t.prototype.destroy.call(this)},e.prototype.updateMask=function(t,e){t.clear(),e._transform;var r={x:0,y:0,x1:0,y1:0,x2:0,y2:0};t.beginFill();e._d.replace(/([a-zA-Z])/g,"|||$1 ").replace(/,/g," ").split("|||").forEach((function(e){if(0!=e.length){var i=e.substr(0,1);if("MLHVCSQRZmlhvcsqrz".indexOf(i)>=0){var n=e.substr(1).trim().split(" ");switch(i){case"M":r.x=Number(n[0]),r.y=Number(n[1]),t.moveTo(r.x,r.y);break;case"m":r.x+=Number(n[0]),r.y+=Number(n[1]),t.moveTo(r.x,r.y);break;case"L":r.x=Number(n[0]),r.y=Number(n[1]),t.lineTo(r.x,r.y);break;case"l":r.x+=Number(n[0]),r.y+=Number(n[1]),t.lineTo(r.x,r.y);break;case"H":r.x=Number(n[0]),t.lineTo(r.x,r.y);break;case"h":r.x+=Number(n[0]),t.lineTo(r.x,r.y);break;case"V":r.y=Number(n[0]),t.lineTo(r.x,r.y);break;case"v":r.y+=Number(n[0]),t.lineTo(r.x,r.y);break;case"C":r.x1=Number(n[0]),r.y1=Number(n[1]),r.x2=Number(n[2]),r.y2=Number(n[3]),r.x=Number(n[4]),r.y=Number(n[5]),t.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y);break;case"c":r.x1=r.x+Number(n[0]),r.y1=r.y+Number(n[1]),r.x2=r.x+Number(n[2]),r.y2=r.y+Number(n[3]),r.x+=Number(n[4]),r.y+=Number(n[5]),t.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y);break;case"S":r.x1&&r.y1&&r.x2&&r.y2?(r.x1=r.x-r.x2+r.x,r.y1=r.y-r.y2+r.y,r.x2=Number(n[0]),r.y2=Number(n[1]),r.x=Number(n[2]),r.y=Number(n[3]),t.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y)):(r.x1=Number(n[0]),r.y1=Number(n[1]),r.x=Number(n[2]),r.y=Number(n[3]),t.quadraticCurveTo(r.x1,r.y1,r.x,r.y));break;case"s":r.x1&&r.y1&&r.x2&&r.y2?(r.x1=r.x-r.x2+r.x,r.y1=r.y-r.y2+r.y,r.x2=r.x+Number(n[0]),r.y2=r.y+Number(n[1]),r.x+=Number(n[2]),r.y+=Number(n[3]),t.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y)):(r.x1=r.x+Number(n[0]),r.y1=r.y+Number(n[1]),r.x+=Number(n[2]),r.y+=Number(n[3]),t.quadraticCurveTo(r.x1,r.y1,r.x,r.y));break;case"Q":r.x1=Number(n[0]),r.y1=Number(n[1]),r.x=Number(n[2]),r.y=Number(n[3]),t.quadraticCurveTo(r.x1,r.y1,r.x,r.y);break;case"q":r.x1=r.x+Number(n[0]),r.y1=r.y+Number(n[1]),r.x+=Number(n[2]),r.y+=Number(n[3]),t.quadraticCurveTo(r.x1,r.y1,r.x,r.y);break;case"A":case"a":break;case"Z":case"z":t.closePath()}}}})),t.endFill()},e.deepCopyFrames=function(t,e,r,i,n,o,a,s){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0);var u=[];o*=Math.PI/180;var h={};h.a=Math.cos(o)*i,h.b=Math.sin(o)*i,h.c=-Math.sin(o)*n,h.d=Math.cos(o)*n,h.tx=e+a-(a*h.a+s*h.c),h.ty=r+s-(a*h.b+s*h.d);for(var l=0;l<t.length;l++){var c=t[l],f=c.transform,p={alpha:0,transform:null};p.alpha=c.alpha,p.transform={a:h.a*f.a+h.b*f.c,b:h.a*f.b+h.b*f.d,c:h.c*f.a+h.d*f.c,d:h.c*f.b+h.d*f.d,tx:h.tx*f.a+h.ty*f.c+f.tx,ty:h.tx*f.b+h.ty*f.d+f.ty},u.push(p)}return u},e}(o.default);e.MovieClip=p},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.lottieToSvgaData=e.Lottie=void 0;var o=r(1),a=r(45),s=r(15),u=r(11),h=r(85),l=r(174),c=r(175),f=function(t){function e(e){var r=t.call(this)||this;return r.deltaFrame=1,r._instanceType="Lottie",e&&r.init(e),r}return n(e,t),Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this.rawData&&this.rawData.op-this.rawData.ip||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoWidth",{get:function(){return this.rawData&&this.rawData.w||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoHeight",{get:function(){return this.rawData&&this.rawData.h||0},enumerable:!1,configurable:!0}),e.prototype.init=function(t){t&&(this.rawData=t,this.timeInterval=1e3/t.fr,this.deltaFrame=60/t.fr,this.name=t.nm,t.assets&&!t.textures&&(t.textures={},t.assets.forEach((function(e){var r=o.createImage();r.src=e.p,t.textures[e.id]=new s.Texture(new s.BaseTexture(r))}))),this.initChildren())},e.prototype.initChildren=function(){for(var t=this.rawData.layers.slice(),e=t.length-1;e>=0;e--){var r=t[e];this.addChild(new u.Sprite(r.refId?this.rawData.textures?this.rawData.textures[r.refId]:o.TextureCache[r.refId]||o.TextureCache[r.refId+".png"]:null)).layerData=r}this.initState()},e.prototype.initState=function(t){void 0===t&&(t=this.children);for(var e=0;e<t.length;e++){var r=t[e];if(r.layerData){var i=r.layerData;r.alpha=i.ks.o.k[0]?i.ks.o.k[0].s[0]/100:i.ks.o.k/100,r.rotation=i.ks.r.k[0]?i.ks.r.k[0].s[0]:i.ks.r.k;var n="number"==typeof i.ks.a.k[0]?i.ks.a.k:i.ks.a.k[0].s;r.anchor.set(n[0],n[1]);n="number"==typeof i.ks.p.k[0]?i.ks.p.k:i.ks.p.k[0].s;r.position.set(n[0]-r.anchorX,n[1]-r.anchorY);n="number"==typeof i.ks.s.k[0]?i.ks.s.k:i.ks.s.k[0].s;r.scale.set(n[0]/100,n[1]/100),r.visible=i.ip<=0}r.children.length&&this.initState(r.children)}},e.prototype.play=function(t,e){void 0===t&&(t=0),this.stop(!0),this.loops=t,this.callback=e,this.addTweens()},e.prototype.stop=function(t){void 0===t&&(t=!1),a.Tween.removeTweens(this),this.children.forEach((function(t){a.Tween.removeTweens(t)})),t&&this.initState()},e.prototype.addTweens=function(t){var e=this;void 0===t&&(t=this.children);for(var r,i,n,o=function(){var e=t[u];if(e.layerData){var o=e.layerData;o.ks.o.k.length&&s.addTween(e,"o"),o.ks.r.k.length&&s.addTween(e,"r"),"number"!=typeof o.ks.p.k[0]&&s.addTween(e,"p"),"number"!=typeof o.ks.s.k[0]&&s.addTween(e,"s"),r=a.Tween.get(e,{loop:!0}),(o.ip>0||o.op<s.rawData.op)&&(i=o.ip<0?0:o.ip,n=o.op>s.rawData.op?s.rawData.op:o.op,r.wait(i*s.timeInterval).call((function(){e.visible=!0})).wait((n-i)*s.timeInterval).call((function(){e.visible=!1})).wait((s.rawData.op-n)*s.timeInterval))}e.children.length&&s.addTweens(e.children)},s=this,u=0;u<t.length;u++)o();a.Tween.get(this,{loop:!0}).wait((this.rawData.op-this.rawData.ip)*this.timeInterval).call((function(){0==--e.loops&&(e.stop(),e.callback&&e.callback())}))},e.prototype.addTween=function(t,e){var r=t.layerData.ks[e].k,i=a.Tween.get(t,{loop:!0}),n=0;if(t.layerData.ks[e].x){var o=t.layerData.ks[e].x,s=+o.replace(/[^0-9]/gi,"");if(o.indexOf("loopOut")>=0){for(var u=[],h=0,l=0;l<r.length;l++){if((O=r[l]).t>t.layerData.op)break;var c=(T=O.t-h)*this.timeInterval,f=P(O);0==l&&O.t>0?(i.wait(c),n+=c):0==l&&0==O.t?(i.set(f),u.push({obj:f,deltaT:T,deltaTime:c,isSet:!0})):O.t-h==1||1===O.h?(i.wait(c).set(f),u.push({obj:f,deltaT:T,deltaTime:c,isSet:!0}),n+=c):(i.to(f,c),u.push({obj:f,deltaT:T,deltaTime:c}),n+=c),h=O.t}if(o.indexOf("pingpong")>=0&&r[r.length-1].t<t.layerData.op){var v=Math.round((t.layerData.op-r[r.length-1].t)/(r[r.length-1].t-r[0].t));h+=v*(r[r.length-1].t-r[0].t);for(var y=!1;--v;){if(y)for(var _=0;_<u.length;_++)i.to(u[_].obj,u[_].deltaTime),n+=u[_].deltaTime;else for(_=u.length-1;_>=1;_--)i.to(u[_-1].obj,u[_].deltaTime),n+=u[_].deltaTime;y=!y}}else if(o.indexOf("cycle")>=0&&r[r.length-1].t<t.layerData.op){for(var m=r.length-1,g=Math.floor((t.layerData.op-r[m].t)/(r[m].t-r[m-(s||m)].t)),x=u.slice(-s);g;){g--;for(_=0;_<x.length;_++)x[_].isSet?i.wait(x[_].deltaTime).set(x[_].obj):i.to(x[_].obj,x[_].deltaTime),n+=x[_].deltaTime}var b=(t.layerData.op-r[m].t)%(r[m].t-r[m-(s||m)].t);for(_=0;_<x.length;_++){if(!(x[_].deltaT<=b)){if(b>0){var M=p(0==_?d(x[_].obj,i._initQueueProps):x[_-1].obj,x[_].obj,b/x[_].deltaT);i.to(M,b*this.timeInterval),n+=b*this.timeInterval}break}x[_].isSet?i.wait(x[_].deltaTime).set(x[_].obj):i.to(x[_].obj,x[_].deltaTime),b-=x[_].deltaT,n+=x[_].deltaTime}}}else if(o.indexOf("loopIn")>=0){for(u=[],h=0,l=0;l<r.length;l++){var T;c=(T=(O=r[l]).t-h)*this.timeInterval,f=P(O);O.t-h==1||1===O.h?u.push({obj:f,deltaT:T,deltaTime:c,isSet:!0,timeOri:O.t}):u.push({obj:f,deltaT:T,deltaTime:c,timeOri:O.t}),h=O.t}if(o.indexOf("pingpong")>=0&&r[0].t>0){u=function(t,e,r){var i=t[0].deltaT;e>=t.length&&(e=0);var n=t.slice(0,e?e+1:t.length),o=t[0].deltaTime/t[0].deltaT,a=[],s=!0,u=0,h=0;for(;i>0;){s?u++:u--,u>n.length-1?(s=!1,u-=2):u<0&&(s=!0,u+=2);var l=Math.abs(n[h].timeOri-n[u].timeOri);a.unshift({obj:n[h].obj,deltaT:l,deltaTime:l*o,timeOri:n[h].timeOri,isSet:n[h].isSet}),h=u,i-=l}a.unshift({obj:n[h].obj,deltaT:0,deltaTime:0,timeOri:n[h].timeOri,isSet:!0});for(var c=1;c<t.length&&!(t[c].timeOri>r);c++)a.push(t[c]);return a}(u,s,t.layerData.op);for(_=0;_<u.length;_++)u[_].isSet?i.wait(u[_].deltaTime).set(u[_].obj):i.to(u[_].obj,u[_].deltaTime),n+=u[_].deltaTime}else if(o.indexOf("cycle")>=0&&r[0].t>0){u=function(t,e,r,i){void 0===i&&(i=0);var n=t[0].deltaT-i;e>=t.length&&(e=0);var o=t.slice(0,e?e+1:t.length),a=[],s=0;for(;n>0;)--s<0&&(s=o.length-1),s?(a.unshift(o[s]),n-=o[s].deltaT):a.unshift({obj:o[0].obj,deltaT:0,deltaTime:0,timeOri:o[0].timeOri,isSet:!0});a.unshift({obj:o[0].obj,deltaT:0,deltaTime:0,timeOri:o[0].timeOri,isSet:!0}),a.push({obj:o[0].obj,deltaT:0,deltaTime:0,isSet:!0});for(var u=1;u<t.length&&!(t[u].timeOri>r);u++)a.push(t[u]);return a}(u,s,t.layerData.op,t.layerData.ip),t.layerData.ip&&(i.wait(t.layerData.ip*this.timeInterval),n+=t.layerData.ip*this.timeInterval);for(_=0;_<u.length;_++)u[_].isSet?i.wait(u[_].deltaTime).set(u[_].obj):i.to(u[_].obj,u[_].deltaTime),n+=u[_].deltaTime}var w=Math.min(t.layerData.op,this.rawData.op);if(n<w*this.timeInterval){var E=w*this.timeInterval-n;i.wait(E),n+=E}}t.layerData.op<this.rawData.op&&(i.wait((this.rawData.op-t.layerData.op)*this.timeInterval),n+=(this.rawData.op-t.layerData.op)*this.timeInterval)}else{for(h=0,l=0;l<r.length;l++){var O;f=P(O=r[l]),c=void 0;if(O.t<0){if(!r[l+1]||r[l+1].t<0)break;f=p(f,P(r[l+1]),-O.t/(r[l+1].t-O.t)),i.set(f),h=0}else if(O.t>this.rawData.op){if(!r[l-1]||r[l-1].t>this.rawData.op)break;var S=this.rawData.op-r[l-1].t;c=S*this.timeInterval,f=p(P(r[l-1]),f,S/(O.t-r[l-1].t)),i.to(f,c),n+=c,h=this.rawData.op}else c=(O.t-h)*this.timeInterval,0==l&&O.t>0?i.wait(c):0==l&&0==O.t?i.set(f):i.to(f,c),n+=c,h=O.t}this.rawData.op>h&&i.wait((this.rawData.op-h)*this.timeInterval)}function P(r){var i;switch(e){case"r":i={rotation:r.s[0]};break;case"o":i={alpha:r.s[0]/100};break;case"s":i={scaleX:r.s[0]/100,scaleY:r.s[1]/100};break;case"p":i={x:r.s[0]-t.anchorX,y:r.s[1]-t.anchorY}}return i}},e.prototype.updateTransform=function(){var t=this;this.displayObjectUpdateTransform(),this.children.forEach((function(e){t._recursivePostUpdateTransformAA(e)})),this.children.forEach((function(t){t.mark=!1}))},e.prototype.findChildByInd=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].layerData&&this.children[e].layerData.ind===t)return this.children[e];return null},e.prototype._recursivePostUpdateTransformAA=function(t){if(t.layerData&&t.layerData.parent){var e=this.findChildByInd(t.layerData.parent);this._recursivePostUpdateTransformAA(e),t.mark||(t.mark=!0,t.transform.updateWorldMatrix(e.transform),t._worldAlpha=t.alpha*t.parent._worldAlpha)}else t.mark||(t.updateTransform(),t.mark=!0)},e.prototype.startAniRange=function(t,e,r,i){void 0===t&&(t=1),void 0===e&&(e=this.totalFrames),void 0===r&&(r=1),this.play(r,i)},e.prototype.destroy=function(){a.Tween.removeTweens(this),this.children.forEach((function(t){a.Tween.removeTweens(t)})),t.prototype.destroy.call(this)},e}(u.Container);function p(t,e,r){var i={};for(var n in t)i[n]=(e[n]-t[n])*r+t[n];return i}function d(t,e){var r={};if(!t)return r;for(var i in t)r[i]=e[i];return r}e.Lottie=f;var v,y=0;function _(t){var e=t.ks;t.ip,t.op;if(e.o.k.length)m(t,"o");else{var r=e.o.k/100;e.o.props=M([r])}if(e.r.k.length?m(t,"r"):e.r.props=M([e.r.k]),"number"!=typeof e.p.k[0])m(t,"p");else{var i="number"==typeof e.a.k[0]?e.a.k:e.a.k[0].s,n=e.p.k;e.p.props=M([n[0]-i[0],n[1]-i[1]])}if("number"!=typeof e.s.k[0])m(t,"s");else{var o=e.s.k;e.s.props=M([o[0]/100,o[1]/100])}}function m(t,e){var r=t.ks[e].k,i=(t.ip,t.op,t.ks),n="number"==typeof i.a.k[0]?i.a.k:i.a.k[0].s,o=[],a=i[e].props=[];a.length=y+1;for(var s=0;s<r.length;s++){var u=r[s],f=void 0;switch(e){case"r":f=[u.s[0]];break;case"o":f=[u.s[0]/100];break;case"s":f=[u.s[0]/100,u.s[1]/100,0];break;case"p":f=[u.s[0]-n[0],u.s[1]-n[1],0]}o.push({i:u.i,o:u.o,ti:u.ti,to:u.to,h:1===u.h,value:f,frame:u.t})}for(var p=0;p<o.length-1;p++){var d=o[p],v=o[p+1];if(d.to){var _=h.getBezierEasing(d.o.x,d.o.y,d.i.x,d.i.y).get;l.buildBezierProps(d.value,v.value,d.to,d.ti,d.frame,v.frame,a,_,i[e].x?void 0:y)}else c.buildBezierEaserProps(d.value,v.value,d.o,d.i,d.frame,v.frame,a,d.h,i[e].x?void 0:y)}if(o[o.length-1].h&&(a[o[o.length-1].frame]=o[o.length-1].value.slice()),i[e].x&&(i[e].x.indexOf("loopOut")>=0||i[e].x.indexOf("loopIn")>=0)){var m=i[e].x,g=m.indexOf("loopOut")>=0,x=(m.indexOf("loopIn"),+m.replace(/[^0-9]/gi,""));x>o.length-1&&(x=0);for(var M=a.slice(),T=m.indexOf("cycle")>=0,w=m.indexOf("pingpong")>=0,E=!1,O=o.length-1,S=g?o[O].frame:o[0].frame,P=g?o[O-(x||O)].frame:o[0].frame,A=g?o[O].frame-P:o[0+(x||O)].frame-P;g?S<=y:S>=0;)if(w)b(E?function(t){g?a[++S]=M[t+1+P].slice():a[--S]=M[A-1-t+P].slice()}:function(t){g?a[++S]=M[A-1-t+P].slice():a[--S]=M[t+1+P].slice()},A),E=!E;else{if(!T)break;b((function(t){g?a[++S]=M[t+1+P].slice():a[--S]=M[A-1-t+P].slice()}),A)}}var C=function(t){for(var e=null,r=null,i=!!t[0],n=1;n<t.length;n++){if(i){if(void 0===t[n]){r=n-1;break}}else void 0!==t[n]&&(e=n);i=!!t[n]}return[e,r]}(a);if(null!==C[0])for(var D=C[0],R=a[D];D--;)a[D]=R.slice();if(null!==C[1])for(var I=C[1],j=a[I];I++<=y;)a[I]=j.slice()}function g(t,e){if(void 0!==t.parent){var r=function(t){for(var e=0;e<v.layers.length;e++)if(v.layers[e].ind===t)return v.layers[e]}(t.parent);if(g(r,e),!t.transformDatas[e].transform)t.transformDatas[e].transform=function(t,e){return{a:t.a*e.a+t.b*e.c,b:t.a*e.b+t.b*e.d,c:t.c*e.a+t.d*e.c,d:t.c*e.b+t.d*e.d,tx:t.tx*e.a+t.ty*e.c+e.tx,ty:t.tx*e.b+t.ty*e.d+e.ty}}(x(t,e),r.transformDatas[e].transform)}else if(!t.transformDatas[e].transform){t.transformDatas[e].transform=x(t,e)}}function x(t,e){var r=t.ks,i=0,n=0,o=1,a=1,s=0,u=r.a.props[0][0],h=r.a.props[0][1];r.p.props[e]&&(i=r.p.props[e][0],n=r.p.props[e][1]),r.s.props[e]&&(o=r.s.props[e][0],a=r.s.props[e][1]),r.r.props[e]&&(s=r.r.props[e][0]);var l={};return s*=Math.PI/180,l.a=Math.cos(s)*o,l.b=Math.sin(s)*o,l.c=-Math.sin(s)*a,l.d=Math.cos(s)*a,l.tx=i+u-(u*l.a+h*l.c),l.ty=n+h-(u*l.b+h*l.d),l}function b(t,e){if(!(e<=0))for(var r=e;r--;)t(e-r-1)}function M(t){return Array.apply(void 0,Array(y)).map((function(e,r){return JSON.parse(JSON.stringify(t))}))}e.lottieToSvgaData=function(t){if(t.svgaData)return t.svgaData;y=t.op,v=t;var e={};e.videoSize={width:t.w,height:t.h},e.FPS=t.fr,e.frames=t.op-t.ip,t.assets&&(e.images={},t.assets.forEach((function(t){e.images[t.id]=t.p.replace("data:image/png;base64,","")})));for(var r=0;r<t.layers.length;r++){var i=(o=t.layers[r]).ks,n="number"==typeof o.ks.a.k[0]?o.ks.a.k:o.ks.a.k[0].s;i.a.props=M(n),_(o)}for(t.layers.forEach((function(t){t.transformDatas=M({alpha:0})})),r=0;r<y;r++)t.layers.forEach((function(t){var e=t.ks,i=t.ip,n=t.op;r>=i&&r<=n&&(t.transformDatas[r].alpha=e.o.props[r][0]),g(t,r)}));for(e.sprites=[],r=0;r<t.layers.length;r++){var o;(o=t.layers[r]).refId&&e.sprites.push({imageKey:o.refId,frames:o.transformDatas})}return e.sprites.reverse(),v.svgaData=e}},function(t,e,r){"use strict";function i(t,e){for(var r=0;r<e.length;r++){if(t<e[r].preLength){for(var i=(t-e[r-1].preLength)/e[r].partialLength,n=e[r-1].point.length,o=[],a=0;a<n;a+=1)o[a]=e[r-1].point[a]+(e[r].point[a]-e[r-1].point[a])*i;return o}}return e[e.length-1].point}Object.defineProperty(e,"__esModule",{value:!0}),e.buildBezierProps=void 0,e.buildBezierProps=function(t,e,r,a,s,u,h,l,c){for(var f=function(t,e,r,i){var a=(t[0]+"_"+t[1]+"_"+e[0]+"_"+e[1]+"_"+r[0]+"_"+r[1]+"_"+i[0]+"_"+i[1]).replace(/\./g,"p");if(!n[a]){var s,u,h,l,c,f,p,d=150,v=0,y=null;2===t.length&&(t[0]!=e[0]||t[1]!=e[1])&&o(t[0],t[1],e[0],e[1],t[0]+r[0],t[1]+r[1])&&o(t[0],t[1],e[0],e[1],e[0]+i[0],e[1]+i[1])&&(d=2);var _={segmentLength:0,points:new Array(d)};for(h=r.length,s=0;s<d;s+=1){for(p=new Array(h),c=s/(d-1),f=0,u=0;u<h;u+=1)l=Math.pow(1-c,3)*t[u]+3*Math.pow(1-c,2)*c*(t[u]+r[u])+3*(1-c)*Math.pow(c,2)*(e[u]+i[u])+Math.pow(c,3)*e[u],p[u]=l,null!==y&&(f+=Math.pow(p[u]-y[u],2));f=Math.sqrt(f),v+=f,_.points[s]={partialLength:f,preLength:v,point:p},y=p}_.segmentLength=v,n[a]=_}return n[a]}(t,e,r,a),p=s;p<=u;p++){if(c){if(p<0)continue;if(p>=c)break}var d=l((p-s)/(u-s)),v=f.segmentLength*d;0!=d?h[p]=1!=d?i(v,f.points):f.points[f.points.length-1].point:h[p]=f.points[0].point}};var n={};function o(t,e,r,i,n,o){var a=t*i+e*n+r*o-n*i-o*t-r*e;return a>-.001&&a<.001}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildBezierEaserProps=void 0;var i=r(85);e.buildBezierEaserProps=function(t,e,r,n,o,a,s,u,h){if(u)for(var l=o;l<a;l++)s[l]=t.slice();else{var c,f,p,d,v,y,_,m,g=t.length;if(r.x.constructor===Array){_=[];for(var x=0;x<g;x++)c=void 0===r.x[x]?r.x[0]:r.x[x],f=void 0===r.y[x]?r.y[0]:r.y[x],p=void 0===n.x[x]?n.x[0]:n.x[x],d=void 0===n.y[x]?n.y[0]:n.y[x],_[x]=i.getBezierEasing(c,f,p,d).get}else c=r.x,f=r.y,p=n.x,d=n.y,m=i.getBezierEasing(c,f,p,d).get;var b=a-o;for(l=o;l<=a;l++){if(h){if(l<0)continue;if(l>=h)break}var M=l,T=[];for(x=0;x<g;x+=1)y=M==a?1:M==o?0:_?_[x]((M-o)/b):m((M-o)/b),v=t[x]+(e[x]-t[x])*y,T[x]=v;s[l]=T}}}},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var o=r(16),a=r(10),s=function(t){function e(){var e=t.call(this)||this;return e._instanceType="Camera",e.worldMatrixInverse=new a.Matrix4,e.projectionMatrix=new a.Matrix4,e.projectionMatrixInverse=new a.Matrix4,e}return n(e,t),e.prototype.clone=function(){return(new e).copy(this)},e.prototype.copy=function(e,r){return t.prototype.copy.call(this,e,r),this.worldMatrixInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},e.prototype.getWorldDirection=function(t){this.updateWorldMatrix();var e=this._worldMatrix.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},e.prototype.updateWorldMatrix=function(){t.prototype.updateWorldMatrix.call(this),this.worldMatrixInverse.setInverseOf(this._worldMatrix)},e}(o.Object3D);e.Camera=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Raycaster=void 0;var i=r(87),n=function(){function t(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=1/0),this.near=r,this.far=n,this.ray=new i.Ray(t,e)}return t.prototype.set=function(t,e){this.ray.set(t,e)},t.prototype.setFromCamera=function(t,e){this.ray.origin.setFromMatrixPosition(e._worldMatrix),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()},t.prototype.intersectObject=function(t,e){var r=e||[];return function t(e,r,i){if(!1===e.visible)return;e.mouseEnable&&e.raycast(r,i);if(e.mouseChildren)for(var n=e.children,o=0,a=n.length;o<a;o++)t(n[o],r,i)}(t,this,r),r.sort(o),r},t}();function o(t,e){return t.distance-e.distance}e.Raycaster=n},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(179),e),n(r(180),e),n(r(181),e),n(r(182),e),n(r(183),e),n(r(184),e),n(r(185),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SphereGeometry=void 0;var o=r(7),a=r(46),s=r(27),u=function(t){function e(e,r,i,n,o,u,h){void 0===e&&(e=1),void 0===r&&(r=8),void 0===i&&(i=6),void 0===n&&(n=0),void 0===o&&(o=2*Math.PI),void 0===u&&(u=0),void 0===h&&(h=Math.PI);var l=this;r=Math.max(3,Math.floor(r)),i=Math.max(2,Math.floor(i));var c,f,p=u+h,d=0,v=[],y=new a.Vector3,_=new a.Vector3,m=[],g=[],x=[],b=[];for(f=0;f<=i;f++){var M=[],T=f/i;for(c=0;c<=r;c++){var w=c/r;y.x=-e*Math.cos(n+w*o)*Math.sin(u+T*h),y.y=e*Math.cos(u+T*h),y.z=e*Math.sin(n+w*o)*Math.sin(u+T*h),g.push(y.x,y.y,y.z),_.set(y.x,y.y,y.z).normalize(),x.push(_.x,_.y,_.z),b.push(w,T),M.push(d++)}v.push(M)}for(f=0;f<i;f++)for(c=0;c<r;c++){var E=v[f][c+1],O=v[f][c],S=v[f+1][c],P=v[f+1][c+1];(0!==f||u>0)&&m.push(E,O,P),(f!==i-1||p<Math.PI)&&m.push(O,S,P)}return(l=t.call(this,g,m,x,null,b)||this).boundingSphere=new s.Sphere(new a.Vector3,e),l}return n(e,t),e}(o.Geometry);e.SphereGeometry=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.BoxGeometry=void 0;var o=r(7),a=r(3),s=r(47),u=r(27),h=function(t){function e(e,r,i,n,o,h){void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=1),void 0===h&&(h=1);var l=this;n=Math.floor(n)||1,o=Math.floor(o)||1,h=Math.floor(h)||1;var c=[],f=[],p=[],d=[],v=0;function y(t,e,r,i,n,o,s,u,h,l,y){var _,m,g=o/h,x=s/l,b=o/2,M=s/2,T=u/2,w=h+1,E=l+1,O=0,S=0,P=new a.Vector3;for(m=0;m<E;m++){var A=m*x-M;for(_=0;_<w;_++){var C=_*g-b;P[t]=C*i,P[e]=A*n,P[r]=T,f.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[r]=u>0?1:-1,p.push(P.x,P.y,P.z),d.push(_/h),d.push(m/l),O+=1}}for(m=0;m<l;m++)for(_=0;_<h;_++){var D=v+_+w*m,R=v+_+w*(m+1),I=v+(_+1)+w*(m+1),j=v+(_+1)+w*m;c.push(D,R,j),c.push(R,I,j),S+=6}S,v+=O}return y("z","y","x",-1,-1,i,r,e,h,o,0),y("z","y","x",1,-1,i,r,-e,h,o,1),y("x","z","y",1,1,e,i,r,n,h,2),y("x","z","y",1,-1,e,i,-r,n,h,3),y("x","y","z",1,-1,e,r,i,n,o,4),y("x","y","z",-1,-1,e,r,-i,n,o,5),(l=t.call(this,f,c,p,null,d)||this).boundingBox=new s.Box3(new a.Vector3(-e/2,-r/2,-i/2),new a.Vector3(e/2,r/2,i/2)),l.boundingSphere=new u.Sphere(new a.Vector3,Math.sqrt(e*e+r*r+i*i)),l}return n(e,t),e}(o.Geometry);e.BoxGeometry=h},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.PlaneGeometry=void 0;var o=function(t){function e(e,r,i,n){void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=1);var o,a,s=e/2,u=r/2,h=Math.floor(i),l=Math.floor(n),c=h+1,f=l+1,p=e/h,d=r/l,v=[],y=[],_=[],m=[];for(a=0;a<f;a++){var g=a*d-u;for(o=0;o<c;o++){var x=o*p-s;y.push(x,-g,0),_.push(0,0,1),m.push(o/h),m.push(a/l)}}for(a=0;a<l;a++)for(o=0;o<h;o++){var b=o+c*a,M=o+c*(a+1),T=o+1+c*(a+1),w=o+1+c*a;v.push(b,M,w),v.push(M,T,w)}return t.call(this,y,v,_,null,m)||this}return n(e,t),e}(r(7).Geometry);e.PlaneGeometry=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CircleGeometry=void 0;var o=r(7),a=r(3),s=r(21),u=function(t){function e(e,r,i,n){void 0===e&&(e=1),void 0===r&&(r=8),void 0===i&&(i=0),void 0===n&&(n=2*Math.PI);r=Math.max(3,r);var o,u,h=[],l=[],c=[],f=[],p=new a.Vector3,d=new s.Vector2;for(l.push(0,0,0),c.push(0,0,1),f.push(.5,.5),u=0,o=3;u<=r;u++,o+=3){var v=i+u/r*n;p.x=e*Math.cos(v),p.y=e*Math.sin(v),l.push(p.x,p.y,p.z),c.push(0,0,1),d.x=(l[o]/e+1)/2,d.y=1-(l[o+1]/e+1)/2,f.push(d.x,d.y)}for(o=1;o<=r;o++)h.push(o,o+1,0);return t.call(this,l,h,c,null,f)||this}return n(e,t),e}(o.Geometry);e.CircleGeometry=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CylinderGeometry=void 0;var o=r(7),a=r(21),s=r(3),u=function(t){function e(e,r,i,n,o,u,h,l){void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=8),void 0===o&&(o=1),void 0===u&&(u=!1),void 0===h&&(h=0),void 0===l&&(l=2*Math.PI);n=Math.floor(n)||8,o=Math.floor(o)||1;var c=[],f=[],p=[],d=[],v=0,y=[],_=i/2;function m(t){var i,o,u,y=new a.Vector2,m=new s.Vector3,g=0,x=!0===t?e:r,b=!0===t?1:-1;for(o=v,i=1;i<=n;i++)f.push(0,_*b,0),p.push(0,b,0),d.push(.5,.5),v++;for(u=v,i=0;i<=n;i++){var M=i/n*l+h,T=Math.cos(M),w=Math.sin(M);m.x=x*w,m.y=_*b,m.z=x*T,f.push(m.x,m.y,m.z),p.push(0,b,0),y.x=.5*T+.5,y.y=.5*w*b+.5,d.push(y.x,y.y),v++}for(i=0;i<n;i++){var E=o+i,O=u+i;!0===t?c.push(O,O+1,E):c.push(O+1,O,E),g+=3}g}return function(){var t,a,u=new s.Vector3,m=new s.Vector3,g=0,x=(r-e)/i;for(a=0;a<=o;a++){var b=[],M=a/o,T=M*(r-e)+e;for(t=0;t<=n;t++){var w=t/n,E=w*l+h,O=Math.sin(E),S=Math.cos(E);m.x=T*O,m.y=-M*i+_,m.z=T*S,f.push(m.x,m.y,m.z),u.set(O,x,S).normalize(),p.push(u.x,u.y,u.z),d.push(w,M),b.push(v++)}y.push(b)}for(t=0;t<n;t++)for(a=0;a<o;a++){var P=y[a][t],A=y[a+1][t],C=y[a+1][t+1],D=y[a][t+1];c.push(P,A,D),c.push(A,C,D),g+=6}g}(),u||(e>0&&m(!0),r>0&&m(!1)),t.call(this,f,c,p,null,d)||this}return n(e,t),e}(o.Geometry);e.CylinderGeometry=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.RingGeometry=void 0;var o=r(7),a=r(21),s=r(3),u=function(t){function e(e,r,i,n,o,u){void 0===e&&(e=.5),void 0===r&&(r=1),void 0===i&&(i=8),void 0===n&&(n=1),void 0===o&&(o=0),void 0===u&&(u=2*Math.PI);i=Math.max(3,i);var h,l,c,f=[],p=[],d=[],v=[],y=e,_=(r-e)/(n=Math.max(1,n)),m=new s.Vector3,g=new a.Vector2;for(l=0;l<=n;l++){for(c=0;c<=i;c++)h=o+c/i*u,m.x=y*Math.cos(h),m.y=y*Math.sin(h),p.push(m.x,m.y,m.z),d.push(0,0,1),g.x=(m.x/r+1)/2,g.y=1-(m.y/r+1)/2,v.push(g.x,g.y);y+=_}for(l=0;l<n;l++){var x=l*(i+1);for(c=0;c<i;c++){var b=h=c+x,M=h+i+1,T=h+i+2,w=h+1;f.push(b,M,w),f.push(M,T,w)}}return t.call(this,p,f,d,null,v)||this}return n(e,t),e}(o.Geometry);e.RingGeometry=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.TorusGeometry=void 0;var o=r(7),a=r(3),s=function(t){function e(e,r,i,n,o){void 0===e&&(e=1),void 0===r&&(r=.4),void 0===i&&(i=8),void 0===n&&(n=6),void 0===o&&(o=2*Math.PI);i=Math.floor(i),n=Math.floor(n);var s,u,h=[],l=[],c=[],f=[],p=new a.Vector3,d=new a.Vector3,v=new a.Vector3;for(s=0;s<=i;s++)for(u=0;u<=n;u++){var y=u/n*o,_=s/i*Math.PI*2;d.x=(e+r*Math.cos(_))*Math.cos(y),d.y=(e+r*Math.cos(_))*Math.sin(y),d.z=r*Math.sin(_),l.push(d.x,d.y,d.z),p.x=e*Math.cos(y),p.y=e*Math.sin(y),v.subVectors(d,p).normalize(),c.push(v.x,v.y,v.z),f.push(u/n),f.push(1-s/i)}for(s=1;s<=i;s++)for(u=1;u<=n;u++){var m=(n+1)*s+u-1,g=(n+1)*(s-1)+u-1,x=(n+1)*(s-1)+u,b=(n+1)*s+u;h.push(m,g,b),h.push(g,x,b)}return t.call(this,l,h,c,null,f)||this}return n(e,t),e}(o.Geometry);e.TorusGeometry=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite3dMaterial=void 0;var o=r(0),a=r(15),s=r(6),u=r(21),h=r(49),l=function(t){function e(){var e=t.call(this,"precision mediump float;\nattribute vec3 aPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uModelMatrix;\n\nuniform vec2 center;\n\nuniform float rotation;\n\nvoid main() {\n    vTextureCoord = aTextureCoord;\n    vec4 mvPosition = uViewMatrix * uModelMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n    vec2 scale;\n\tscale.x = length( vec3( uModelMatrix[ 0 ].x, uModelMatrix[ 0 ].y, uModelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( uModelMatrix[ 1 ].x, uModelMatrix[ 1 ].y, uModelMatrix[ 1 ].z ) );\n    \n    #ifndef USE_SIZEATTENUATION\n        bool isPerspective = ( uProjectionMatrix[ 2 ][ 3 ] == - 1.0 );\n        if ( isPerspective ) scale *= - mvPosition.z;\n    #endif\n\n    vec2 alignedPosition = ( aPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = uProjectionMatrix * mvPosition;\n}","precision mediump float;\nuniform vec3 color;\nuniform float alpha;\nuniform sampler2D map;\nvarying vec2 vTextureCoord;\nvoid main() {\n    vec4 mapColor = texture2D( map, vTextureCoord );\n    gl_FragColor = vec4( color, alpha )*mapColor;\n}",{center:{type:h.UniformType.vector2,value:new u.Vector2(.5,.5)},rotation:{type:h.UniformType.float,value:0},color:{type:h.UniformType.color,value:16777215},alpha:{type:h.UniformType.float,value:1},map:{type:h.UniformType.texture,value:a.Texture.WHITE}})||this;return e.sizeAttenuation=!0,e._instanceType="Sprite3dMaterial",e}return n(e,t),e.prototype.getShader=function(t){var e=""+t.CONTEXT_UID+this.sizeAttenuation;return this.shaders[e]||(this.shaders[e]=new s.GLShader(t.gl,(this.sizeAttenuation?"#define USE_SIZEATTENUATION\n":"")+this.vertexShader,this.fragmentShader),this.shaders[e]._glShaderKey="customShaderid"+e+"instanceId"+this.instanceId+"sizeAttenuation"+this.sizeAttenuation),this.shaders[e]},Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.uniforms.rotation.value*o.RAD_TO_DEG},set:function(t){this.uniforms.rotation.value=t*o.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.uniforms.color.value},set:function(t){this.uniforms.color.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.alpha.value},set:function(t){this.uniforms.alpha.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.map.value},set:function(t){this.uniforms.map.value=t},enumerable:!1,configurable:!0}),e}(h.ShaderMaterial);e.Sprite3dMaterial=l},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(188),e),n(r(189),e),n(r(190),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AmbientLight=void 0;var o=function(t){function e(e,r){var i=t.call(this,e,r)||this;return i._instanceType="AmbientLight",i}return n(e,t),e}(r(35).Light);e.AmbientLight=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionalLight=void 0;var o=r(16),a=function(t){function e(e,r){var i=t.call(this,e,r)||this;return i._instanceType="DirectionalLight",i.position.copy(o.Object3D.DefaultUp),i.updateLocalMatrix(),i.target=new o.Object3D,i}return n(e,t),e.prototype.copy=function(e){return t.prototype.copy.call(this,e),this.target=e.target.clone(),this},e}(r(35).Light);e.DirectionalLight=a},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.PointLight=void 0;var o=function(t){function e(e,r,i,n){void 0===i&&(i=0),void 0===n&&(n=1);var o=t.call(this,e,r)||this;return o.distance=i,o.decay=n,o._instanceType="PointLight",o}return n(e,t),Object.defineProperty(e.prototype,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)},enumerable:!1,configurable:!0}),e.prototype.copy=function(e){return t.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this},e}(r(35).Light);e.PointLight=o},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(192),e),n(r(193),e),n(r(194),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AxesHelper=void 0;var o=r(18),a=r(7),s=r(36),u=function(t){function e(e){void 0===e&&(e=1);var r=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new a.Geometry(r,null,null,[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),n=new s.BaseMaterial({wireframe:!0,useVertexColor:!0});return t.call(this,i,n)||this}return n(e,t),e}(o.Mesh3D);e.AxesHelper=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.GridHelper=void 0;var o=r(7),a=r(18),s=r(36),u=r(1),h=function(t){function e(e,r,i,n){void 0===e&&(e=10),void 0===r&&(r=10),void 0===i&&(i=4473924),void 0===n&&(n=8947848);for(var a=r/2,h=e/r,l=e/2,c=u.hex2rgb(i),f=u.hex2rgb(n),p=[],d=[],v=0,y=-l;v<=r;v++,y+=h){p.push(-l,0,y,l,0,y),p.push(y,0,-l,y,0,l);for(var _=v===a?c:f,m=4;m--;)d.push(_[0],_[1],_[2])}var g=new o.Geometry(p,null,null,d),x=new s.BaseMaterial({wireframe:!0,useVertexColor:!0});return t.call(this,g,x)||this}return n(e,t),e}(a.Mesh3D);e.GridHelper=h},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Box3Helper=void 0;var o=r(18),a=r(7),s=r(36),u=function(t){function e(e,r){void 0===r&&(r=16776960);var i=this;return(i=t.call(this,new a.Geometry([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),new s.BaseMaterial({wireframe:!0,color:r}))||this).box=e,i.mouseChildren=i.mouseEnable=!1,i}return n(e,t),e.prototype.updateWorldMatrix=function(e,r){void 0===e&&(e=!1),void 0===r&&(r=!0);var i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),t.prototype.updateWorldMatrix.call(this,e,r))},e}(o.Mesh3D);e.Box3Helper=u},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.D3Renderer=void 0;var o=r(40),a=r(39),s=r(6),u=r(1),h=r(10),l=r(0),c=r(26),f=r(196),p=r(15),d=r(3),v=r(49),y=(r(198),r(77),r(76),new d.Vector3),_=new h.Matrix4,m=function(t){function e(e){var r=t.call(this,e)||this;return r.meshes=[],r}return n(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.maxVertexUniforms=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS);t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),t.getExtension("OES_texture_float");this.floatVertexTextures=!1},e.prototype.start=function(){this.renderer.state.setDepthTest(1),this.renderer.state.setBlendMode(l.BLEND_MODES.NORMAL)},e.prototype.stop=function(){this.flush(),this.renderer._activeRenderTarget.activate(),this.renderer.state.setState(this.renderer.state.defaultState)},e.prototype.render=function(t){if(t.geometry&&t.material){for(var e=t.material,r=(t.geometry,0);r<this.meshes.length;r++)if(this.meshes[r].material==e)return void this.meshes.splice(r,0,t);this.meshes.push(t)}},e.prototype.flush=function(){for(var t=null,e=this.lightsConfig.pointLights.length,r=this.lightsConfig.directionalLights.length,i=this.renderer.gl,n=this.renderer.textureManager,o=0;o<this.meshes.length;o++){var a=this.meshes[o],h=a.material,l=a.geometry;if(h.isShaderMaterial){var d=h.getShader(this.renderer),m=d.uniforms,x=h.uniforms;for(var b in t!==d&&(t=d,this.renderer.bindShader(t,!1),m.uViewMatrix&&(m.uViewMatrix=this.camera.worldMatrixInverse.toArray()),m.uProjectionMatrix&&(m.uProjectionMatrix=this.camera.projectionMatrix.toArray())),m.uModelMatrix&&(m.uModelMatrix=a._worldMatrix.toArray()),x){var M=x[b],w=M.type,E=M.value;switch(w){case v.UniformType.texture:m[b]=n.bindTexture(E,void 0,!1);break;case v.UniformType.color:m[b]=u.hex2rgb(E);break;case v.UniformType.vector2:case v.UniformType.vector3:case v.UniformType.vector4:case v.UniformType.matrix4:m[b]=E.toArray();break;default:m[b]=E}}}else{var O=this.getMaxBones(a),S=f.getCusShader(this.renderer,h,this.lightsConfig,a,O,this.floatVertexTextures,this.fog);m=S.uniforms;if(t!==S&&(t=S,this.renderer.bindShader(t,!1),m.uViewMatrix=this.camera.worldMatrixInverse.toArray(),m.uProjectionMatrix=this.camera.projectionMatrix.toArray(),h._lightAffect)){for(var P=0;P<e;P++){m[A="pointLights["+P+"]"].color=this.lightsConfig.pointLights[P].color,m[A].position=this.lightsConfig.pointLights[P].position,m[A].distance=this.lightsConfig.pointLights[P].distance,m[A].decay=this.lightsConfig.pointLights[P].decay}for(P=0;P<r;P++){var A;m[A="directionalLights["+P+"]"].color=this.lightsConfig.directionalLights[P].color,m[A].direction=this.lightsConfig.directionalLights[P].direction}m.uAmbientLightColor=this.lightsConfig.ambientLightColor}if(h.map&&(m.uMap=n.bindTexture(h.map,void 0,!1)),h.envMap&&(m.uEnvMap=n.bindTexture(h.envMap,void 0,!1),m.uReflectivity=h.reflectivity,m.uCameraPosition=y.setFromMatrixPosition(this.camera._worldMatrix).toArray()),m.uMatColor=h.colorArr,m.uMatAlpha=h.alpha,h.useFog&&this.fog&&(m.uFogColor=this.fog.color,m.uFogNear=this.fog.near,m.uFogFar=this.fog.far),m.uModelMatrix=a._worldMatrix.toArray(),m.uNormalMatrix){var C=_.multiplyMatrices(this.camera.worldMatrixInverse,a._worldMatrix).invert().transpose();m.uNormalMatrix=C.toArray()}if(h.skinning&&O>0){var D=a;m.uBindMatrix=D.bindMatrix.toArray(),m.uBindMatrixInverse=D.bindMatrixInverse.toArray();var R=D.skeleton;if(R){var I=R.bones;if(this.floatVertexTextures){if(!R.boneTexture){var j=Math.sqrt(4*I.length);j=function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}(j),j=Math.max(j,4);var L=new Float32Array(j*j*4);L.set(R.boneMatrices);var N=new p.BaseTexture({data:L,width:j,height:j});N.mipmap=!1,R.boneMatrices=L,R.boneTexture=N,R.boneTextureSize=j}var B=n.bindTexture(R.boneTexture,void 0,!1);m.uBoneTexture=B,m.uBoneTextureSize=R.boneTextureSize}else m.uBoneMatrices=D.skeleton.boneMatrices}}}var F=l._glVaoBuffer[this.renderer.CONTEXT_UID];F||(F=l._glVaoBuffer[this.renderer.CONTEXT_UID]={attrBuffer:s.GLBuffer.createVertexBuffer(i,null,i.STATIC_DRAW),vaos:{}},l._indices&&(F.indexBuffer=s.GLBuffer.createIndexBuffer(i,null,i.STATIC_DRAW)),l._morphPositions&&(F.morphTargetBuffers=[]),l._morphNormals&&(F.morphNormalBuffers=[]),l._skinWeight&&(F.skinWeightBuffer=s.GLBuffer.createVertexBuffer(i,null,i.STATIC_DRAW)),l._skinIndex&&(F.skinIndexBuffer=s.GLBuffer.createVertexBuffer(i,null,i.STATIC_DRAW)),g(l));var k,z=F.vaos[t._glShaderKey],V=t.attributes;if(z)a.morphTargetInfluences&&h.morphTargets&&(k=T(a.morphTargetInfluences,l,F,z,t,i)),this.renderer.bindVao(z,!!k),k&&k.forEach((function(t){t.buffer.upload(t.data,0,!1)}));else z=F.vaos[t._glShaderKey]=this.renderer.createVao().addAttribute(F.attrBuffer,V.aPosition,i.FLOAT,!1,l._vertByteSize,0),V.aColor&&z.addAttribute(F.attrBuffer,V.aColor,i.FLOAT,!0,l._vertByteSize,12),V.aTextureCoord&&z.addAttribute(F.attrBuffer,V.aTextureCoord,i.FLOAT,!0,l._vertByteSize,24),V.aNormal&&z.addAttribute(F.attrBuffer,V.aNormal,i.FLOAT,!1,l._vertByteSize,32),l._indices&&z.addIndex(F.indexBuffer),V.aSkinWeight&&z.addAttribute(F.skinWeightBuffer,V.aSkinWeight,i.FLOAT,!1,0,0),V.aSkinIndex&&z.addAttribute(F.skinIndexBuffer,V.aSkinIndex,i.UNSIGNED_BYTE,!1,0,0),a.morphTargetInfluences&&h.morphTargets&&(k=T(a.morphTargetInfluences,l,F,z,t,i)),this.renderer.bindVao(z),F.attrBuffer.upload(l._attrBuffer.vertices,0,!1),l._indices&&F.indexBuffer.upload(l._indices,0,!1),V.aSkinWeight&&F.skinWeightBuffer.upload(new Float32Array(l._skinWeight),0,!1),V.aSkinIndex&&F.skinIndexBuffer.upload(new Uint8Array(l._skinIndex),0,!1),k&&k.forEach((function(t){t.buffer.upload(t.data,0,!1)}));h.side==c.RenderSideType.DoubleSide?this.renderer.state.setCullFace(0):(this.renderer.state.setCullFace(1),this.renderer.state.setFrontFace(h.side)),z.draw(h.wireframe?i.LINES:i.TRIANGLES)}this.meshes.length=0},e.prototype.getMaxBones=function(t){if("SkinnedMesh3D"!==t.instanceType)return 0;if(this.floatVertexTextures)return 1024;var e=t.skeleton.bones,r=Math.floor((this.maxVertexUniforms-20)/4),i=Math.min(r,e.length);return i<e.length?(console.warn("Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i},e}(o.default);function g(t){for(var e=t._attrBuffer.float32View,r=0,i=0;i<t._vertices.length/3;i++)e[r++]=t._vertices[3*i],e[r++]=t._vertices[3*i+1],e[r++]=t._vertices[3*i+2],e[r++]=t._colors[3*i],e[r++]=t._colors[3*i+1],e[r++]=t._colors[3*i+2],e[r++]=t._uvs[2*i],e[r++]=t._uvs[2*i+1],e[r++]=t._normals[3*i],e[r++]=t._normals[3*i+1],e[r++]=t._normals[3*i+2]}e.D3Renderer=m;var x={},b={},M=new Float32Array(8);function T(t,e,r,i,n,o){var a=e._morphPositions,u=e._morphNormals,h=t.length,l=[],c=x[e.instanceId];if(!c){c=[];for(var f=0;f<h;f++)c[f]=[f,0];x[e.instanceId]=c}var p=b[e.instanceId];p||((p=[]).length=8,b[e.instanceId]=p);for(f=0;f<8;f++){(y=c[f])&&0!==y[1]&&(a&&i.removeAttribute("morphTarget"+f),u&&f<4&&i.removeAttribute("morphNormal"+f))}for(f=0;f<h;f++){(y=c[f])[0]=f,y[1]=t[f]}c.sort(w);var d=n.attributes,v=u?4:8;for(f=0;f<v;f++){var y;if(y=c[f]){var _=y[0],m=y[1];if(m){if(a&&a[_]){var g=r.morphTargetBuffers[_];g||(g=r.morphTargetBuffers[_]=s.GLBuffer.createVertexBuffer(o,null,o.STATIC_DRAW)),p[f]!==_&&(p[f]=_,l.push({buffer:g,data:new Float32Array(a[_])})),i.addAttribute(g,d["morphTarget"+f],o.FLOAT,!1,0,0,"morphTarget"+f)}if(u&&u[_]){var T=r.morphNormalBuffers[_];T||(T=r.morphNormalBuffers[_]=s.GLBuffer.createVertexBuffer(o,null,o.STATIC_DRAW)),p[f+4]!==_&&(p[f+4]=_,l.push({buffer:T,data:new Float32Array(u[_])})),i.addAttribute(r.morphNormalBuffers[_],d["morphNormal"+f],o.FLOAT,!1,0,0,"morphNormal"+f)}M[f]=m;continue}}M[f]=0}return n.uniforms.morphTargetInfluences=M,l}function w(t,e){return Math.abs(e[1])-Math.abs(t[1])}a.WebglRenderer.registerPlugin("d3",m)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.getCusShader=void 0;var o=r(6),a=r(197);e.getCusShader=function(t,e,r,i,n,o,a){for(var s,l={glUid:t.CONTEXT_UID,precision:u(t),pointLightsNum:r.pointLights.length,dirLightsNum:r.directionalLights.length,morphTargets:i.morphTargetInfluences&&e.morphTargets,morphNormals:i.morphTargetInfluences&&e.morphTargets&&e.morphNormals,skinning:e.skinning&&n>0,maxBones:n||0,useVertexTexture:o,lightAffect:e._lightAffect,useMap:!!e.map,useEnvMap:!!e.envMap,combine:e.combine,useVertexColor:!!e.useVertexColor,useFog:a&&e.useFog},p=function(t){for(var e=[],r=0;r<f.length;r++)e.push(t[f[r]]);return e.join()}(l),d=0;d<c.length;d++)if(c[d]._glShaderKey===p){++(s=c[d]).usedTimes;break}return s||((s=new h(t.gl,l))._glShaderKey=p,c.push(s)),s};var s={};function u(t){var e;return s[t.CONTEXT_UID]||(s[t.CONTEXT_UID]=(e=t.gl).getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0?"highp":e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"),s[t.CONTEXT_UID]}var h=function(t){function e(e,r){var i=this,n=["precision "+r.precision+" float;","precision "+r.precision+" int;",r.lightAffect?"#define USE_LIGHT":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals?"#define USE_MORPHNORMALS":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"","#define MAX_BONES "+r.maxBones,r.useMap?"#define USE_MAP":"",r.useEnvMap?"#define USE_ENVMAP":"",r.useVertexColor?"#define USE_VERTEXCOLOR":"",r.useFog?"#define USE_FOG":""].filter((function(t){return""!==t})).join("\n");n&&(n+="\n");var s=["precision "+r.precision+" float;","precision "+r.precision+" int;",r.lightAffect?"#define USE_LIGHT":"",r.useMap?"#define USE_MAP":"",r.useEnvMap?"#define USE_ENVMAP":"",r.useEnvMap?"#define "+r.combine:"",r.useVertexColor?"#define USE_VERTEXCOLOR":"",r.useFog?"#define USE_FOG":""].filter((function(t){return""!==t})).join("\n");s&&(s+="\n");var u=d.replace(new RegExp(l.POINT_LIGHTS_NUM,"gm"),r.pointLightsNum+"").replace(new RegExp(l.DIR_LIGHTS_NUM,"gm"),r.dirLightsNum+"");return(i=t.call(this,e,n+p,s+u)||this).uniformData=function(t,e){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(e,n),u=0==s.name.indexOf("morphTargetInfluences")||0==s.name.indexOf("uBoneMatrices")?s.name.replace(/\[.*?\]/,""):s.name,h=a.mapType(t,s.type);r[u]={type:h,size:s.size,location:t.getUniformLocation(e,u),value:o.defaultValue(h,s.size)}}return r}(e,i.program),i.uniforms=a.generateUniformAccessObject(e,i.uniformData),i.usedTimes=0,i}return n(e,t),e}(o.GLShader);var l,c=[],f=["glUid","precision","pointLightsNum","dirLightsNum","morphTargets","morphNormals","skinning","maxBones","useVertexTexture","lightAffect","useMap","useEnvMap","combine","useVertexColor","useFog"];!function(t){t.POINT_LIGHTS_NUM="POINT_LIGHTS_NUM",t.DIR_LIGHTS_NUM="DIR_LIGHTS_NUM"}(l||(l={}));var p=["attribute vec3 aPosition;","uniform mat4 uViewMatrix;","uniform mat4 uProjectionMatrix;","uniform mat4 uModelMatrix;","#ifdef USE_VERTEXCOLOR","   attribute vec3 aColor;","   varying vec3 vColor;","#endif","#ifdef USE_MAP","   attribute vec2 aTextureCoord;","   varying vec2 vTextureCoord;","#endif","#if defined( USE_ENVMAP ) || defined( USE_LIGHT )","   attribute vec3 aNormal;","   uniform mat4 uNormalMatrix;","   varying vec3 vNormal;","   varying vec3 vWorldPosition;","   varying vec3 vViewPosition;","#endif","#ifdef USE_ENVMAP","   varying vec3 vReflect;","   uniform vec3 uCameraPosition;","#endif","#ifdef USE_SKINNING","   uniform mat4 uBindMatrix;","   uniform mat4 uBindMatrixInverse;","   #ifdef BONE_TEXTURE","      uniform sampler2D uBoneTexture;","      uniform int uBoneTextureSize;","      mat4 getBoneMatrix( const in float i ) {","         float j = i * 4.0;","         float x = mod( j, float( uBoneTextureSize ) );","         float y = floor( j / float( uBoneTextureSize ) );","         float dx = 1.0 / float( uBoneTextureSize );","         float dy = 1.0 / float( uBoneTextureSize );","         y = dy * ( y + 0.5 );","         vec4 v1 = texture2D( uBoneTexture, vec2( dx * ( x + 0.5 ), y ) );","         vec4 v2 = texture2D( uBoneTexture, vec2( dx * ( x + 1.5 ), y ) );","         vec4 v3 = texture2D( uBoneTexture, vec2( dx * ( x + 2.5 ), y ) );","         vec4 v4 = texture2D( uBoneTexture, vec2( dx * ( x + 3.5 ), y ) );","         mat4 bone = mat4( v1, v2, v3, v4 );","         return bone;","      }","   #else","      uniform mat4 uBoneMatrices[ MAX_BONES ];","      mat4 getBoneMatrix( const in float i ) {","         mat4 bone = uBoneMatrices[ int(i) ];","         return bone;","      }","   #endif","\tattribute vec4 aSkinIndex;","\tattribute vec4 aSkinWeight;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","       uniform float morphTargetInfluences[ 4 ];","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","       uniform float morphTargetInfluences[ 8 ];","\t#endif","#endif","#ifdef USE_FOG","    varying float vFogDepth;","#endif","void main() {","   vec3 transformed = vec3( aPosition );","   #ifdef USE_MORPHTARGETS","      transformed += ( morphTarget0 - aPosition ) * morphTargetInfluences[ 0 ];","      transformed += ( morphTarget1 - aPosition ) * morphTargetInfluences[ 1 ];","      transformed += ( morphTarget2 - aPosition ) * morphTargetInfluences[ 2 ];","      transformed += ( morphTarget3 - aPosition ) * morphTargetInfluences[ 3 ];","      #ifndef USE_MORPHNORMALS","         transformed += ( morphTarget4 - aPosition ) * morphTargetInfluences[ 4 ];","         transformed += ( morphTarget5 - aPosition ) * morphTargetInfluences[ 5 ];","         transformed += ( morphTarget6 - aPosition ) * morphTargetInfluences[ 6 ];","         transformed += ( morphTarget7 - aPosition ) * morphTargetInfluences[ 7 ];","      #endif","   #endif","   #ifdef USE_SKINNING","      mat4 boneMatX = getBoneMatrix( aSkinIndex.x );","      mat4 boneMatY = getBoneMatrix( aSkinIndex.y );","      mat4 boneMatZ = getBoneMatrix( aSkinIndex.z );","      mat4 boneMatW = getBoneMatrix( aSkinIndex.w );","      vec4 skinVertex = uBindMatrix * vec4( transformed, 1.0 );","      vec4 skinned = vec4( 0.0 );","      skinned += boneMatX * skinVertex * aSkinWeight.x;","      skinned += boneMatY * skinVertex * aSkinWeight.y;","      skinned += boneMatZ * skinVertex * aSkinWeight.z;","      skinned += boneMatW * skinVertex * aSkinWeight.w;","      transformed = ( uBindMatrixInverse * skinned ).xyz;","   #endif","   vec4 mvPosition = uViewMatrix * uModelMatrix * vec4( transformed, 1.0 );","   gl_Position = uProjectionMatrix * mvPosition;","   #ifdef USE_VERTEXCOLOR","      vColor = aColor;","   #endif","   #ifdef USE_MAP","      vTextureCoord = aTextureCoord;","   #endif","   #if defined( USE_ENVMAP ) || defined( USE_LIGHT )","      vec3 objectNormal = vec3( aNormal );","      #ifdef USE_MORPHNORMALS","         objectNormal += ( morphNormal0 - aNormal ) * morphTargetInfluences[ 0 ];","         objectNormal += ( morphNormal1 - aNormal ) * morphTargetInfluences[ 1 ];","         objectNormal += ( morphNormal2 - aNormal ) * morphTargetInfluences[ 2 ];","         objectNormal += ( morphNormal3 - aNormal ) * morphTargetInfluences[ 3 ];","      #endif","      #ifdef USE_SKINNING","         mat4 skinMatrix = mat4( 0.0 );","         skinMatrix += aSkinWeight.x * boneMatX;","         skinMatrix += aSkinWeight.y * boneMatY;","         skinMatrix += aSkinWeight.z * boneMatZ;","         skinMatrix += aSkinWeight.w * boneMatW;","         skinMatrix  = uBindMatrixInverse * skinMatrix * uBindMatrix;","         objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;","      #endif","      vViewPosition = -mvPosition.xyz;","      vWorldPosition = vec3(uModelMatrix * vec4(transformed,1.0));","      vec3 vTransformedNormal = vec3(uNormalMatrix * vec4(objectNormal,1.0));","      vNormal = normalize(vTransformedNormal);","      #ifdef USE_ENVMAP","         vec3 cameraToVertex = normalize( vWorldPosition.xyz - uCameraPosition );","         vec3 worldNormal = normalize( ( vec4( vTransformedNormal, 0.0 ) * uViewMatrix ).xyz );","         vReflect = reflect(cameraToVertex, worldNormal);","      #endif","   #endif","   #ifdef USE_FOG","      vFogDepth = -mvPosition.z;","   #endif","}"].join("\n"),d=["uniform vec3 uMatColor;","uniform float uMatAlpha;","#ifdef USE_MAP","   uniform sampler2D uMap;","   varying vec2 vTextureCoord;","#endif","#ifdef USE_VERTEXCOLOR","   varying vec3 vColor;","#endif","#if defined( USE_ENVMAP ) || defined( USE_LIGHT )","   varying vec3 vNormal;","   varying vec3 vWorldPosition;","   varying vec3 vViewPosition;","#endif","#ifdef USE_ENVMAP","   uniform sampler2D uEnvMap;","   uniform float uReflectivity;","   uniform mat4 uViewMatrix;","   varying vec3 vReflect;","#endif","#ifdef USE_LIGHT","   float calcSpecular(vec3 lightDir, vec3 viewDir, vec3 normal) {","      vec3 halfwayDir = normalize(lightDir + viewDir);","      float spec = pow(max(dot(normal, halfwayDir), 0.0), 32.0);","      return spec;","   }","   #if "+l.POINT_LIGHTS_NUM+" > 0","      #define saturate(a) clamp( a, 0.0, 1.0 )","      float calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {","         if ( decayExponent > 0.0 ) {","            return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );","         }","         return 1.0;","      }","      struct PointLight {","         vec3 color;","         vec3 position;","         float distance;","         float decay;","      };","      uniform PointLight pointLights["+l.POINT_LIGHTS_NUM+"];","   #endif","   #if "+l.DIR_LIGHTS_NUM+" > 0","      struct DirectionalLight {","         vec3 direction;","         vec3 color;","      };","      uniform DirectionalLight directionalLights["+l.DIR_LIGHTS_NUM+"];","   #endif","   uniform vec3 uAmbientLightColor;","#endif","#ifdef USE_FOG","   uniform vec3 uFogColor;","   varying float vFogDepth;","   uniform float uFogNear;","   uniform float uFogFar;","#endif","void main() {","   vec4 color = vec4( uMatColor, uMatAlpha );","   #ifdef USE_MAP","      vec4 mapColor = texture2D( uMap, vTextureCoord );","      color *= mapColor;","   #endif","   #ifdef USE_VERTEXCOLOR","      color *= vec4(vColor,1.0);","   #endif","   vec3 colorRgb = color.rgb;","   #ifdef USE_LIGHT","      vec3 totalDiffuseLight = vec3( 0.0 );","      vec3 totalSpecularLight = vec3( 0.0 );","      vec3 viewDir = normalize(vViewPosition);","      vec3 lightDirection;","      float diffuse;","      float specular;","      #if "+l.POINT_LIGHTS_NUM+" > 0","         float attenuation;","         for ( int i = 0; i < "+l.POINT_LIGHTS_NUM+"; i ++ ) {","            lightDirection = pointLights[i].position + vViewPosition;","            attenuation = calcLightAttenuation( length( lightDirection ), pointLights[ i ].distance, pointLights[ i ].decay );","            lightDirection = normalize(lightDirection);","            diffuse = max( dot( vNormal, lightDirection ), 0.0 );","            totalDiffuseLight += pointLights[i].color * (diffuse * attenuation);","            specular = calcSpecular(lightDirection,viewDir,vNormal);","            totalSpecularLight += pointLights[i].color *(specular * attenuation);","         }","      #endif","      #if "+l.DIR_LIGHTS_NUM+" > 0","         for( int i = 0; i < "+l.DIR_LIGHTS_NUM+"; i++ ) {","            lightDirection = directionalLights[ i ].direction;","            diffuse = max( dot( vNormal, lightDirection ), 0.0 );","            totalDiffuseLight += directionalLights[ i ].color * diffuse;","            specular = calcSpecular(lightDirection,viewDir,vNormal);","            totalSpecularLight += directionalLights[i].color * specular;","         }","      #endif","      colorRgb = (totalDiffuseLight + uAmbientLightColor + totalSpecularLight) * colorRgb;","   #endif","   #ifdef USE_ENVMAP","      vec2 envUv;","      vec3 reflectVec = normalize( vReflect );","      envUv.y =0.5 - asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * 0.31830988618;","      envUv.x = atan( reflectVec.z, reflectVec.x ) * 0.15915494 + 0.5;","\t   vec4 envColor = texture2D( uEnvMap, envUv );","      #ifdef ENVMAP_BLENDING_MULTIPLY","         colorRgb = mix(colorRgb, colorRgb * envColor.xyz,  uReflectivity);","      #elif defined( ENVMAP_BLENDING_MIX )","         colorRgb = mix( colorRgb, envColor.xyz,   uReflectivity );","      #elif defined( ENVMAP_BLENDING_ADD )","         colorRgb += envColor.xyz  * uReflectivity;","      #endif","   #endif","   gl_FragColor = vec4( colorRgb, color.a );","#ifdef USE_FOG","   float fogFactor = smoothstep( uFogNear, uFogFar, vFogDepth );","   gl_FragColor.rgb = mix( gl_FragColor.rgb, uFogColor*color.a, fogFactor );","#endif","}"].join("\n")},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(62);Object.defineProperty(e,"compileProgram",{enumerable:!0,get:function(){return i.compileProgram}});var n=r(42);Object.defineProperty(e,"defaultValue",{enumerable:!0,get:function(){return n.defaultValue}});var o=r(63);Object.defineProperty(e,"extractAttributes",{enumerable:!0,get:function(){return o.extractAttributes}});var a=r(65);Object.defineProperty(e,"extractUniforms",{enumerable:!0,get:function(){return a.extractUniforms}});var s=r(67);Object.defineProperty(e,"generateUniformAccessObject",{enumerable:!0,get:function(){return s.generateUniformAccessObject}});var u=r(  66);Object.defineProperty(e,"setPrecision",{enumerable:!0,get:function(){return u.setPrecision}});var h=r(64);Object.defineProperty(e,"mapSize",{enumerable:!0,get:function(){return h.mapSize}});var l=r(41);Object.defineProperty(e,"mapType",{enumerable:!0,get:function(){return l.mapType}})},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ShadowShader=e.fragment=e.vertex=void 0;var o=r(6);e.vertex="uniform mat4 uLightSpaceMatrix;\nuniform mat4 uModelMatrix;\nvoid main() {\n    gl_Position = uLightSpaceMatrix * uModelMatrix * vec4( aPosition, 1.0 );\n}",e.fragment="void main() {\n    // gl_FragDepth = gl_FragCoord.z;\n}";var a=function(t){function r(r){return t.call(this,r,e.vertex,e.fragment)||this}return n(r,t),r}(o.GLShader);e.ShadowShader=a},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(200),e)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadGltf=void 0;var i=r(23),n=r(1),o=r(89),a=r(7),s=r(15),u=r(88),h=r(16),l=r(26),c=r(18),f=r(48),p=r(0),d=r(46),v=r(90),y=r(90),_=r(91),m=r(201),g=r(92),x=r(93),b=r(94),M=r(95),T=1313821514,w=5130562,E="KHR_binary_glTF",O="KHR_draco_mesh_compression",S="KHR_lights_punctual",P="KHR_materials_pbrSpecularGlossiness",A="KHR_materials_unlit",C="MSFT_texture_dds",D=4,R=5,I=6,j={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},L={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},N={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences",position:"position"};y.InterpolateSmooth,y.InterpolateLinear,y.InterpolateDiscrete;function B(t){if(t.isInterleavedBufferAttribute){for(var e=t.count,r=t.itemSize,i=t.array.slice(0,e*r),n=0;n<e;++n)i[n*r]=t.getX(n),r>=2&&(i[n*r+1]=t.getY(n)),r>=3&&(i[n*r+2]=t.getZ(n)),r>=4&&(i[n*r+3]=t.getW(n));return new W(i,r,t.normalized)}return t.clone()}function F(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var r=0,i=e.weights.length;r<i;r++)t.morphTargetInfluences[r]=e.weights[r];if(e.extras&&Array.isArray(e.extras.targetNames)){var n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(r=0,i=n.length;r<i;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function k(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(t[r]!==e[r])return!1;return!0}function z(t,e){for(var r=0,i=t.length;r<i;r++){var n=t[r];if(o=n.primitive,a=e,o.indices===a.indices&&k(o.attributes,a.attributes))return n.promise}var o,a;return null}e.loadGltf=function(t,e,r){i.GlobalLoader.loadAB((function(t,i){if(t)try{var o,a={};if("string"==typeof i)o=i;else if("glTF"===n.decodeText(new Uint8Array(i,0,4))){try{a[E]=new G(i)}catch(t){return void(r&&r(t))}o=a[E].content}else o=n.decodeText(new Uint8Array(i));var s=JSON.parse(o);if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r("版本格式有问题"));var u=new V(s,a);u.parse((function(t,r,i,n,o){var a={scene:t,scenes:r,cameras:i,animations:n,asset:o.asset,parser:u};n&&n.length&&(a.animationManager=new M.AnimationManager(n)),e(a)}),r)}catch(t){r&&r(t)}else r&&r(i)}),t)};var V=function(){function t(t,e,r){void 0===t&&(t={}),void 0===e&&(e={}),void 0===r&&(r={}),this.json=t,this.extensions=e,this.options=r,this.cache=new X,this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.loadScene=function(){function t(e,r,i,n,o){var a=n[e],s=i.nodes[e];if(void 0!==s.skin)for(var u="Object3D"==a.instanceType?a.children:[a],h=0;h<u.length;h++){for(var l=u[h],c=o[s.skin],f=[],p=[],v=0,y=c.joints.length;v<y;v++){var _=c.joints[v],m=n[_];if(m){f.push(m);var x=new d.Matrix4;void 0!==c.inverseBindMatrices&&x.fromArray(c.inverseBindMatrices.array,16*v),p.push(x)}else console.warn('Joint "%s" could not be found.',_)}l.bind(new g.Skeleton3D(f,p),l._worldMatrix)}if(r.addChild(a),s.children){var b=s.children;for(h=0;h<b.length;h++){var M=b[h];a&&t(M,a,i,n,o)}}}return function(e){var r=this.json,i=(this.extensions,this.json.scenes[e]);return this.getMultiDependencies(["node","skin"]).then((function(e){var n=new u.Scene3D;void 0!==i.name&&(n.name=i.name);for(var o=i.nodes||[],a=0,s=o.length;a<s;a++)t(o[a],n,r,e.nodes,e.skins);return n}))}}()}return t.prototype.parse=function(t,e){var r=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then((function(e){var i=e.scenes||[],n=i[r.scene||0],o=e.animations||[],a=e.cameras||[];t(n,i,a,o,r)})).catch(e)},t.prototype.markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],r=this.json.meshes||[],i={},n={},o=0,a=e.length;o<a;o++)for(var s=e[o].joints,u=0,h=s.length;u<h;u++)t[s[u]].isBone=!0;for(var l=0,c=t.length;l<c;l++){var f=t[l];void 0!==f.mesh&&(void 0===i[f.mesh]&&(i[f.mesh]=n[f.mesh]=0),i[f.mesh]++,void 0!==f.skin&&(r[f.mesh].isSkinnedMesh=!0))}this.json.meshReferences=i,this.json.meshUses=n},t.prototype.getDependency=function(t,e){var r=t+":"+e,i=this.cache.get(r);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this.loadNode(e);break;case"mesh":i=this.loadMesh(e);break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this.loadBufferView(e);break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this.loadMaterial(e);break;case"texture":i=this.loadTexture(e);break;case"skin":i=this.loadSkin(e);break;case"animation":i=this.loadAnimation(e);break;case"camera":i=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(r,i)}return i},t.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var r=this,i=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(i.map((function(e,i){return r.getDependency(t,i)}))),this.cache.add(t,e)}return e},t.prototype.getMultiDependencies=function(t){for(var e={},r=[],i=0,n=t.length;i<n;i++){var o=t[i],a=this.getDependencies(o);a=a.then(function(t,r){e[t]=r}.bind(this,o+("mesh"===o?"es":"s"))),r.push(a)}return Promise.all(r).then((function(){return e}))},t.prototype.loadBuffer=function(t){var e=this.json.buffers[t];if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");return void 0===e.uri&&0===t?Promise.resolve(this.extensions[E].body):new Promise((function(t,r){var i=e.uri.match(/^data:(.*?)(;base64)?,(.*)$/);if(i){i[1];var n=!!i[2],o=i[3];o=decodeURIComponent(o),n&&(o=atob(o));for(var a=new Uint8Array(o.length),s=0;s<o.length;s++)a[s]=o.charCodeAt(s);t(a.buffer)}else r("阿三的")}))},t.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){var r=e.byteLength||0,i=e.byteOffset||0;return t.slice(i,i+r)}))},t.prototype.loadAccessor=function(t){var e=this,r=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return null;var n=[];return void 0!==i.bufferView?n.push(this.getDependency("bufferView",i.bufferView)):n.push(null),void 0!==i.sparse&&(n.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),n.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(n).then((function(t){var n,o,a=t[0],s=L[i.type],u=j[i.componentType],h=u.BYTES_PER_ELEMENT,l=h*s,c=i.byteOffset||0,f=void 0!==i.bufferView?r.bufferViews[i.bufferView].byteStride:void 0,p=!0===i.normalized;if(f&&f!==l){var d="InterleavedBuffer:"+i.bufferView+":"+i.componentType,v=e.cache.get(d);v||(n=new u(a),v=new H(n,f/h),e.cache.add(d,v)),o=B(new Y(v,s,c/h,p))}else n=null===a?new u(i.count*s):new u(a,c,i.count*s),o=new W(n,s,p);if(void 0!==i.sparse){var y=L.SCALAR,_=j[i.sparse.indices.componentType],m=i.sparse.indices.byteOffset||0,g=i.sparse.values.byteOffset||0,x=new _(t[1],m,i.sparse.count*y),b=new u(t[2],g,i.sparse.count*s);null!==a&&o.setArray(o.array.slice());for(var M=0,T=x.length;M<T;M++){var w=x[M];if(o.setX(w,b[M*s]),s>=2&&o.setY(w,b[M*s+1]),s>=3&&o.setZ(w,b[M*s+2]),s>=4&&o.setW(w,b[M*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))},t.prototype.loadTexture=function(t){var e,r=this.json,o=(this.options,r.textures[t]),a=o.extensions||{},u=(e=a[C]?r.images[a[C].source]:r.images[o.source]).uri;return void 0!==e.bufferView&&(u=this.getDependency("bufferView",e.bufferView).then((function(t){var r=n.ArrayBufferToBase64(t);return"data:"+e.mimeType+";base64,"+r}))),Promise.resolve(u).then((function(t){return new Promise((function(e,r){var n,o;i.GlobalLoader.loadImage((function(t,i){t?e(s.Texture.fromImage(i)):r()}),(o="","string"!=typeof(n=t)||""===n?"":/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:o+n))}))})).then((function(t){return void 0!==o.name&&(t.name=o.name),t}))},t.prototype.assignTexture=function(t,e,r){return this.getDependency("texture",r).then((function(r){t[e]=r}))},t.prototype.loadMaterial=function(t){var e,r=this.json,i=(this.extensions,r.materials[t]),a={},s=i.extensions||{},u=[];if(s[P]){e=o.LightMaterial;var h=i.extensions[P];if(a.color=16777215,a.alpha=1,Array.isArray(h.diffuseFactor)){var c=h.diffuseFactor;a.color=n.rgb2hex(c),a.alpha=c[3]}void 0!==h.diffuseTexture&&u.push(this.assignTexture(a,"map",h.diffuseTexture.index))}else{e=s[A]?l.BaseMaterial:o.LightMaterial;var f=i.pbrMetallicRoughness||{};if(a.color=16777215,a.alpha=1,Array.isArray(f.baseColorFactor)){c=f.baseColorFactor;a.color=n.rgb2hex(c),a.alpha=c[3]}void 0!==f.baseColorTexture&&u.push(this.assignTexture(a,"map",f.baseColorTexture.index))}return!0===i.doubleSided&&(a.side=l.RenderSideType.DoubleSide),Promise.all(u).then((function(){var t;return t=new e(a),void 0!==i.name&&(t.name=i.name),t}))},t.prototype.loadGeometries=function(t){this.extensions;var e=this.primitiveCache;return this.getDependencies("accessor").then((function(r){for(var i=[],n=0,o=t.length;n<o;n++){var a=t[n],s=z(e,a);if(s)i.push(s);else if(a.extensions&&a.extensions[O]);else{var u=U(a,r),h=Promise.resolve(u);e.push({primitive:a,promise:h}),i.push(h)}}return Promise.all(i).then((function(t){return t}))}))},t.prototype.loadMesh=function(t){var e=this,r=this.json,i=(this.extensions,r.meshes[t]);return this.getMultiDependencies(["accessor","material"]).then((function(r){for(var n=i.primitives,a=[],s=0,u=n.length;s<u;s++)a[s]=void 0===n[s].material?new o.LightMaterial({color:16777215,side:0}):r.materials[n[s].material];return e.loadGeometries(n).then((function(r){for(var o=[],s=0,u=r.length;s<u;s++){var l,f=r[s],p=n[s],d=a[s];if(p.mode!==D&&p.mode!==R&&p.mode!==I&&void 0!==p.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);"SkinnedMesh3D"===(l=!0===i.isSkinnedMesh?new m.SkinnedMesh3D(f,d):new c.Mesh3D(f,d)).instanceType&&l.normalizeSkinWeights(),l.geometry._morphPositions&&F(l,i),l.name=i.name||"mesh_"+t,r.length>1&&(l.name+="_"+s),o.push(l);d=l.material;var v="SkinnedMesh3D"==l.instanceType,y=!!f._morphPositions,_=y&&!!f._morphNormals;if(v||y){var g="ClonedMaterial:"+d.instanceId+":";v&&(g+="skinning:"),y&&(g+="morph-targets:"),_&&(g+="morph-normals:");var x=e.cache.get(g);x||(x=d.clone(),v&&(x.skinning=!0),y&&(x.morphTargets=!0),_&&(x.morphNormals=!0),e.cache.add(g,x)),d=x}l.material=d}if(1===o.length)return o[0];var b=new h.Object3D;for(s=0;s<o.length;s++)b.addChild(o[s]);return b}))}))},t.prototype.loadCamera=function(t){var e,r=this.json.cameras[t],i=r[r.type];if(i)return"perspective"===r.type&&(e=new f.PerspectiveCamera(p.RAD_TO_DEG*i.yfov,i.aspectRatio||1,i.znear||1,i.zfar||2e6)),void 0!==r.name&&(e.name=r.name),Promise.resolve(e);console.warn("模型相机参数异常")},t.prototype.loadSkin=function(t){var e=this.json.skins[t],r={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return r.inverseBindMatrices=t,r}))},t.prototype.loadAnimation=function(t){var e=this.json.animations[t];return this.getMultiDependencies(["accessor","node"]).then((function(r){for(var i=[],n=0,o=e.channels.length;n<o;n++){var a=e.channels[n],s=e.samplers[a.sampler];if(s){var u=a.target,h=void 0!==u.node?u.node:u.id,l=void 0!==e.parameters?e.parameters[s.input]:s.input,c=void 0!==e.parameters?e.parameters[s.output]:s.output,f=r.accessors[l],p=r.accessors[c],d=r.nodes[h];if(d){var m;switch(d.updateLocalMatrix(),N[u.path]){case N.weights:m=_.AnimationType3D.morphTargetInfluences;break;case N.rotation:m=_.AnimationType3D.quaternion;break;case N.position:m=_.AnimationType3D.position;break;case N.scale:m=_.AnimationType3D.scale;break;default:m=_.AnimationType3D.position}var g=d.name?d.name:d.instanceId,x=(void 0!==s.interpolation?s.interpolation:y.InterpolateLinear,[]);N[u.path]===N.weights?K(d,(function(t){"Mesh3D"!==t.instanceType&&"SkinnedMesh3D"!==t.instanceType||!t.morphTargetInfluences||x.push(t.name?t.name:t.instanceId)})):x.push(g);for(var M=0,T=x.length;M<T;M++){var w=new _.AnimationTrack3D(d,m,v.arraySlice(f.array,0),v.arraySlice(p.array,0));i.push(w)}}}}h=void 0!==e.name?e.name:"animation_"+t;for(var E=0,O=0,S=i.length;O!==S;++O){var P=i[O];E=Math.max(E,P.times[P.times.length-1])}var A=new b.AnimationClip(i,E);return A.name=h,A}))},t.prototype.loadNode=function(t){var e=this.json,r=this.extensions,i=e.meshReferences,n=e.meshUses,o=e.nodes[t];return this.getMultiDependencies(["mesh","skin","camera","light"]).then((function(t){var e;if(!0===o.isBone)e=new x.Bone3D;else if(void 0!==o.mesh){var a=t.meshes[o.mesh];if(i[o.mesh]>1){var s=n[o.mesh]++;(e=a.clone()).name+="_instance_"+s;for(var u=0,l=e.children.length;u<l;u++)e.children[u].name+="_instance_"+s}else e=a}else if(void 0!==o.camera)e=t.cameras[o.camera];else if(o.extensions&&o.extensions[S]&&void 0!==o.extensions[S].light){e=r[S].lights[o.extensions[S].light]}else e=new h.Object3D;if(void 0!==o.name&&(e.name=o.name.replace(/\s/g,"_").replace(Z,"")),void 0!==o.matrix){var c=new d.Matrix4;c.fromArray(o.matrix),e.applyMatrix(c)}else void 0!==o.translation&&e.position.fromArray(o.translation),void 0!==o.rotation&&e.quaternion.fromArray(o.rotation),void 0!==o.scale&&e.scale.fromArray(o.scale);return e}))},t}();function U(t,e){var r=t.attributes,i=e[r.POSITION],n=e[r.NORMAL],o=e[r.TEXCOORD_0]||e[r.TEXCOORD0],s=new a.Geometry(q(i),q(e[t.indices]),n?q(n):null,null,o?q(o):null),u=e[r.WEIGHTS_0]||e[r.WEIGHTS];u&&(s._skinWeight=q(u));var h=e[r.JOINTS_0]||e[r.JOINT];return h&&(s._skinIndex=q(h)),void 0!==t.targets&&function(t,e,r){for(var i=!1,n=!1,o=0,a=e.length;o<a;o++){if(void 0!==(h=e[o]).POSITION&&(i=!0),void 0!==h.NORMAL&&(n=!0),i&&n)break}if(i||n){var s=[],u=[];for(o=0,a=e.length;o<a;o++){var h=e[o],l="morphTarget"+o;if(i){var c=void 0;if(void 0!==h.POSITION){c=[];var f=B(r[h.POSITION]);f.name=l;for(var p=t._vertices,d=0,v=f.count;d<v;d++)c.push(f.getX(d)+p[3*d],f.getY(d)+p[3*d+1],f.getZ(d)+p[3*d+2])}else c=t._vertices;s.push(c)}if(n){var y=void 0;if(void 0!==h.NORMAL){y=[];var _=B(r[h.NORMAL]);_.name=l;var m=t._normals;for(d=0,v=_.count;d<v;d++)y.push(_.getX(d)+m[3*d],_.getY(d)+m[3*d+1],_.getZ(d)+m[3*d+2])}else y=t._normals;u.push(y)}}i&&(t._morphPositions=s),n&&(t._morphNormals=u)}}(s,t.targets,e),s}function G(t){this.name=E,this.content=null,this.body=null;var e=new DataView(t,0,12);if(this.header={magic:n.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},"glTF"!==this.header.magic)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var r=new DataView(t,12),i=0;i<r.byteLength;){var o=r.getUint32(i,!0);i+=4;var a=r.getUint32(i,!0);if(i+=4,a===T){var s=new Uint8Array(t,12+i,o);this.content=n.decodeText(s)}else if(a===w){var u=12+i;this.body=t.slice(u,u+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}var X=function(){function t(){this.objects={}}return t.prototype.get=function(t){return this.objects[t]},t.prototype.add=function(t,e){this.objects[t]=e},t.prototype.remove=function(t){delete this.objects[t]},t.prototype.removeAll=function(){this.objects={}},t}(),W=function(){function t(t,e,r){if(void 0===r&&(r=!1),this.array=t,this.itemSize=e,this.normalized=r,Array.isArray(t))throw new TypeError("array必须士类型化数组");this.count=void 0!==t?t.length/e:0}return t.prototype.set=function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},t.prototype.setArray=function(t){if(Array.isArray(t))throw new TypeError("array必须士类型化数组");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},t.prototype.getX=function(t){return this.array[t*this.itemSize]},t.prototype.setX=function(t,e){return this.array[t*this.itemSize]=e,this},t.prototype.getY=function(t){return this.array[t*this.itemSize+1]},t.prototype.setY=function(t,e){return this.array[t*this.itemSize+1]=e,this},t.prototype.getZ=function(t){return this.array[t*this.itemSize+2]},t.prototype.setZ=function(t,e){return this.array[t*this.itemSize+2]=e,this},t.prototype.getW=function(t){return this.array[t*this.itemSize+3]},t.prototype.setW=function(t,e){return this.array[t*this.itemSize+3]=e,this},t.prototype.setXY=function(t,e,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this},t.prototype.setXYZ=function(t,e,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this},t.prototype.setXYZW=function(t,e,r,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this.array[t+3]=n,this},t.prototype.copy=function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this},t.prototype.clone=function(){return new t(this.array,this.itemSize).copy(this)},t}(),H=function(){function t(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0}return t.prototype.setArray=function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},t.prototype.copy=function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this},t.prototype.set=function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},t.prototype.clone=function(){return(new t).copy(this)},t}(),Y=function(){function t(t,e,r,i){void 0===i&&(i=!1),this.itemSize=e,this.offset=r,this.normalized=i,this.isInterleavedBufferAttribute=!0,this.data=t}return Object.defineProperty(t.prototype,"count",{get:function(){return this.data.count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"array",{get:function(){return this.data.array},enumerable:!1,configurable:!0}),t.prototype.setX=function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},t.prototype.setY=function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},t.prototype.setZ=function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},t.prototype.setW=function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},t.prototype.getX=function(t){return this.data.array[t*this.data.stride+this.offset]},t.prototype.getY=function(t){return this.data.array[t*this.data.stride+this.offset+1]},t.prototype.getZ=function(t){return this.data.array[t*this.data.stride+this.offset+2]},t.prototype.getW=function(t){return this.data.array[t*this.data.stride+this.offset+3]},t.prototype.setXY=function(t,e,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this},t.prototype.setXYZ=function(t,e,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=i,this},t.prototype.setXYZW=function(t,e,r,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=i,this.data.array[t+3]=n,this},t}();function q(t){for(var e=[],r=0;r<t.count;r++)e.push(t.getX(r)),t.itemSize>=2&&e.push(t.getY(r)),t.itemSize>=3&&e.push(t.getZ(r)),t.itemSize>=4&&e.push(t.getW(r));return e}var Z=new RegExp("[\\[\\]\\.:\\/]","g");function K(t,e){e(t);for(var r=t.children,i=0,n=r.length;i<n;i++){K(r[i],e)}}},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SkinnedMesh3D=void 0;var o=r(18),a=r(92),s=r(93),u=r(10),h=function(t){function e(e,r){var i=t.call(this,e,r)||this;i.bindMode="attached",i.bindMatrix=new u.Matrix4,i.bindMatrixInverse=new u.Matrix4,i._instanceType="SkinnedMesh3D";var n=i.initBones(),o=new a.Skeleton3D(n);return i.bind(o,i._worldMatrix),i.normalizeSkinWeights(),i}return n(e,t),e.prototype.initBones=function(){var t,e,r,i,n=[];if(this.geometry&&void 0!==this.geometry.bones){for(r=0,i=this.geometry.bones.length;r<i;r++)e=this.geometry.bones[r],t=new s.Bone3D,n.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl);for(r=0,i=this.geometry.bones.length;r<i;r++)-1!==(e=this.geometry.bones[r]).par&&null!==e.par&&void 0!==n[e.par]?n[e.par].addChild(n[r]):this.addChild(n[r])}return this.updateWorldMatrix(),n},e.prototype.bind=function(t,e){this.skeleton=t,void 0===e&&(this.updateWorldMatrix(),this.skeleton.calculateInverses(),e=this._worldMatrix),this.bindMatrix.copy(e),this.bindMatrixInverse.setInverseOf(e)},e.prototype.pose=function(){this.skeleton.pose()},e.prototype.normalizeSkinWeights=function(){var t,e;if(this.geometry){var r=new l,i=this.geometry._skinWeight,n=i.length/4||0;for(e=0;e<n;e++)r.x=i[4*e],r.y=i[4*e+1],r.z=i[4*e+2],r.w=i[4*e+3],(t=1/r.manhattanLength())!==1/0?r.multiplyScalar(t):r.set(1,0,0,0),i[4*e]=r.x,i[4*e+1]=r.y,i[4*e+2]=r.z,i[4*e+3]=r.w}},e.prototype.updateWorldMatrix=function(){t.prototype.updateWorldMatrix.call(this),"attached"===this.bindMode?this.bindMatrixInverse.setInverseOf(this._worldMatrix):"detached"===this.bindMode&&this.bindMatrixInverse.setInverseOf(this.bindMatrix)},e.prototype.update=function(){this.visible&&(this.skeleton.update(),t.prototype.update.call(this))},e.prototype.clone=function(){return new e(this.geometry,this.material).copy(this)},e}(o.Mesh3D);e.SkinnedMesh3D=h;var l=function(){function t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),this.x=t,this.y=e,this.z=r,this.w=i}return t.prototype.set=function(t,e,r,i){return this.x=t,this.y=e,this.z=r,this.w=i,this},t.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},t.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},t}()},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(91),e)},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(204),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite3D=void 0;var o=r(7),a=function(t){function e(e){return t.call(this,new o.Geometry([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],[0,1,2,0,2,3],null,null,[0,1,1,1,1,0,0,0]),e)||this}return n(e,t),e}(r(18).Mesh3D);e.Sprite3D=a},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(96),e),n(r(97),e),n(r(217),e)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Bone=void 0;var o,a=r(11),s=r(0),u=r(44),h=function(t){function e(e,r){var i=t.call(this)||this;return i.data=e,i.root=r,i.ax=0,i.ay=0,i.arotation=0,i.ascaleX=0,i.ascaleY=0,i.ashearX=0,i.ashearY=0,i.appliedValid=!1,i.sorted=!1,i._instanceType="Bone",i.name=e.name,i.data.x=i.data.x||0,i.data.y=i.data.y||0,i.data.scaleX=i.data.scaleX||1,i.data.scaleY=i.data.scaleY||1,i.data.rotation=i.data.rotation||0,i.data.shearX=i.data.shearX||0,i.data.shearY=i.data.shearY||0,i.setToSetupPose(),r&&(i.debugBone=i.addChild(new u.Graphics).beginFill(16711680).drawRect(0,0,e.length||10,10).endFill()),i}return n(e,t),Object.defineProperty(e.prototype,"matrix",{get:function(){return this.worldMatrix},enumerable:!1,configurable:!0}),e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.skewX=t.shearX,this.skewX=t.shearY},e.prototype.updateTransform=function(){var t=e.yDown?-1:1;if(this.parent){var r=this.parent;if("Bone"==this.parent.instanceType){this.transform._worldID++;var i=r.transform.worldMatrix,n=this.localMatrix,a=this.worldMatrix,u=i.a,h=i.c,l=i.b,c=i.d;switch(a.tx=u*this.x+h*this.y+i.tx,a.ty=l*this.x+c*this.y+i.ty,this.data.transform){case o.onlyTranslation:this.transform.updateLocalMatrix(),a.a=n.a,a.c=n.c,a.b=n.b,a.d=n.d;break;case o.noRotationOrReflection:var f=0;(g=u*u+l*l)>1e-4?(h=l*(g=Math.abs(u*c-h*l)/g),c=u*g,f=Math.atan2(l,u)*s.RAD_TO_DEG):(u=0,l=0,f=90-Math.atan2(c,h)*s.RAD_TO_DEG);var p=this.rotation+this.skewX-f,d=this.rotation+this.skewY-f+90,v=Math.cos(p*s.DEG_TO_RAD)*this.scaleX,y=Math.cos(d*s.DEG_TO_RAD)*this.scaleY*t,_=Math.sin(p*s.DEG_TO_RAD)*this.scaleX,m=Math.sin(d*s.DEG_TO_RAD)*this.scaleY*t;a.a=u*v-h*_,a.c=u*y-h*m,a.b=l*v+c*_,a.d=l*y+c*m;break;case o.noScale:case o.noScaleOrReflection:var g,x=Math.cos(this.rotation*s.DEG_TO_RAD),b=Math.sin(this.rotation*s.DEG_TO_RAD),M=(u*x+h*b)/1,T=(l*x+c*b)/1;(g=Math.sqrt(M*M+T*T))>1e-5&&(g=1/g),M*=g,T*=g,g=Math.sqrt(M*M+T*T),this.data.transform==o.noScale&&u*c-h*l<0!=!e.yDown&&(g=-g);var w=Math.PI/2+Math.atan2(T,M),E=Math.cos(w)*g,O=Math.sin(w)*g;v=Math.cos(this.skewX*s.DEG_TO_RAD)*this.scaleX,y=Math.cos((90+this.skewY)*s.DEG_TO_RAD)*this.scaleY,_=Math.sin(this.skewX*s.DEG_TO_RAD)*this.scaleX,m=Math.sin((90+this.skewY)*s.DEG_TO_RAD)*this.scaleY;a.a=M*v+E*_,a.c=M*y+E*m,a.b=T*v+O*_,a.d=T*y+O*m;break;case o.normal:default:this.displayObjectUpdateTransform()}}else{var S=this.parent;this.parent=this._tempDisplayObjectParent,this.transform.updateWorldMatrix(this.parent.transform),this.parent=S}}for(var P=0,A=this.children.length;P<A;++P){var C=this.children[P];C.updateTransform(),C==this.debugBone&&C.worldMatrix.prepend(this.root.worldMatrix)}},e.yDown=!0,e}(a.Container);e.Bone=h,function(t){t.normal="normal",t.onlyTranslation="onlyTranslation",t.noRotationOrReflection="noRotationOrReflection",t.noScale="noScale",t.noScaleOrReflection="noScaleOrReflection"}(o||(o={}))},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Slot=void 0;var o=r(11),a=r(37),s=function(t){function e(e,r,i){var n=t.call(this)||this;return n.bone=e,n.data=r,n.spine=i,n.deform=new Array,n.name=n.data.name,n.color=new a.SpineColor(1,1,1,1),n.data.color&&n.color.setFromString(n.data.color),n.data.sColor=(new a.SpineColor).setFromColor(n.color),n}return n(e,t),e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.deform.length=0)},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.sColor),null==this.data.attachment?this.attachment=null:(this.attachment=null,this.setAttachment(this.spine.getAttachment(this.spine.findSlotIndex(this.name),this.data.attachment)))},e}(o.Container);e.Slot=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Skin=void 0;var i=function(){function t(t){this.name=t,this.attachments=new Array}return t.prototype.addAttachment=function(t,e,r){var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=r},t.prototype.getAttachment=function(t,e){var r=this.attachments[t];return r?r[e]:null},t.prototype.attachAll=function(t,e){for(var r=0,i=0;i<t.length;i++){var n=t[i],o=n.getAttachment();if(o&&r<e.attachments.length){var a=e.attachments[r];for(var s in a){if(o==a[s]){var u=this.getAttachment(r,s);null!=u&&n.setAttachment(u);break}}}r++}},t}();e.Skin=i},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.RegionAttachment=void 0;var o=r(50),a=r(37),s=function(t){function e(e,r,i,n,o,s,u,h,l){void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=1),void 0===s&&(s=0),void 0===u&&(u=0),void 0===h&&(h=0);var c=t.call(this,e)||this;return c.x=r,c.y=i,c.scaleX=n,c.scaleY=o,c.rotation=s,c.width=u,c.height=h,c.texture=l,c.color=new a.SpineColor(1,1,1,1),c}return n(e,t),e}(o.Attachment);e.RegionAttachment=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MeshAttachment=void 0;var o=r(50),a=r(37),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.color=new a.SpineColor(1,1,1,1),e}return n(e,t),e}(o.VertexAttachment);e.MeshAttachment=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SpineBoneAniTrack=e.SpineBoneAniType=void 0;var o,a=r(17),s=r(28),u=r(1);!function(t){t.rotate="rotate",t.translate="translate",t.scale="scale",t.shear="shear"}(o=e.SpineBoneAniType||(e.SpineBoneAniType={}));var h=function(t){function e(e,r,i){var n=t.call(this)||this;n.bone=e,n.animationType=r,n.times=i,n._instanceType="SpineBoneAniTrack",i.forEach((function(t){switch(t.time=t.time||0,r){case o.rotate:t.angle=t.angle||0;break;case o.scale:t.x=void 0===t.x?1:t.x,t.y=void 0===t.y?1:t.y;break;case o.translate:case o.shear:t.x=t.x||0,t.y=t.y||0}})),n.curve=new a.Curve(i.length);for(var s=0,u=0;u<i.length;u++){var h=i[u];a.readCurve(h,n.curve,s),s++}return n}return n(e,t),e.prototype.resetValue=function(){this.bone.setToSetupPose()},e.prototype.setValue=function(t,e,r,i){switch(void 0===e&&(e=1),void 0===r&&(r=a.MixBlend.replace),void 0===i&&(i=a.MixDirection.in),this.animationType){case o.translate:this.setPosition(t,e,r);break;case o.scale:this.setScale(t,e,r,i);break;case o.shear:this.setShear(t,e,r);break;case o.rotate:this.setRotation(t,e,r)}},e.prototype.setRotation=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=a.MixBlend.replace);var i=this.times,n=this.bone;if(t<i[0].time)switch(r){case a.MixBlend.setup:return void(n.rotation=n.data.rotation);case a.MixBlend.first:var o=n.data.rotation-n.rotation;n.rotation+=(o-l(o))*e}else if(t>=i[i.length-1].time){var s=i[i.length-1].angle;switch(r){case a.MixBlend.setup:n.rotation=n.data.rotation+s*e;break;case a.MixBlend.first:case a.MixBlend.replace:s+=n.data.rotation-n.rotation,s-=l(s);case a.MixBlend.add:n.rotation+=s*e}}else{var u=this.findPreIndex(t),h=i[u-1].angle,c=i[u].time,f=this.curve.getCurvePercent(u-1,1-(t-c)/(i[u-1].time-c)),p=i[u].angle-h;switch(p=h+(p-l(p))*f,r){case a.MixBlend.setup:n.rotation=n.data.rotation+(p-l(p))*e;break;case a.MixBlend.first:case a.MixBlend.replace:p+=n.data.rotation-n.rotation;case a.MixBlend.add:n.rotation+=(p-l(p))*e}}},e.prototype.setPosition=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=a.MixBlend.replace);var i=this.times,n=this.bone;if(t<i[0].time)switch(r){case a.MixBlend.setup:return n.x=n.data.x,void(n.y=n.data.y);case a.MixBlend.first:n.x+=(n.data.x-n.x)*e,n.y+=(n.data.y-n.y)*e}else{var o=0,s=0;if(t>=i[i.length-1].time)o=i[i.length-1].x,s=i[i.length-1].y;else{var u=this.findPreIndex(t);o=i[u-1].x,s=i[u-1].y;var h=i[u].time,l=this.curve.getCurvePercent(u-1,1-(t-h)/(i[u-1].time-h));o+=(i[u].x-o)*l,s+=(i[u].y-s)*l}switch(r){case a.MixBlend.setup:n.x=n.data.x+o*e,n.y=n.data.y+s*e;break;case a.MixBlend.first:case a.MixBlend.replace:n.x+=(n.data.x+o-n.x)*e,n.y+=(n.data.y+s-n.y)*e;break;case a.MixBlend.add:n.x+=o*e,n.y+=s*e}}},e.prototype.setScale=function(t,e,r,i){void 0===e&&(e=1),void 0===r&&(r=a.MixBlend.replace),void 0===i&&(i=a.MixDirection.in);var n=this.times,o=this.bone;if(t<n[0].time)switch(r){case a.MixBlend.setup:return o.scaleX=o.data.scaleX,void(o.scaleY=o.data.scaleY);case a.MixBlend.first:o.scaleX+=(o.data.scaleX-o.scaleX)*e,o.scaleY+=(o.data.scaleY-o.scaleY)*e}else{var s=0,h=0;if(t>=n[n.length-1].time)s=n[n.length-1].x*o.data.scaleX,h=n[n.length-1].y*o.data.scaleY;else{var l=this.findPreIndex(t);s=n[l-1].x,h=n[l-1].y;var c=n[l].time,f=this.curve.getCurvePercent(l-1,1-(t-c)/(n[l-1].time-c));s=(s+(n[l].x-s)*f)*o.data.scaleX,h=(h+(n[l].y-h)*f)*o.data.scaleY}if(1==e)r==a.MixBlend.add?(o.scaleX+=s-o.data.scaleX,o.scaleY+=h-o.data.scaleY):(o.scaleX=s,o.scaleY=h);else{var p=0,d=0;if(i==a.MixDirection.out)switch(r){case a.MixBlend.setup:p=o.data.scaleX,d=o.data.scaleY,o.scaleX=p+(Math.abs(s)*u.sign(p)-p)*e,o.scaleY=d+(Math.abs(h)*u.sign(d)-d)*e;break;case a.MixBlend.first:case a.MixBlend.replace:p=o.scaleX,d=o.scaleY,o.scaleX=p+(Math.abs(s)*u.sign(p)-p)*e,o.scaleY=d+(Math.abs(h)*u.sign(d)-d)*e;break;case a.MixBlend.add:p=o.scaleX,d=o.scaleY,o.scaleX=p+(Math.abs(s)*u.sign(p)-o.data.scaleX)*e,o.scaleY=d+(Math.abs(h)*u.sign(d)-o.data.scaleY)*e}else switch(r){case a.MixBlend.setup:p=Math.abs(o.data.scaleX)*u.sign(s),d=Math.abs(o.data.scaleY)*u.sign(h),o.scaleX=p+(s-p)*e,o.scaleY=d+(h-d)*e;break;case a.MixBlend.first:case a.MixBlend.replace:p=Math.abs(o.scaleX)*u.sign(s),d=Math.abs(o.scaleY)*u.sign(h),o.scaleX=p+(s-p)*e,o.scaleY=d+(h-d)*e;break;case a.MixBlend.add:p=u.sign(s),d=u.sign(h),o.scaleX=Math.abs(o.scaleX)*p+(s-Math.abs(o.data.scaleX)*p)*e,o.scaleY=Math.abs(o.scaleY)*d+(h-Math.abs(o.data.scaleY)*d)*e}}}},e.prototype.setShear=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=a.MixBlend.replace);var i=this.times,n=this.bone;if(t<i[0].time)switch(r){case a.MixBlend.setup:return n.skewX=n.data.shearX,void(n.skewY=n.data.shearY);case a.MixBlend.first:n.skewX+=(n.data.shearX-n.skewX)*e,n.skewY+=(n.data.shearY-n.skewY)*e}else{var o=0,s=0;if(t>=i[i.length-1].time)o=i[i.length-1].x,s=i[i.length-1].y;else{var u=this.findPreIndex(t);o=i[u-1].y,s=i[u-1].y;var h=i[u].time,l=this.curve.getCurvePercent(u-1,1-(t-h)/(i[u-1].time-h));o+=(i[u].x-o)*l,s+=(i[u].y-s)*l}switch(r){case a.MixBlend.setup:n.skewX=n.data.shearX+o*e,n.skewY=n.data.shearY+s*e;break;case a.MixBlend.first:case a.MixBlend.replace:n.skewX+=(n.data.shearX+o-n.skewX)*e,n.skewY+=(n.data.shearY+s-n.skewY)*e;break;case a.MixBlend.add:n.skewX+=o*e,n.skewY+=s*e}}},e.prototype.findPreIndex=function(t){for(var e=0,r=0;r<this.times.length;r++)if(this.times[r].time>t){e=r;break}return e},e.prototype.destroy=function(){this.bone=null,this.times=null},e}(s.BaseTrack);function l(t){return 360*(16384-(16384.499999999996-t/360|0))}e.SpineBoneAniTrack=h},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SpineColorAniTrack=void 0;var o=r(17),a=r(37),s=function(t){function e(r,i){var n=t.call(this)||this;n.slot=r,n._instanceType="SpineColorAniTrack";var s=i.length;n.frames=new Float32Array(s*e.ENTRIES),n.curve=new o.Curve(s);for(var u=0,h=0;h<s;h++){var l=i[h],c=(new a.SpineColor).setFromString(l.color||"ffffffff"),f=u*e.ENTRIES;n.frames[f]=l.time||0,n.frames[f+e.R]=c.r,n.frames[f+e.G]=c.g,n.frames[f+e.B]=c.b,n.frames[f+e.A]=c.a,o.readCurve(l,n.curve,u),u++}return n}return n(e,t),e.prototype.resetValue=function(){this.slot.setToSetupPose()},e.prototype.setValue=function(t,r,i){void 0===r&&(r=1),void 0===i&&(i=o.MixBlend.replace);var n=this.slot,a=this.frames;if(t<a[0])switch(i){case o.MixBlend.setup:return void n.color.setFromColor(n.data.sColor);case o.MixBlend.first:case o.MixBlend.replace:var s=n.color,u=n.data.sColor;s.add((u.r-s.r)*r,(u.g-s.g)*r,(u.b-s.b)*r,(u.a-s.a)*r)}else{var h=0,l=0,c=0,f=0;if(t>=a[a.length-e.ENTRIES]){var p=a.length;h=a[p+e.PREV_R],l=a[p+e.PREV_G],c=a[p+e.PREV_B],f=a[p+e.PREV_A]}else{var d=o.binarySearch(a,t,e.ENTRIES);h=a[d+e.PREV_R],l=a[d+e.PREV_G],c=a[d+e.PREV_B],f=a[d+e.PREV_A];var v=a[d],y=this.curve.getCurvePercent(d/e.ENTRIES-1,1-(t-v)/(a[d+e.PREV_TIME]-v));h+=(a[d+e.R]-h)*y,l+=(a[d+e.G]-l)*y,c+=(a[d+e.B]-c)*y,f+=(a[d+e.A]-f)*y}if(1==r)n.color.set(h,l,c,f);else{s=n.color;i==o.MixBlend.setup&&s.setFromColor(n.data.sColor),s.add((h-s.r)*r,(l-s.g)*r,(c-s.b)*r,(f-s.a)*r)}}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(r(28).BaseTrack);e.SpineColorAniTrack=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SpineDeformAniTrack=void 0;var o=r(17),a=r(50),s=function(t){function e(e,r,i){var n=t.call(this)||this;n.slot=e,n.attachment=r,n.times=i,n._instanceType="SpineDeformAniTrack";var a=null!=r.bones,s=r.vertices,u=a?s.length/3*2:s.length;n.frameTimes=new Float32Array(i.length),n.frameVertices=new Array(i.length),n.curve=new o.Curve(i.length);for(var h=0,l=0;l<i.length;l++){var c=i[l],f=void 0,p=c.vertices||null;if(null==p)f=a?new Float32Array(u):s;else{f=new Float32Array(u);var d=c.offset||0;if(o.arrayCopy(p,0,f,d,p.length),!a)for(var v=0;v<u;v++)f[v]+=s[v]}n.frameTimes[h]=c.time||0,n.frameVertices[h]=f,o.readCurve(c,n.curve,h),h++}return n}return n(e,t),e.prototype.setValue=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=o.MixBlend.replace);var i=this.slot.getAttachment();if(i instanceof a.VertexAttachment&&i.applyDeform(this.attachment)){var n=this.slot.deform;0==n.length&&(r=o.MixBlend.setup);var s=this.frameVertices,u=s[0].length,h=this.frameTimes;if(t<h[0]){var l=i;switch(r){case o.MixBlend.setup:return void(n.length=0);case o.MixBlend.first:if(1==e){n.length=0;break}var c=o.setArraySize(n,u);if(null==l.bones)for(var f=l.vertices,p=0;p<u;p++)c[p]+=(f[p]-c[p])*e;else{e=1-e;for(p=0;p<u;p++)c[p]*=e}}}else{var d=o.setArraySize(n,u);if(t>=h[h.length-1]){var v=s[h.length-1];if(1==e)if(r==o.MixBlend.add)if(null==(l=i).bones)for(f=l.vertices,p=0;p<u;p++)d[p]+=v[p]-f[p];else for(p=0;p<u;p++)d[p]+=v[p];else o.arrayCopy(v,0,d,0,u);else switch(r){case o.MixBlend.setup:var y=i;if(null==y.bones)for(f=y.vertices,p=0;p<u;p++){var _=f[p];d[p]=_+(v[p]-_)*e}else for(p=0;p<u;p++)d[p]=v[p]*e;break;case o.MixBlend.first:case o.MixBlend.replace:for(p=0;p<u;p++)d[p]+=(v[p]-d[p])*e;case o.MixBlend.add:if(null==(l=i).bones)for(f=l.vertices,p=0;p<u;p++)d[p]+=(v[p]-f[p])*e;else for(p=0;p<u;p++)d[p]+=v[p]*e}}else{var m=o.binarySearch(h,t),g=s[m-1],x=s[m],b=h[m],M=this.curve.getCurvePercent(m-1,1-(t-b)/(h[m-1]-b));if(1==e)if(r==o.MixBlend.add)if(null==(l=i).bones)for(f=l.vertices,p=0;p<u;p++){var T=g[p];d[p]+=T+(x[p]-T)*M-f[p]}else for(p=0;p<u;p++){T=g[p];d[p]+=T+(x[p]-T)*M}else for(p=0;p<u;p++){T=g[p];d[p]=T+(x[p]-T)*M}else switch(r){case o.MixBlend.setup:var w=i;if(null==w.bones)for(f=w.vertices,p=0;p<u;p++){T=g[p],_=f[p];d[p]=_+(T+(x[p]-T)*M-_)*e}else for(p=0;p<u;p++){T=g[p];d[p]=(T+(x[p]-T)*M)*e}break;case o.MixBlend.first:case o.MixBlend.replace:for(p=0;p<u;p++){T=g[p];d[p]+=(T+(x[p]-T)*M-d[p])*e}break;case o.MixBlend.add:if(null==(l=i).bones)for(f=l.vertices,p=0;p<u;p++){T=g[p];d[p]+=(T+(x[p]-T)*M-f[p])*e}else for(p=0;p<u;p++){T=g[p];d[p]+=(T+(x[p]-T)*M)*e}}}}}},e}(r(28).BaseTrack);e.SpineDeformAniTrack=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AttachmentAniTrack=void 0;var o=r(17),a=function(t){function e(e,r,i){var n=t.call(this)||this;return n.slot=e,n.times=r,n.spine=i,n._instanceType="AttachmentAniTrack",r.forEach((function(t){t.time=t.time||0})),n}return n(e,t),e.prototype.resetValue=function(){this.slot.setToSetupPose()},e.prototype.setValue=function(t,e,r,i){void 0===e&&(e=1),void 0===r&&(r=o.MixBlend.replace),void 0===i&&(i=o.MixDirection.in);var n=this.slot;if(i!=o.MixDirection.out||r!=o.MixBlend.setup){var a=this.times;if(t<a[0].time){if(r==o.MixBlend.setup||r==o.MixBlend.first||r==o.MixBlend.replace){u=n.data.attachment;n.setAttachment(u?this.spine.getAttachment(this.spine.slots.indexOf(n),u):null)}}else{var s=a[t>=a[a.length-1].time?a.length-1:function(t,e){var r=0,i=t.length-2;if(0==i)return 1;var n=i>>>1;for(;;){if(t[n+1].time<=e?r=n+1:i=n,r==i)return r+1;n=r+i>>>1}}(a,t)-1].name;n.setAttachment(null==s?null:this.spine.getAttachment(this.spine.slots.indexOf(n),s))}}else{var u=n.data.attachment;n.setAttachment(u?this.spine.getAttachment(this.spine.slots.indexOf(n),u):null)}},e}(r(28).BaseTrack);e.AttachmentAniTrack=a},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.DrawOrderAniTrack=void 0;var o=r(28),a=r(17),s=function(t){function e(e,r,i){var n=t.call(this)||this;return n.slots=e,n.drawOrder=r,n.times=i,n._instanceType="DrawOrderAniTrack",n}return n(e,t),e.prototype.setValue=function(t,e,r,i){void 0===e&&(e=1),void 0===r&&(r=a.MixBlend.replace),void 0===i&&(i=a.MixDirection.in);var n=this.drawOrder,o=this.slots;if(i!=a.MixDirection.out||r!=a.MixBlend.setup){var s=this.times;if(t<s[0].time)r!=a.MixBlend.setup&&r!=a.MixBlend.first||a.arrayCopy(o,0,n,0,o.length);else{var u=s[t>=s[s.length-1].time?s.length-1:function(t,e){var r=0,i=t.length-2;if(0==i)return 1;var n=i>>>1;for(;;){if(t[n+1].time<=e?r=n+1:i=n,r==i)return r+1;n=r+i>>>1}}(s,t)-1].drawOrder;if(u)for(var h=0,l=u.length;h<l;h++)n[h]=o[u[h]];else a.arrayCopy(o,0,n,0,o.length)}}else a.arrayCopy(o,0,n,0,o.length)},e}(o.BaseTrack);e.DrawOrderAniTrack=s},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SpineAniManager=e.SpineAniClip=void 0;var o=r(95),a=r(94),s=r(17),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alpha=1,e.blend=s.MixBlend.replace,e.direction=s.MixDirection.in,e}return n(e,t),e.prototype.rectify=function(){if(this.tracks&&this.tracks.length){for(var t=0;t<this.tracks.length;t++)this.tracks[t].setValue(this.curTime,this.alpha,this.blend,this.direction);this.lastTime=this.curTime}},e}(a.AnimationClip);e.SpineAniClip=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.showAni=function(e,r,i,n){if(void 0===r&&(r=1),void 0===n&&(n=0),!n||!this.currentClip)return t.prototype.showAni.call(this,e,r,i);var o=this.currentClip,a=this.getAniClipByName(e);return a?o==a?t.prototype.showAni.call(this,e,r,i):(o.fromClip&&(this.resetFrom(o.fromClip),o.fromClip=null),a.mixTime=0,a.mixDuration=n,a.fromClip=o,(this.currentClip=a).startAniRange(0,void 0,r,i),this.currentClip):null},e.prototype.update=function(e){void 0===e&&(e=.0167),this.applyMixingFrom(this.currentClip,e,s.MixBlend.first),t.prototype.update.call(this,e)},e.prototype.applyMixingFrom=function(t,e,r){if(t){var i=t.fromClip;if(i){t.mixTime+=e;var n=0;0==t.mixDuration?(n=1,r==s.MixBlend.first&&(r=s.MixBlend.setup)):((n=t.mixTime/t.mixDuration)>1&&(n=1),r!=s.MixBlend.first&&(r=i.blend)),t.alpha=n,i.alpha=1-n,i.blend=r,0==i.alpha&&(this.resetFrom(i),t.fromClip.tracks.forEach((function(t){"AttachmentAniTrack"==t.instanceType&&t.resetValue()})),t.fromClip=null)}}},e.prototype.resetFrom=function(t){t._isPlaying=!1,t.alpha=1,t.blend=s.MixBlend.replace},e}(o.AnimationManager);e.SpineAniManager=h},function(t,e,r){"use strict";var i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.loadSpine=void 0;var o=r(23),a=r(1),s=r(97),u=r(15),h=r(96);e.loadSpine=function(t,e,r){var l=this;o.GlobalLoader.loadAB((function(t,c){return i(l,void 0,void 0,(function(){var i,l,f,p,d,v,y;return n(this,(function(n){if(!t)return r&&r(c),[2];try{i=new DataView(c,0,12),l=i.getUint32(0,!0),f=i.getUint32(4,!0),p=i.getUint32(8,!0),d="data:image/png;base64,"+a.ArrayBufferToBase64(c.slice(12,l+12)),v=a.decodeText(new Uint8Array(c,12+l,f)),y=JSON.parse(a.decodeText(new Uint8Array(c,12+l+f,p))),o.GlobalLoader.loadImage((function(t,r){var i=s.createTexturesByAtlas(u.BaseTexture.fromImage(r),v);e&&e({skeletonData:y,textures:i,spine:new h.Spine(y,i)})}),d)}catch(t){r&&r(t)}return[2]}))}))}),t)}}])}));
//# sourceMappingURL=fyge.min.js.map